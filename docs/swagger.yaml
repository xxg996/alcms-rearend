openapi: 3.0.3
info:
  title: Alcms Backend API
  description: |
    Alcms CMS èµ„æºç®¡ç†ç³»ç»Ÿåç«¯ API
    
    åŸºäº Node.js + Express.js + PostgreSQL æ„å»ºçš„ç°ä»£åŒ–å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œ
    é›†æˆäº†å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†ã€å¤šåª’ä½“èµ„æºç®¡ç†å’Œå¾®ç¤¾åŒºåŠŸèƒ½ã€‚
    
    ## æ ¸å¿ƒç‰¹æ€§
    - ğŸ” JWT åŒä»¤ç‰Œè®¤è¯æœºåˆ¶
    - ğŸ›¡ï¸ RBAC æƒé™æ§åˆ¶æ¨¡å‹
    - ğŸ“„ CMS èµ„æºç®¡ç†ç³»ç»Ÿ
    - ğŸ’¬ å¾®ç¤¾åŒºç³»ç»Ÿ
    - ğŸ” å…¨æ–‡æœç´¢åŠŸèƒ½
    - ğŸ“Š æ•°æ®ç»Ÿè®¡åˆ†æ
    
    ## å¿«é€Ÿå¼€å§‹
    1. ç™»å½•è·å–è®¿é—®ä»¤ç‰Œ
    2. åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ : `Authorization: Bearer <token>`
    3. å¼€å§‹ä½¿ç”¨APIåŠŸèƒ½
    
    ## APIå‰ç¼€è¯´æ˜
    - **è®¤è¯ç›¸å…³**: `/api/auth/*`
    - **ç”¨æˆ·ç®¡ç†**: `/api/users/*`  
    - **CMSèµ„æº**: `/api/resources/*`, `/api/categories/*`, `/api/tags/*`
    - **å¾®ç¤¾åŒº**: `/api/community/*`
    
  version: 1.0.0
  contact:
    name: Alcms Team
    email: admin@alcms.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3000/api
    description: å¼€å‘ç¯å¢ƒ
  - url: https://api.alcms.com/api
    description: ç”Ÿäº§ç¯å¢ƒ

tags:
  - name: Authentication
    description: ğŸ” ç”¨æˆ·è®¤è¯ç›¸å…³æ¥å£
  - name: Users
    description: ğŸ‘¥ ç”¨æˆ·ç®¡ç†ç›¸å…³æ¥å£
  - name: Resources
    description: ğŸ“„ èµ„æºç®¡ç†ç›¸å…³æ¥å£
  - name: Categories
    description: ğŸ“‚ åˆ†ç±»ç®¡ç†ç›¸å…³æ¥å£
  - name: Tags
    description: ğŸ·ï¸ æ ‡ç­¾ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Boards
    description: ğŸ  ç¤¾åŒºæ¿å—ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Posts
    description: ğŸ“ ç¤¾åŒºå¸–å­ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Comments
    description: ğŸ’­ ç¤¾åŒºè¯„è®ºç®¡ç†ç›¸å…³æ¥å£
  - name: Community Interactions
    description: ğŸ‘ ç¤¾åŒºäº’åŠ¨åŠŸèƒ½ç›¸å…³æ¥å£

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT è®¿é—®ä»¤ç‰Œ

  schemas:
    # åŸºç¡€å“åº”æ ¼å¼
    BaseResponse:
      type: object
      properties:
        success:
          type: boolean
          description: è¯·æ±‚æ˜¯å¦æˆåŠŸ
        message:
          type: string
          description: å“åº”æ¶ˆæ¯
        timestamp:
          type: string
          format: date-time
          description: å“åº”æ—¶é—´æˆ³
      required:
        - success
        - message
        - timestamp

    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: false
            errors:
              type: array
              items:
                type: object
              description: è¯¦ç»†é”™è¯¯ä¿¡æ¯

    # ç”¨æˆ·ç›¸å…³æ¨¡å‹
    User:
      type: object
      properties:
        id:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "admin"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "admin@alcms.com"
        nickname:
          type: string
          description: æ˜µç§°
          example: "ç³»ç»Ÿç®¡ç†å‘˜"
        avatar:
          type: string
          nullable: true
          description: å¤´åƒURL
        bio:
          type: string
          nullable: true
          description: ä¸ªäººç®€ä»‹
        status:
          type: string
          enum: [normal, banned, frozen]
          description: ç”¨æˆ·çŠ¶æ€
          example: "normal"
        last_login_at:
          type: string
          format: date-time
          nullable: true
          description: æœ€åç™»å½•æ—¶é—´
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
          description: ç”¨æˆ·è§’è‰²åˆ—è¡¨

    Role:
      type: object
      properties:
        id:
          type: integer
          description: è§’è‰²ID
          example: 1
        name:
          type: string
          description: è§’è‰²åç§°
          example: "admin"
        display_name:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "ç®¡ç†å‘˜"
        description:
          type: string
          description: è§’è‰²æè¿°
          example: "ç³»ç»Ÿç®¡ç†å‘˜ï¼Œå…·æœ‰æœ€é«˜æƒé™"

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "admin@alcms.com"
        password:
          type: string
          description: å¯†ç 
          example: "admin123"

    RegisterRequest:
      type: object
      required:
        - username
        - email
        - password
      properties:
        username:
          type: string
          description: ç”¨æˆ·å
          example: "newuser"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "user@example.com"
        password:
          type: string
          description: å¯†ç 
          example: "password123"
        nickname:
          type: string
          description: æ˜µç§°
          example: "æ–°ç”¨æˆ·"

    AuthResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
                tokens:
                  type: object
                  properties:
                    accessToken:
                      type: string
                      description: è®¿é—®ä»¤ç‰Œ
                    refreshToken:
                      type: string
                      description: åˆ·æ–°ä»¤ç‰Œ
                    tokenType:
                      type: string
                      example: "Bearer"
                    expiresIn:
                      type: string
                      example: "1h"

    # ç¤¾åŒºç›¸å…³æ¨¡å‹
    CommunityBoard:
      type: object
      properties:
        id:
          type: integer
          description: æ¿å—ID
          example: 1
        name:
          type: string
          description: æ¿å—åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
          example: "tech"
        display_name:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "æŠ€æœ¯äº¤æµ"
        description:
          type: string
          description: æ¿å—æè¿°
          example: "ç¼–ç¨‹æŠ€æœ¯ã€å¼€å‘ç»éªŒåˆ†äº«"
        icon_url:
          type: string
          nullable: true
          description: å›¾æ ‡URL
        cover_image_url:
          type: string
          nullable: true
          description: å°é¢å›¾ç‰‡URL
        sort_order:
          type: integer
          description: æ’åºé¡ºåº
          example: 1
        is_active:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true
        post_count:
          type: integer
          description: å¸–å­æ•°é‡
          example: 42
        last_post_id:
          type: integer
          nullable: true
          description: æœ€æ–°å¸–å­ID
        last_post_time:
          type: string
          format: date-time
          nullable: true
          description: æœ€æ–°å¸–å­æ—¶é—´
        moderator_ids:
          type: array
          items:
            type: integer
          description: ç‰ˆä¸»ç”¨æˆ·IDåˆ—è¡¨
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    CreateBoardRequest:
      type: object
      required:
        - name
        - display_name
      properties:
        name:
          type: string
          description: æ¿å—åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
          example: "ai-discussion"
        display_name:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "AIæŠ€æœ¯è®¨è®º"
        description:
          type: string
          description: æ¿å—æè¿°
          example: "äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ æŠ€æœ¯äº¤æµ"
        icon_url:
          type: string
          description: å›¾æ ‡URL
        sort_order:
          type: integer
          description: æ’åºé¡ºåº
          example: 12
        moderator_ids:
          type: array
          items:
            type: integer
          description: ç‰ˆä¸»ç”¨æˆ·IDåˆ—è¡¨

    CommunityPost:
      type: object
      properties:
        id:
          type: integer
          description: å¸–å­ID
          example: 1
        title:
          type: string
          description: å¸–å­æ ‡é¢˜
          example: "Vue 3 + TypeScript æœ€ä½³å®è·µ"
        content:
          type: string
          description: å¸–å­å†…å®¹
        content_type:
          type: string
          enum: [markdown, html]
          description: å†…å®¹æ ¼å¼
          example: "markdown"
        summary:
          type: string
          description: æ‘˜è¦
          example: "åˆ†äº«Vue 3ç»“åˆTypeScriptçš„å¼€å‘ç»éªŒ"
        author_id:
          type: integer
          description: ä½œè€…ID
          example: 1
        board_id:
          type: integer
          description: æ¿å—ID
          example: 3
        status:
          type: string
          enum: [draft, reviewing, published, rejected, deleted]
          description: å¸–å­çŠ¶æ€
          example: "published"
        is_pinned:
          type: boolean
          description: æ˜¯å¦ç½®é¡¶
          example: false
        is_featured:
          type: boolean
          description: æ˜¯å¦ç²¾å
          example: false
        is_locked:
          type: boolean
          description: æ˜¯å¦é”å®š
          example: false
        view_count:
          type: integer
          description: æµè§ˆæ•°
          example: 156
        reply_count:
          type: integer
          description: å›å¤æ•°
          example: 8
        like_count:
          type: integer
          description: ç‚¹èµæ•°
          example: 23
        favorite_count:
          type: integer
          description: æ”¶è—æ•°
          example: 12
        share_count:
          type: integer
          description: åˆ†äº«æ•°
          example: 5
        published_at:
          type: string
          format: date-time
          description: å‘å¸ƒæ—¶é—´
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        # å…³è”æ•°æ®
        author_username:
          type: string
          description: ä½œè€…ç”¨æˆ·å
          example: "developer"
        author_nickname:
          type: string
          description: ä½œè€…æ˜µç§°
          example: "å‰ç«¯å¼€å‘è€…"
        board_name:
          type: string
          description: æ¿å—åç§°
          example: "frontend"
        board_display_name:
          type: string
          description: æ¿å—æ˜¾ç¤ºåç§°
          example: "å‰ç«¯å¼€å‘"
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
          example: ["vue", "typescript", "frontend"]

    CreatePostRequest:
      type: object
      required:
        - title
        - content
        - board_id
      properties:
        title:
          type: string
          description: å¸–å­æ ‡é¢˜
          example: "Vue 3 + TypeScript å¼€å‘æŒ‡å—"
        content:
          type: string
          description: å¸–å­å†…å®¹
          example: "# Vue 3 + TypeScript å¼€å‘æŒ‡å—\n\næœ¬æ–‡å°†åˆ†äº«..."
        content_type:
          type: string
          enum: [markdown, html]
          description: å†…å®¹æ ¼å¼
          default: "markdown"
        summary:
          type: string
          description: æ‘˜è¦
          example: "å®Œæ•´çš„Vue 3 + TypeScriptå¼€å‘æŒ‡å—"
        board_id:
          type: integer
          description: æ¿å—ID
          example: 3
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
          example: ["vue", "typescript"]
        status:
          type: string
          enum: [draft, published]
          description: å¸–å­çŠ¶æ€
          default: "published"

    CommunityComment:
      type: object
      properties:
        id:
          type: integer
          description: è¯„è®ºID
          example: 1
        content:
          type: string
          description: è¯„è®ºå†…å®¹
          example: "æ„Ÿè°¢åˆ†äº«ï¼è¿™ä¸ªæ•™ç¨‹å¾ˆå®ç”¨ã€‚"
        author_id:
          type: integer
          description: ä½œè€…ID
          example: 2
        post_id:
          type: integer
          description: å¸–å­ID
          example: 1
        parent_id:
          type: integer
          nullable: true
          description: çˆ¶è¯„è®ºIDï¼ˆæ¥¼ä¸­æ¥¼ï¼‰
        reply_to_user_id:
          type: integer
          nullable: true
          description: å›å¤ç›®æ ‡ç”¨æˆ·ID
        floor_number:
          type: integer
          description: æ¥¼å±‚å·
          example: 1
        like_count:
          type: integer
          description: ç‚¹èµæ•°
          example: 5
        is_deleted:
          type: boolean
          description: æ˜¯å¦åˆ é™¤
          example: false
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        # å…³è”æ•°æ®
        author_username:
          type: string
          description: ä½œè€…ç”¨æˆ·å
          example: "user123"
        author_nickname:
          type: string
          description: ä½œè€…æ˜µç§°
          example: "æŠ€æœ¯çˆ±å¥½è€…"
        children:
          type: array
          items:
            $ref: '#/components/schemas/CommunityComment'
          description: å­è¯„è®ºåˆ—è¡¨

    CreateCommentRequest:
      type: object
      required:
        - content
        - post_id
      properties:
        content:
          type: string
          description: è¯„è®ºå†…å®¹
          example: "æ„Ÿè°¢åˆ†äº«ï¼æƒ³é—®ä¸€ä¸‹å…³äºTypeScriptç±»å‹å®šä¹‰çš„é—®é¢˜ã€‚"
        post_id:
          type: integer
          description: å¸–å­ID
          example: 1
        parent_id:
          type: integer
          description: çˆ¶è¯„è®ºIDï¼ˆæ¥¼ä¸­æ¥¼å›å¤ï¼‰
        reply_to_user_id:
          type: integer
          description: å›å¤ç›®æ ‡ç”¨æˆ·ID

    # äº’åŠ¨ç›¸å…³æ¨¡å‹
    LikeRequest:
      type: object
      required:
        - target_type
        - target_id
      properties:
        target_type:
          type: string
          enum: [post, comment]
          description: ç‚¹èµç›®æ ‡ç±»å‹
          example: "post"
        target_id:
          type: integer
          description: ç›®æ ‡ID
          example: 1

    FavoriteRequest:
      type: object
      required:
        - post_id
      properties:
        post_id:
          type: integer
          description: å¸–å­ID
          example: 1

    ShareRequest:
      type: object
      required:
        - post_id
      properties:
        post_id:
          type: integer
          description: å¸–å­ID
          example: 1
        platform:
          type: string
          enum: [wechat, weibo, qq, link]
          description: åˆ†äº«å¹³å°
          default: "link"

    ReportRequest:
      type: object
      required:
        - target_type
        - target_id
        - reason
      properties:
        target_type:
          type: string
          enum: [post, comment, user]
          description: ä¸¾æŠ¥ç›®æ ‡ç±»å‹
          example: "post"
        target_id:
          type: integer
          description: ç›®æ ‡ID
          example: 1
        reason:
          type: string
          enum: [spam, inappropriate, harassment, fake, other]
          description: ä¸¾æŠ¥åŸå› 
          example: "inappropriate"
        description:
          type: string
          description: è¯¦ç»†æè¿°
          example: "å†…å®¹åŒ…å«ä¸å½“è¨€è®º"

    # åˆ†é¡µå“åº”
    Pagination:
      type: object
      properties:
        page:
          type: integer
          description: å½“å‰é¡µç 
          example: 1
        limit:
          type: integer
          description: æ¯é¡µæ•°é‡
          example: 20
        total:
          type: integer
          description: æ€»æ•°é‡
          example: 100
        total_pages:
          type: integer
          description: æ€»é¡µæ•°
          example: 5
        has_next:
          type: boolean
          description: æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
          example: true
        has_prev:
          type: boolean
          description: æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
          example: false

    PostListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/CommunityPost'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    CommentListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/CommunityComment'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    BoardListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/CommunityBoard'

  responses:
    UnauthorizedError:
      description: æœªæˆæƒè®¿é—®
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "è®¿é—®ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ"
            timestamp: "2024-01-01T00:00:00.000Z"

    ForbiddenError:
      description: æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "æƒé™ä¸è¶³ï¼Œæ— æ³•æ‰§è¡Œæ­¤æ“ä½œ"
            timestamp: "2024-01-01T00:00:00.000Z"

    NotFoundError:
      description: èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨"
            timestamp: "2024-01-01T00:00:00.000Z"

    BadRequestError:
      description: è¯·æ±‚å‚æ•°é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥"
            timestamp: "2024-01-01T00:00:00.000Z"

    InternalServerError:
      description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"
            timestamp: "2024-01-01T00:00:00.000Z"

paths:
  # è®¤è¯ç›¸å…³æ¥å£
  /auth/login:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å½•
      description: ä½¿ç”¨é‚®ç®±å’Œå¯†ç ç™»å½•ç³»ç»Ÿ
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          description: ç™»å½•å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "é‚®ç®±æˆ–å¯†ç é”™è¯¯"
                timestamp: "2024-01-01T00:00:00.000Z"

  /auth/register:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·æ³¨å†Œ
      description: æ³¨å†Œæ–°ç”¨æˆ·è´¦æˆ·
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: æ³¨å†ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '409':
          description: ç”¨æˆ·å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "é‚®ç®±æˆ–ç”¨æˆ·åå·²è¢«ä½¿ç”¨"
                timestamp: "2024-01-01T00:00:00.000Z"

  /auth/profile:
    get:
      tags:
        - Authentication
      summary: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
      description: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å‡º
      description: ç™»å‡ºå½“å‰ç”¨æˆ·å¹¶ä½¿ä»¤ç‰Œå¤±æ•ˆ
      security:
        - BearerAuth: []
      responses:
        '200':
          description: ç™»å‡ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  # ç”¨æˆ·ç®¡ç†ï¼ˆæœ€å°å¯ç”¨å®šä¹‰ï¼‰
  /users:
    get:
      tags: [Users]
      summary: è·å–ç”¨æˆ·åˆ—è¡¨
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }
    post:
      tags: [Users]
      summary: åˆ›å»ºç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰
      security: [{ BearerAuth: [] }]
      responses:
        '201': { description: Created }

  /users/{userId}:
    get:
      tags: [Users]
      summary: è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯
      parameters:
        - { name: userId, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }
        '404': { $ref: '#/components/responses/NotFoundError' }
    delete:
      tags: [Users]
      summary: åˆ é™¤ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰
      parameters:
        - { name: userId, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }
        '404': { $ref: '#/components/responses/NotFoundError' }

  /users/profile:
    put:
      tags: [Users]
      summary: æ›´æ–°ç”¨æˆ·èµ„æ–™
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }

  /users/{userId}/status:
    put:
      tags: [Users]
      summary: æ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆç®¡ç†å‘˜ï¼‰
      parameters:
        - { name: userId, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }

  # èµ„æºç®¡ç†ï¼ˆæœ€å°å¯ç”¨å®šä¹‰ï¼‰
  /resources:
    get:
      tags: [Resources]
      summary: è·å–èµ„æºåˆ—è¡¨
      responses:
        '200': { description: OK }
    post:
      tags: [Resources]
      summary: åˆ›å»ºèµ„æº
      security: [{ BearerAuth: [] }]
      responses:
        '201': { description: Created }

  /resources/{id}:
    get:
      tags: [Resources]
      summary: è·å–èµ„æºè¯¦æƒ…
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      responses:
        '200': { description: OK }
        '404': { $ref: '#/components/responses/NotFoundError' }
    put:
      tags: [Resources]
      summary: æ›´æ–°èµ„æº
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }
    delete:
      tags: [Resources]
      summary: åˆ é™¤èµ„æº
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }

  /resources/{id}/download:
    post:
      tags: [Resources]
      summary: ä¸‹è½½èµ„æº
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }

  # åˆ†ç±»ç®¡ç†ï¼ˆæœ€å°å¯ç”¨å®šä¹‰ï¼‰
  /categories:
    get:
      tags: [Categories]
      summary: è·å–åˆ†ç±»åˆ—è¡¨
      responses:
        '200': { description: OK }
    post:
      tags: [Categories]
      summary: åˆ›å»ºåˆ†ç±»
      security: [{ BearerAuth: [] }]
      responses:
        '201': { description: Created }

  /categories/{id}:
    get:
      tags: [Categories]
      summary: è·å–åˆ†ç±»è¯¦æƒ…
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      responses:
        '200': { description: OK }
        '404': { $ref: '#/components/responses/NotFoundError' }
    put:
      tags: [Categories]
      summary: æ›´æ–°åˆ†ç±»
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }
    delete:
      tags: [Categories]
      summary: åˆ é™¤åˆ†ç±»
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }

  # æ ‡ç­¾ç®¡ç†ï¼ˆæœ€å°å¯ç”¨å®šä¹‰ï¼‰
  /tags:
    get:
      tags: [Tags]
      summary: è·å–æ ‡ç­¾åˆ—è¡¨
      responses:
        '200': { description: OK }
    post:
      tags: [Tags]
      summary: åˆ›å»ºæ ‡ç­¾
      security: [{ BearerAuth: [] }]
      responses:
        '201': { description: Created }

  /tags/{id}:
    get:
      tags: [Tags]
      summary: è·å–æ ‡ç­¾è¯¦æƒ…
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      responses:
        '200': { description: OK }
        '404': { $ref: '#/components/responses/NotFoundError' }
    put:
      tags: [Tags]
      summary: æ›´æ–°æ ‡ç­¾
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }
    delete:
      tags: [Tags]
      summary: åˆ é™¤æ ‡ç­¾
      parameters:
        - { name: id, in: path, required: true, schema: { type: integer } }
      security: [{ BearerAuth: [] }]
      responses:
        '200': { description: OK }

  # ç¤¾åŒºæ¿å—ç®¡ç†
  /community/boards:
    get:
      tags:
        - Community Boards
      summary: è·å–æ¿å—åˆ—è¡¨
      description: è·å–ç¤¾åŒºæ¿å—åˆ—è¡¨ï¼Œæ”¯æŒç»Ÿè®¡ä¿¡æ¯å’ŒçŠ¶æ€ç­›é€‰
      parameters:
        - name: includeStats
          in: query
          schema:
            type: boolean
            default: false
          description: æ˜¯å¦åŒ…å«ç»Ÿè®¡ä¿¡æ¯
        - name: activeOnly
          in: query
          schema:
            type: boolean
            default: true
          description: ä»…æ˜¾ç¤ºæ¿€æ´»çš„æ¿å—
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardListResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - Community Boards
      summary: åˆ›å»ºæ¿å—
      description: åˆ›å»ºæ–°çš„ç¤¾åŒºæ¿å—ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBoardRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityBoard'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /community/boards/{id}:
    get:
      tags:
        - Community Boards
      summary: è·å–æ¿å—è¯¦æƒ…
      description: æ ¹æ®IDè·å–æ¿å—è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityBoard'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Community Boards
      summary: æ›´æ–°æ¿å—
      description: æ›´æ–°æ¿å—ä¿¡æ¯ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBoardRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityBoard'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Community Boards
      summary: åˆ é™¤æ¿å—
      description: åˆ é™¤æ¿å—ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/boards/search/query:
    get:
      tags:
        - Community Boards
      summary: æœç´¢æ¿å—
      description: æ ¹æ®å…³é”®è¯æœç´¢æ¿å—
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: æœç´¢å…³é”®è¯
          example: "æŠ€æœ¯"
      responses:
        '200':
          description: æœç´¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'

  /community/boards/{id}/stats:
    get:
      tags:
        - Community Boards
      summary: è·å–æ¿å—ç»Ÿè®¡
      description: è·å–æŒ‡å®šæ¿å—çš„ç»Ÿè®¡ä¿¡æ¯
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          name:
                            type: string
                          display_name:
                            type: string
                          total_posts:
                            type: string
                          total_comments:
                            type: string
                          unique_authors:
                            type: string
                          latest_post_time:
                            type: string
                            format: date-time
                          avg_view_count:
                            type: string
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ç¤¾åŒºå¸–å­ç®¡ç†
  /community/posts:
    get:
      tags:
        - Community Posts
      summary: è·å–å¸–å­åˆ—è¡¨
      description: è·å–ç¤¾åŒºå¸–å­åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åº
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: é¡µç 
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
          description: æ¯é¡µæ•°é‡
        - name: board_id
          in: query
          schema:
            type: integer
          description: æ¿å—IDç­›é€‰
        - name: author_id
          in: query
          schema:
            type: integer
          description: ä½œè€…IDç­›é€‰
        - name: status
          in: query
          schema:
            type: string
            default: "published"
          description: çŠ¶æ€ç­›é€‰
        - name: is_pinned
          in: query
          schema:
            type: boolean
          description: æ˜¯å¦ç½®é¡¶ç­›é€‰
        - name: is_featured
          in: query
          schema:
            type: boolean
          description: æ˜¯å¦ç²¾åç­›é€‰
        - name: sort_by
          in: query
          schema:
            type: string
            default: "last_reply_time"
          description: æ’åºå­—æ®µ
        - name: sort_order
          in: query
          schema:
            type: string
            enum: [ASC, DESC]
            default: "DESC"
          description: æ’åºæ–¹å‘
        - name: search
          in: query
          schema:
            type: string
          description: æœç´¢å…³é”®è¯
        - name: tags
          in: query
          schema:
            type: string
          description: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”ï¼‰
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'

    post:
      tags:
        - Community Posts
      summary: åˆ›å»ºå¸–å­
      description: åˆ›å»ºæ–°å¸–å­ï¼ˆéœ€è¦ç™»å½•ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/posts/{id}:
    get:
      tags:
        - Community Posts
      summary: è·å–å¸–å­è¯¦æƒ…
      description: è·å–å¸–å­è¯¦æƒ…ï¼Œä¼šè‡ªåŠ¨å¢åŠ æµè§ˆæ•°
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Community Posts
      summary: æ›´æ–°å¸–å­
      description: æ›´æ–°å¸–å­å†…å®¹ï¼ˆä»…ä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Community Posts
      summary: åˆ é™¤å¸–å­
      description: åˆ é™¤å¸–å­ï¼ˆä»…ä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/posts/search/query:
    get:
      tags:
        - Community Posts
      summary: æœç´¢å¸–å­
      description: å…¨æ–‡æœç´¢å¸–å­å†…å®¹
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: æœç´¢å…³é”®è¯
          example: "vue typescript"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: é¡µç 
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
          description: æ¯é¡µæ•°é‡
        - name: board_id
          in: query
          schema:
            type: integer
          description: é™åˆ¶åœ¨ç‰¹å®šæ¿å—æœç´¢
      responses:
        '200':
          description: æœç´¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'

  /community/posts/hot/list:
    get:
      tags:
        - Community Posts
      summary: è·å–çƒ­é—¨å¸–å­
      description: è·å–çƒ­é—¨å¸–å­åˆ—è¡¨
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: è¿”å›æ•°é‡
        - name: board_id
          in: query
          schema:
            type: integer
          description: æ¿å—IDï¼ˆå¯é€‰ï¼‰
        - name: days
          in: query
          schema:
            type: integer
            default: 7
          description: ç»Ÿè®¡å¤©æ•°
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CommunityPost'

  /community/posts/{id}/pin:
    patch:
      tags:
        - Community Posts
      summary: ç½®é¡¶å¸–å­
      description: ç½®é¡¶/å–æ¶ˆç½®é¡¶å¸–å­ï¼ˆéœ€è¦ç‰ˆä¸»æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                is_pinned:
                  type: boolean
                  default: true
                  description: æ˜¯å¦ç½®é¡¶
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/posts/{id}/feature:
    patch:
      tags:
        - Community Posts
      summary: è®¾ç½®ç²¾åå¸–
      description: è®¾ç½®/å–æ¶ˆç²¾åå¸–ï¼ˆéœ€è¦ç‰ˆä¸»æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                is_featured:
                  type: boolean
                  default: true
                  description: æ˜¯å¦ç²¾å
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/posts/{id}/lock:
    patch:
      tags:
        - Community Posts
      summary: é”å®šå¸–å­
      description: é”å®š/è§£é”å¸–å­ï¼ˆéœ€è¦ç‰ˆä¸»æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                is_locked:
                  type: boolean
                  default: true
                  description: æ˜¯å¦é”å®š
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ç¤¾åŒºè¯„è®ºç®¡ç†
  /community/posts/{post_id}/comments:
    get:
      tags:
        - Community Comments
      summary: è·å–å¸–å­è¯„è®º
      description: è·å–å¸–å­çš„è¯„è®ºåˆ—è¡¨
      parameters:
        - name: post_id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: é¡µç 
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
          description: æ¯é¡µæ•°é‡
        - name: sort_by
          in: query
          schema:
            type: string
            default: "created_at"
          description: æ’åºå­—æ®µ
        - name: sort_order
          in: query
          schema:
            type: string
            enum: [ASC, DESC]
            default: "ASC"
          description: æ’åºæ–¹å‘
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentListResponse'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/comments:
    post:
      tags:
        - Community Comments
      summary: åˆ›å»ºè¯„è®º
      description: åˆ›å»ºæ–°è¯„è®ºï¼ˆä¸»è¯„è®ºæˆ–å›å¤ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCommentRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityComment'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/comments/{id}:
    get:
      tags:
        - Community Comments
      summary: è·å–è¯„è®ºè¯¦æƒ…
      description: è·å–å•ä¸ªè¯„è®ºçš„è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: è¯„è®ºID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityComment'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Community Comments
      summary: æ›´æ–°è¯„è®º
      description: æ›´æ–°è¯„è®ºå†…å®¹ï¼ˆä»…ä½œè€…ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: è¯„è®ºID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  description: è¯„è®ºå†…å®¹
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityComment'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Community Comments
      summary: åˆ é™¤è¯„è®º
      description: åˆ é™¤è¯„è®ºï¼ˆä»…ä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: è¯„è®ºID
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: åˆ é™¤åŸå› 
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ç¤¾åŒºäº’åŠ¨åŠŸèƒ½
  /community/interactions/like:
    post:
      tags:
        - Community Interactions
      summary: ç‚¹èµ/å–æ¶ˆç‚¹èµ
      description: å¯¹å¸–å­æˆ–è¯„è®ºè¿›è¡Œç‚¹èµæˆ–å–æ¶ˆç‚¹èµ
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LikeRequest'
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          is_liked:
                            type: boolean
                            description: æ˜¯å¦å·²ç‚¹èµ
                          like_count:
                            type: integer
                            description: ç‚¹èµæ€»æ•°
                          action:
                            type: string
                            enum: [liked, unliked]
                            description: æ“ä½œç±»å‹
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/interactions/favorite:
    post:
      tags:
        - Community Interactions
      summary: æ”¶è—/å–æ¶ˆæ”¶è—
      description: æ”¶è—æˆ–å–æ¶ˆæ”¶è—å¸–å­
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          is_favorited:
                            type: boolean
                            description: æ˜¯å¦å·²æ”¶è—
                          favorite_count:
                            type: integer
                            description: æ”¶è—æ€»æ•°
                          action:
                            type: string
                            enum: [favorited, unfavorited]
                            description: æ“ä½œç±»å‹
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/interactions/share:
    post:
      tags:
        - Community Interactions
      summary: åˆ†äº«å¸–å­
      description: åˆ†äº«å¸–å­åˆ°æŒ‡å®šå¹³å°
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShareRequest'
      responses:
        '200':
          description: åˆ†äº«æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          share_count:
                            type: integer
                            description: åˆ†äº«æ€»æ•°
                          share_url:
                            type: string
                            description: åˆ†äº«é“¾æ¥
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/interactions/report:
    post:
      tags:
        - Community Interactions
      summary: ä¸¾æŠ¥å†…å®¹
      description: ä¸¾æŠ¥å¸–å­ã€è¯„è®ºæˆ–ç”¨æˆ·
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportRequest'
      responses:
        '201':
          description: ä¸¾æŠ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          report_id:
                            type: integer
                            description: ä¸¾æŠ¥ID
                          status:
                            type: string
                            description: ä¸¾æŠ¥çŠ¶æ€
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/interactions/like/check:
    get:
      tags:
        - Community Interactions
      summary: æ£€æŸ¥ç‚¹èµçŠ¶æ€
      description: æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦ç‚¹èµäº†æŒ‡å®šå†…å®¹
      security:
        - BearerAuth: []
      parameters:
        - name: target_type
          in: query
          required: true
          schema:
            type: string
            enum: [post, comment]
          description: ç›®æ ‡ç±»å‹
        - name: target_id
          in: query
          required: true
          schema:
            type: integer
          description: ç›®æ ‡ID
      responses:
        '200':
          description: æ£€æŸ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          is_liked:
                            type: boolean
                            description: æ˜¯å¦å·²ç‚¹èµ
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/interactions/favorite/check:
    get:
      tags:
        - Community Interactions
      summary: æ£€æŸ¥æ”¶è—çŠ¶æ€
      description: æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ”¶è—äº†æŒ‡å®šå¸–å­
      security:
        - BearerAuth: []
      parameters:
        - name: post_id
          in: query
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      responses:
        '200':
          description: æ£€æŸ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          is_favorited:
                            type: boolean
                            description: æ˜¯å¦å·²æ”¶è—
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
