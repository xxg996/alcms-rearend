openapi: 3.0.3
openapi: 3.0.3
info:
  title: Alcms Backend API
  description: |
    Alcms CMS èµ„æºç®¡ç†ç³»ç»Ÿåç«¯ API
    
    åŸºäº Node.js + Express.js + PostgreSQL æ„å»ºçš„ç°ä»£åŒ–å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œ
    é›†æˆäº†å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†ã€å¤šåª’ä½“èµ„æºç®¡ç†å’Œå¾®ç¤¾åŒºåŠŸèƒ½ã€‚
    
    ## æ ¸å¿ƒç‰¹æ€§
    - ğŸ” JWT åŒä»¤ç‰Œè®¤è¯æœºåˆ¶
    - ğŸ›¡ï¸ RBAC æƒé™æ§åˆ¶æ¨¡å‹
    - ğŸ“„ CMS èµ„æºç®¡ç†ç³»ç»Ÿ
    - ğŸ’¬ å¾®ç¤¾åŒºç³»ç»Ÿ
    - ğŸ’ VIPä¼šå‘˜ç³»ç»Ÿ
    - ğŸ« å¡å¯†ç”Ÿæˆä¸å…‘æ¢ç³»ç»Ÿ
    - ğŸ’° ç”¨æˆ·ç§¯åˆ†ç³»ç»Ÿ
    - âœ… æ¯æ—¥ç­¾åˆ°ç³»ç»Ÿ
    - ğŸ” å…¨æ–‡æœç´¢åŠŸèƒ½
    - ğŸ“Š æ•°æ®ç»Ÿè®¡åˆ†æ
    
    ## å¿«é€Ÿå¼€å§‹
    1. ç™»å½•è·å–è®¿é—®ä»¤ç‰Œ
    2. åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ : `Authorization: Bearer <token>`
    3. å¼€å§‹ä½¿ç”¨APIåŠŸèƒ½
    
    ## APIå‰ç¼€è¯´æ˜
    - **è®¤è¯ç›¸å…³**: `/api/auth/*`
    - **ç”¨æˆ·ç®¡ç†**: `/api/users/*`  
    - **CMSèµ„æº**: `/api/resources/*`, `/api/categories/*`, `/api/tags/*`
    - **å¾®ç¤¾åŒº**: `/api/community/*`
    
  version: 1.0.0
  contact:
    name: Alcms Team
    email: admin@alcms.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3000/api
    description: å¼€å‘ç¯å¢ƒ
  - url: https://api.alcms.com/api
    description: ç”Ÿäº§ç¯å¢ƒ

tags:
  - name: Authentication
    description: ğŸ” ç”¨æˆ·è®¤è¯ç›¸å…³æ¥å£
  - name: Users
    description: ğŸ‘¥ ç”¨æˆ·ç®¡ç†ç›¸å…³æ¥å£
  - name: Resources
    description: ğŸ“„ èµ„æºç®¡ç†ç›¸å…³æ¥å£
  - name: Categories
    description: ğŸ“‚ åˆ†ç±»ç®¡ç†ç›¸å…³æ¥å£
  - name: Tags
    description: ğŸ·ï¸ æ ‡ç­¾ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Boards
    description: ğŸ  ç¤¾åŒºæ¿å—ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Posts
    description: ğŸ“ ç¤¾åŒºå¸–å­ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Comments
    description: ğŸ’­ ç¤¾åŒºè¯„è®ºç®¡ç†ç›¸å…³æ¥å£
  - name: Community Interactions
    description: ğŸ‘ ç¤¾åŒºäº’åŠ¨åŠŸèƒ½ç›¸å…³æ¥å£
  - name: VIP System
    description: ğŸ’ VIPä¼šå‘˜ç³»ç»Ÿç›¸å…³æ¥å£
  - name: Card Key System
    description: ğŸ« å¡å¯†ç”Ÿæˆä¸å…‘æ¢ç³»ç»Ÿç›¸å…³æ¥å£
  - name: Points System
    description: ğŸ’° ç”¨æˆ·ç§¯åˆ†ç³»ç»Ÿç›¸å…³æ¥å£
  - name: Checkin System
    description: âœ… æ¯æ—¥ç­¾åˆ°ç³»ç»Ÿç›¸å…³æ¥å£

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT è®¿é—®ä»¤ç‰Œ

  schemas:
    # åŸºç¡€å“åº”æ ¼å¼
    BaseResponse:
      type: object
      properties:
        success:
          type: boolean
          description: è¯·æ±‚æ˜¯å¦æˆåŠŸ
        message:
          type: string
          description: å“åº”æ¶ˆæ¯
        timestamp:
          type: string
          format: date-time
          description: å“åº”æ—¶é—´æˆ³
      required:
        - success
        - message
        - timestamp

    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: false
            errors:
              type: array
              items:
                type: object
              description: è¯¦ç»†é”™è¯¯ä¿¡æ¯

    # ç”¨æˆ·ç›¸å…³æ¨¡å‹
    User:
      type: object
      properties:
        id:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "admin"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "admin@alcms.com"
        nickname:
          type: string
          description: æ˜µç§°
          example: "ç³»ç»Ÿç®¡ç†å‘˜"
        avatar:
          type: string
          nullable: true
          description: å¤´åƒURL
        bio:
          type: string
          nullable: true
          description: ä¸ªäººç®€ä»‹
        status:
          type: string
          enum: [normal, banned, frozen]
          description: ç”¨æˆ·çŠ¶æ€
          example: "normal"
        last_login_at:
          type: string
          format: date-time
          nullable: true
          description: æœ€åç™»å½•æ—¶é—´
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        roles:
          type: array
          items:
            $ref: '#/components/schemas/Role'
          description: ç”¨æˆ·è§’è‰²åˆ—è¡¨

    Role:
      type: object
      properties:
        id:
          type: integer
          description: è§’è‰²ID
          example: 1
        name:
          type: string
          description: è§’è‰²åç§°
          example: "admin"
        displayName:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "ç®¡ç†å‘˜"
        description:
          type: string
          description: è§’è‰²æè¿°
          example: "ç³»ç»Ÿç®¡ç†å‘˜ï¼Œå…·æœ‰æœ€é«˜æƒé™"

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "admin@alcms.com"
        password:
          type: string
          description: å¯†ç 
          example: "admin123"

    RegisterRequest:
      type: object
      required:
        - username
        - email
        - password
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
          pattern: '^[a-zA-Z0-9_]+$'
          description: ç”¨æˆ·åï¼ˆ3-50ä¸ªå­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼‰
          example: "newuser"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "user@example.com"
        password:
          type: string
          minLength: 8
          maxLength: 128
          description: å¯†ç ï¼ˆ8-128ä¸ªå­—ç¬¦ï¼‰
          example: "password123"
        nickname:
          type: string
          minLength: 1
          maxLength: 100
          description: æ˜µç§°ï¼ˆå¯é€‰ï¼Œ1-100ä¸ªå­—ç¬¦ï¼‰
          example: "æ–°ç”¨æˆ·"

    UpdateProfileRequest:
      type: object
      properties:
        nickname:
          type: string
          minLength: 1
          maxLength: 100
          description: æ˜µç§°ï¼ˆ1-100ä¸ªå­—ç¬¦ï¼‰
          example: "æˆ‘çš„æ–°æ˜µç§°"
        avatar_url:
          type: string
          maxLength: 500
          nullable: true
          description: å¤´åƒURLï¼ˆæœ€å¤š500ä¸ªå­—ç¬¦ï¼‰
          example: "https://example.com/avatar.jpg"
        bio:
          type: string
          maxLength: 500
          nullable: true
          description: ä¸ªäººç®€ä»‹ï¼ˆæœ€å¤š500ä¸ªå­—ç¬¦ï¼‰
          example: "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹"

    CreateUserRequest:
      type: object
      required:
        - username
        - email
        - password
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
          pattern: '^[a-zA-Z0-9_]+$'
          description: ç”¨æˆ·åï¼ˆ3-50ä¸ªå­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼‰
          example: "newuser"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "user@example.com"
        password:
          type: string
          minLength: 8
          maxLength: 128
          description: å¯†ç ï¼ˆ8-128ä¸ªå­—ç¬¦ï¼‰
          example: "password123"
        nickname:
          type: string
          minLength: 1
          maxLength: 100
          description: æ˜µç§°ï¼ˆå¯é€‰ï¼Œ1-100ä¸ªå­—ç¬¦ï¼‰
          example: "æ–°ç”¨æˆ·"
        roleName:
          type: string
          enum: [user, vip, moderator, admin]
          description: åˆå§‹è§’è‰²ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºuserï¼‰
          example: "user"
        status:
          type: string
          enum: [normal, banned, frozen]
          description: ç”¨æˆ·çŠ¶æ€ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºnormalï¼‰
          example: "normal"

    UpdateUserStatusRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: [normal, banned, frozen]
          description: æ–°çš„ç”¨æˆ·çŠ¶æ€
          example: "banned"
        reason:
          type: string
          maxLength: 500
          description: çŠ¶æ€å˜æ›´åŸå› ï¼ˆå¯é€‰ï¼Œæœ€å¤š500ä¸ªå­—ç¬¦ï¼‰
          example: "è¿åç¤¾åŒºè§„å®š"

    FreezeUserRequest:
      type: object
      properties:
        reason:
          type: string
          maxLength: 500
          description: å†»ç»“/è§£å†»åŸå› ï¼ˆå¯é€‰ï¼Œæœ€å¤š500ä¸ªå­—ç¬¦ï¼‰
          example: "è´¦æˆ·å¼‚å¸¸æ´»åŠ¨"

    AssignRoleRequest:
      type: object
      required:
        - roleName
      properties:
        roleName:
          type: string
          enum: [user, vip, moderator, admin]
          description: è¦åˆ†é…çš„è§’è‰²åç§°
          example: "moderator"

    UserListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                users:
                  type: array
                  items:
                    $ref: '#/components/schemas/User'
                pagination:
                  $ref: '#/components/schemas/PaginationInfo'

    UserProfileResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
                roles:
                  type: array
                  items:
                    $ref: '#/components/schemas/Role'
                permissions:
                  type: array
                  items:
                    type: string
                  description: ç”¨æˆ·æƒé™åˆ—è¡¨

    UserStatsResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                totalUsers:
                  type: integer
                  description: ç”¨æˆ·æ€»æ•°
                  example: 1250
                activeUsers:
                  type: integer
                  description: æ­£å¸¸çŠ¶æ€ç”¨æˆ·æ•°
                  example: 1200
                bannedUsers:
                  type: integer
                  description: è¢«å°ç¦ç”¨æˆ·æ•°
                  example: 30
                frozenUsers:
                  type: integer
                  description: è¢«å†»ç»“ç”¨æˆ·æ•°
                  example: 20
                recentRegistrations:
                  type: integer
                  description: è¿‘7å¤©æ–°æ³¨å†Œç”¨æˆ·æ•°
                  example: 25
                roleStats:
                  type: array
                  items:
                    type: object
                    properties:
                      displayName:
                        type: string
                        description: è§’è‰²æ˜¾ç¤ºåç§°
                      userCount:
                        type: integer
                        description: è¯¥è§’è‰²ç”¨æˆ·æ•°é‡

    PaginationInfo:
      type: object
      properties:
        page:
          type: integer
          description: å½“å‰é¡µç 
          example: 1
        limit:
          type: integer
          description: æ¯é¡µæ•°é‡
          example: 20
        total:
          type: integer
          description: æ€»è®°å½•æ•°
          example: 1250
        totalPages:
          type: integer
          description: æ€»é¡µæ•°
          example: 63

    RegisterRequest:
      type: object
      required:
        - username
        - email
        - password
      properties:
        username:
          type: string
          description: ç”¨æˆ·å
          example: "newuser"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "user@example.com"
        password:
          type: string
          description: å¯†ç 
          example: "password123"
        nickname:
          type: string
          description: æ˜µç§°
          example: "æ–°ç”¨æˆ·"

    AuthResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
                tokens:
                  type: object
                  properties:
                    accessToken:
                      type: string
                      description: è®¿é—®ä»¤ç‰Œ
                    refreshToken:
                      type: string
                      description: åˆ·æ–°ä»¤ç‰Œ
                    tokenType:
                      type: string
                      example: "Bearer"
                    expiresIn:
                      type: string
                      example: "1h"

    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: åˆ·æ–°ä»¤ç‰Œ
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    RefreshTokenResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                tokens:
                  type: object
                  properties:
                    accessToken:
                      type: string
                      description: æ–°çš„è®¿é—®ä»¤ç‰Œ
                      example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    refreshToken:
                      type: string
                      description: æ–°çš„åˆ·æ–°ä»¤ç‰Œ
                      example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    tokenType:
                      type: string
                      description: ä»¤ç‰Œç±»å‹
                      example: "Bearer"
                    expiresIn:
                      type: string
                      description: è®¿é—®ä»¤ç‰Œè¿‡æœŸæ—¶é—´
                      example: "1h"

    # ç¤¾åŒºç›¸å…³æ¨¡å‹
    CommunityBoard:
      type: object
      properties:
        id:
          type: integer
          description: æ¿å—ID
          example: 1
        name:
          type: string
          description: æ¿å—åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
          example: "tech"
        displayName:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "æŠ€æœ¯äº¤æµ"
        description:
          type: string
          description: æ¿å—æè¿°
          example: "ç¼–ç¨‹æŠ€æœ¯ã€å¼€å‘ç»éªŒåˆ†äº«"
        iconUrl:
          type: string
          nullable: true
          description: å›¾æ ‡URL
        coverImageUrl:
          type: string
          nullable: true
          description: å°é¢å›¾ç‰‡URL
        sortOrder:
          type: integer
          description: æ’åºé¡ºåº
          example: 1
        isActive:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true
        post_count:
          type: integer
          description: å¸–å­æ•°é‡
          example: 42
        last_post_id:
          type: integer
          nullable: true
          description: æœ€æ–°å¸–å­ID
        last_post_time:
          type: string
          format: date-time
          nullable: true
          description: æœ€æ–°å¸–å­æ—¶é—´
        moderator_ids:
          type: array
          items:
            type: integer
          description: ç‰ˆä¸»ç”¨æˆ·IDåˆ—è¡¨
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    CreateBoardRequest:
      type: object
      required:
        - name
        - displayName
      properties:
        name:
          type: string
          description: æ¿å—åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
          example: "ai-discussion"
        displayName:
          type: string
          description: æ˜¾ç¤ºåç§°
          example: "AIæŠ€æœ¯è®¨è®º"
        description:
          type: string
          description: æ¿å—æè¿°
          example: "äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ æŠ€æœ¯äº¤æµ"
        iconUrl:
          type: string
          description: å›¾æ ‡URL
        sortOrder:
          type: integer
          description: æ’åºé¡ºåº
          example: 12
        moderator_ids:
          type: array
          items:
            type: integer
          description: ç‰ˆä¸»ç”¨æˆ·IDåˆ—è¡¨

    CommunityPost:
      type: object
      properties:
        id:
          type: integer
          description: å¸–å­ID
          example: 1
        title:
          type: string
          description: å¸–å­æ ‡é¢˜
          example: "Vue 3 + TypeScript æœ€ä½³å®è·µ"
        content:
          type: string
          description: å¸–å­å†…å®¹
        contentType:
          type: string
          enum: [markdown, html]
          description: å†…å®¹æ ¼å¼
          example: "markdown"
        summary:
          type: string
          description: æ‘˜è¦
          example: "åˆ†äº«Vue 3ç»“åˆTypeScriptçš„å¼€å‘ç»éªŒ"
        authorId:
          type: integer
          description: ä½œè€…ID
          example: 1
        boardId:
          type: integer
          description: æ¿å—ID
          example: 3
        status:
          type: string
          enum: [draft, reviewing, published, rejected, deleted]
          description: å¸–å­çŠ¶æ€
          example: "published"
        isPinned:
          type: boolean
          description: æ˜¯å¦ç½®é¡¶
          example: false
        isFeatured:
          type: boolean
          description: æ˜¯å¦ç²¾å
          example: false
        isLocked:
          type: boolean
          description: æ˜¯å¦é”å®š
          example: false
        viewCount:
          type: integer
          description: æµè§ˆæ•°
          example: 156
        replyCount:
          type: integer
          description: å›å¤æ•°
          example: 8
        likeCount:
          type: integer
          description: ç‚¹èµæ•°
          example: 23
        favoriteCount:
          type: integer
          description: æ”¶è—æ•°
          example: 12
        shareCount:
          type: integer
          description: åˆ†äº«æ•°
          example: 5
        publishedAt:
          type: string
          format: date-time
          description: å‘å¸ƒæ—¶é—´
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        # å…³è”æ•°æ®
        authorUsername:
          type: string
          description: ä½œè€…ç”¨æˆ·å
          example: "developer"
        authorNickname:
          type: string
          description: ä½œè€…æ˜µç§°
          example: "å‰ç«¯å¼€å‘è€…"
        boardName:
          type: string
          description: æ¿å—åç§°
          example: "frontend"
        boardDisplayName:
          type: string
          description: æ¿å—æ˜¾ç¤ºåç§°
          example: "å‰ç«¯å¼€å‘"
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
          example: ["vue", "typescript", "frontend"]

    CreatePostRequest:
      type: object
      required:
        - title
        - content
        - board_id
      properties:
        title:
          type: string
          description: å¸–å­æ ‡é¢˜
          example: "Vue 3 + TypeScript å¼€å‘æŒ‡å—"
        content:
          type: string
          description: å¸–å­å†…å®¹
          example: "# Vue 3 + TypeScript å¼€å‘æŒ‡å—\n\næœ¬æ–‡å°†åˆ†äº«..."
        contentType:
          type: string
          enum: [markdown, html]
          description: å†…å®¹æ ¼å¼
          default: "markdown"
        summary:
          type: string
          description: æ‘˜è¦
          example: "å®Œæ•´çš„Vue 3 + TypeScriptå¼€å‘æŒ‡å—"
        boardId:
          type: integer
          description: æ¿å—ID
          example: 3
        tags:
          type: array
          items:
            type: string
          description: æ ‡ç­¾åˆ—è¡¨
          example: ["vue", "typescript"]
        status:
          type: string
          enum: [draft, published]
          description: å¸–å­çŠ¶æ€
          default: "published"

    CommunityComment:
      type: object
      properties:
        id:
          type: integer
          description: è¯„è®ºID
          example: 1
        content:
          type: string
          description: è¯„è®ºå†…å®¹
          example: "æ„Ÿè°¢åˆ†äº«ï¼è¿™ä¸ªæ•™ç¨‹å¾ˆå®ç”¨ã€‚"
        authorId:
          type: integer
          description: ä½œè€…ID
          example: 2
        postId:
          type: integer
          description: å¸–å­ID
          example: 1
        parentId:
          type: integer
          nullable: true
          description: çˆ¶è¯„è®ºIDï¼ˆæ¥¼ä¸­æ¥¼ï¼‰
        replyToUserId:
          type: integer
          nullable: true
          description: å›å¤ç›®æ ‡ç”¨æˆ·ID
        floorNumber:
          type: integer
          description: æ¥¼å±‚å·
          example: 1
        likeCount:
          type: integer
          description: ç‚¹èµæ•°
          example: 5
        isDeleted:
          type: boolean
          description: æ˜¯å¦åˆ é™¤
          example: false
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        # å…³è”æ•°æ®
        authorUsername:
          type: string
          description: ä½œè€…ç”¨æˆ·å
          example: "user123"
        authorNickname:
          type: string
          description: ä½œè€…æ˜µç§°
          example: "æŠ€æœ¯çˆ±å¥½è€…"
        children:
          type: array
          items:
            $ref: '#/components/schemas/CommunityComment'
          description: å­è¯„è®ºåˆ—è¡¨

    CreateCommentRequest:
      type: object
      required:
        - content
        - post_id
      properties:
        content:
          type: string
          description: è¯„è®ºå†…å®¹
          example: "æ„Ÿè°¢åˆ†äº«ï¼æƒ³é—®ä¸€ä¸‹å…³äºTypeScriptç±»å‹å®šä¹‰çš„é—®é¢˜ã€‚"
        postId:
          type: integer
          description: å¸–å­ID
          example: 1
        parentId:
          type: integer
          description: çˆ¶è¯„è®ºIDï¼ˆæ¥¼ä¸­æ¥¼å›å¤ï¼‰
        replyToUserId:
          type: integer
          description: å›å¤ç›®æ ‡ç”¨æˆ·ID

    # äº’åŠ¨ç›¸å…³æ¨¡å‹
    LikeRequest:
      type: object
      required:
        - target_type
        - target_id
      properties:
        target_type:
          type: string
          enum: [post, comment]
          description: ç‚¹èµç›®æ ‡ç±»å‹
          example: "post"
        target_id:
          type: integer
          description: ç›®æ ‡ID
          example: 1

    FavoriteRequest:
      type: object
      required:
        - post_id
      properties:
        postId:
          type: integer
          description: å¸–å­ID
          example: 1

    ShareRequest:
      type: object
      required:
        - post_id
      properties:
        postId:
          type: integer
          description: å¸–å­ID
          example: 1
        platform:
          type: string
          enum: [wechat, weibo, qq, link]
          description: åˆ†äº«å¹³å°
          default: "link"

    ReportRequest:
      type: object
      required:
        - target_type
        - target_id
        - reason
      properties:
        target_type:
          type: string
          enum: [post, comment, user]
          description: ä¸¾æŠ¥ç›®æ ‡ç±»å‹
          example: "post"
        target_id:
          type: integer
          description: ç›®æ ‡ID
          example: 1
        reason:
          type: string
          enum: [spam, inappropriate, harassment, fake, other]
          description: ä¸¾æŠ¥åŸå› 
          example: "inappropriate"
        description:
          type: string
          description: è¯¦ç»†æè¿°
          example: "å†…å®¹åŒ…å«ä¸å½“è¨€è®º"

    # åˆ†é¡µå“åº”
    Pagination:
      type: object
      properties:
        page:
          type: integer
          description: å½“å‰é¡µç 
          example: 1
        limit:
          type: integer
          description: æ¯é¡µæ•°é‡
          example: 20
        total:
          type: integer
          description: æ€»æ•°é‡
          example: 100
        total_pages:
          type: integer
          description: æ€»é¡µæ•°
          example: 5
        has_next:
          type: boolean
          description: æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
          example: true
        has_prev:
          type: boolean
          description: æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
          example: false

    PostListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/CommunityPost'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    CommentListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/CommunityComment'
                pagination:
                  $ref: '#/components/schemas/Pagination'

    BoardListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/CommunityBoard'

    # åˆ†ç±»ç®¡ç†ç³»ç»Ÿç›¸å…³æ¨¡å‹
    Category:
      type: object
      properties:
        id:
          type: integer
          description: åˆ†ç±»ID
          example: 1
        name:
          type: string
          description: åˆ†ç±»åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
          example: "frontend"
        displayName:
          type: string
          description: åˆ†ç±»æ˜¾ç¤ºåç§°
          example: "å‰ç«¯å¼€å‘"
        description:
          type: string
          nullable: true
          description: åˆ†ç±»æè¿°
          example: "å‰ç«¯å¼€å‘ç›¸å…³èµ„æºåˆ†ç±»"
        parentId:
          type: integer
          nullable: true
          description: çˆ¶åˆ†ç±»IDï¼ˆé¡¶çº§åˆ†ç±»ä¸ºnullï¼‰
          example: null
        sortOrder:
          type: integer
          description: æ’åºé¡ºåº
          example: 0
        iconUrl:
          type: string
          nullable: true
          description: åˆ†ç±»å›¾æ ‡URL
          example: "https://example.com/icons/frontend.png"
        isActive:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true
        resourceCount:
          type: integer
          description: è¯¥åˆ†ç±»ä¸‹çš„èµ„æºæ•°é‡
          example: 25
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        # å…³è”æ•°æ®
        parentName:
          type: string
          nullable: true
          description: çˆ¶åˆ†ç±»åç§°
          example: null
        parentDisplayName:
          type: string
          nullable: true
          description: çˆ¶åˆ†ç±»æ˜¾ç¤ºåç§°
          example: null
        children:
          type: array
          items:
            $ref: '#/components/schemas/Category'
          description: å­åˆ†ç±»åˆ—è¡¨ï¼ˆä»…åœ¨æ ‘å½¢ç»“æ„æ—¶åŒ…å«ï¼‰

    CreateCategoryRequest:
      type: object
      required:
        - name
        - displayName
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[a-zA-Z0-9_-]+$'
          description: åˆ†ç±»åç§°ï¼ˆè‹±æ–‡æ ‡è¯†ï¼Œ1-100ä¸ªå­—ç¬¦ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œæ¨ªçº¿ï¼‰
          example: "frontend"
        displayName:
          type: string
          minLength: 1
          maxLength: 100
          description: åˆ†ç±»æ˜¾ç¤ºåç§°ï¼ˆ1-100ä¸ªå­—ç¬¦ï¼‰
          example: "å‰ç«¯å¼€å‘"
        description:
          type: string
          maxLength: 500
          description: åˆ†ç±»æè¿°ï¼ˆæœ€å¤š500ä¸ªå­—ç¬¦ï¼‰
          example: "å‰ç«¯å¼€å‘ç›¸å…³æŠ€æœ¯èµ„æºåˆ†ç±»"
        parentId:
          type: integer
          nullable: true
          description: çˆ¶åˆ†ç±»IDï¼ˆåˆ›å»ºé¡¶çº§åˆ†ç±»æ—¶ä¸ºnullï¼‰
          example: null
        sortOrder:
          type: integer
          minimum: 0
          default: 0
          description: æ’åºé¡ºåºï¼ˆæ•°å­—è¶Šå°è¶Šé å‰ï¼‰
          example: 0
        iconUrl:
          type: string
          maxLength: 500
          description: åˆ†ç±»å›¾æ ‡URLï¼ˆæœ€å¤š500ä¸ªå­—ç¬¦ï¼‰
          example: "https://example.com/icons/frontend.png"

    UpdateCategoryRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          pattern: '^[a-zA-Z0-9_-]+$'
          description: åˆ†ç±»åç§°ï¼ˆè‹±æ–‡æ ‡è¯†ï¼‰
          example: "frontend-dev"
        displayName:
          type: string
          minLength: 1
          maxLength: 100
          description: åˆ†ç±»æ˜¾ç¤ºåç§°
          example: "å‰ç«¯å¼€å‘æŠ€æœ¯"
        description:
          type: string
          maxLength: 500
          nullable: true
          description: åˆ†ç±»æè¿°
          example: "å‰ç«¯å¼€å‘ç›¸å…³æŠ€æœ¯èµ„æºåˆ†ç±»ï¼ŒåŒ…æ‹¬æ¡†æ¶ã€å·¥å…·ç­‰"
        parentId:
          type: integer
          nullable: true
          description: çˆ¶åˆ†ç±»ID
          example: 2
        sortOrder:
          type: integer
          minimum: 0
          description: æ’åºé¡ºåº
          example: 1
        iconUrl:
          type: string
          maxLength: 500
          nullable: true
          description: åˆ†ç±»å›¾æ ‡URL
          example: "https://example.com/icons/frontend-new.png"
        isActive:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true

    CategoryListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Category'
              description: åˆ†ç±»åˆ—è¡¨ï¼ˆå¯èƒ½æ˜¯æ‰å¹³åˆ—è¡¨æˆ–æ ‘å½¢ç»“æ„ï¼‰

    # èµ„æºç®¡ç†ç³»ç»Ÿç›¸å…³æ¨¡å‹
    Resource:
      type: object
      properties:
        id:
          type: integer
          description: èµ„æºID
          example: 1
        title:
          type: string
          description: èµ„æºæ ‡é¢˜
          example: "Vue 3 å®Œæ•´æ•™ç¨‹"
        slug:
          type: string
          description: èµ„æºåˆ«åï¼ˆURLå‹å¥½ï¼‰
          example: "vue3-complete-tutorial"
        description:
          type: string
          nullable: true
          description: èµ„æºæè¿°
          example: "æœ€å…¨é¢çš„Vue 3æ•™ç¨‹ï¼Œä»åŸºç¡€åˆ°é«˜çº§"
        content:
          type: string
          nullable: true
          description: èµ„æºå†…å®¹ï¼ˆè¯¦ç»†ä»‹ç»ï¼‰
          example: "# Vue 3 å®Œæ•´æ•™ç¨‹\n\næœ¬æ•™ç¨‹å°†å¸¦æ‚¨å…¨é¢å­¦ä¹ ..."
        summary:
          type: string
          nullable: true
          description: èµ„æºæ‘˜è¦
          example: "ä»åŸºç¡€åˆ°é«˜çº§çš„Vue 3å­¦ä¹ æŒ‡å—"
        categoryId:
          type: integer
          nullable: true
          description: åˆ†ç±»ID
          example: 1
        resourceTypeId:
          type: integer
          description: èµ„æºç±»å‹ID
          example: 1
        coverImageUrl:
          type: string
          nullable: true
          description: å°é¢å›¾ç‰‡URL
          example: "https://example.com/covers/vue3.jpg"
        fileUrl:
          type: string
          nullable: true
          description: æ–‡ä»¶URL
          example: "https://example.com/files/vue3-tutorial.zip"
        fileSize:
          type: integer
          nullable: true
          description: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
          example: 10485760
        fileMimeType:
          type: string
          nullable: true
          description: æ–‡ä»¶MIMEç±»å‹
          example: "application/zip"
        duration:
          type: integer
          nullable: true
          description: æ—¶é•¿ï¼ˆç§’ï¼Œä»…é€‚ç”¨äºéŸ³è§†é¢‘ï¼‰
          example: 3600
        externalUrl:
          type: string
          nullable: true
          description: å¤–éƒ¨é“¾æ¥
          example: "https://example.com/external-resource"
        downloadUrl:
          type: string
          nullable: true
          description: ä¸‹è½½é“¾æ¥
          example: "https://example.com/download/vue3-tutorial"
        isPublic:
          type: boolean
          description: æ˜¯å¦å…¬å¼€
          example: true
        isFree:
          type: boolean
          description: æ˜¯å¦å…è´¹
          example: false
        requiredVipLevel:
          type: string
          nullable: true
          description: éœ€è¦çš„VIPç­‰çº§
          example: "vip1"
        requiredPoints:
          type: integer
          description: éœ€è¦çš„ç§¯åˆ†
          example: 100
        downloadLimit:
          type: integer
          nullable: true
          description: ä¸‹è½½æ¬¡æ•°é™åˆ¶
          example: 1000
        status:
          type: string
          enum: [draft, reviewing, published, archived]
          description: èµ„æºçŠ¶æ€
          example: "published"
        viewCount:
          type: integer
          description: æŸ¥çœ‹æ•°
          example: 1250
        downloadCount:
          type: integer
          description: ä¸‹è½½æ•°
          example: 485
        likeCount:
          type: integer
          description: ç‚¹èµæ•°
          example: 89
        authorId:
          type: integer
          description: ä½œè€…ID
          example: 1
        publishedAt:
          type: string
          format: date-time
          nullable: true
          description: å‘å¸ƒæ—¶é—´
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        # å…³è”æ•°æ®
        resourceTypeName:
          type: string
          nullable: true
          description: èµ„æºç±»å‹åç§°
          example: "video"
        resource_type_display_name:
          type: string
          nullable: true
          description: èµ„æºç±»å‹æ˜¾ç¤ºåç§°
          example: "è§†é¢‘æ•™ç¨‹"
        is_streamable:
          type: boolean
          nullable: true
          description: æ˜¯å¦æ”¯æŒåœ¨çº¿æ’­æ”¾
          example: true
        categoryName:
          type: string
          nullable: true
          description: åˆ†ç±»åç§°
          example: "frontend"
        category_display_name:
          type: string
          nullable: true
          description: åˆ†ç±»æ˜¾ç¤ºåç§°
          example: "å‰ç«¯å¼€å‘"
        authorUsername:
          type: string
          nullable: true
          description: ä½œè€…ç”¨æˆ·å
          example: "developer"
        authorNickname:
          type: string
          nullable: true
          description: ä½œè€…æ˜µç§°
          example: "å‰ç«¯å¼€å‘è€…"
        isFavorited:
          type: boolean
          nullable: true
          description: å½“å‰ç”¨æˆ·æ˜¯å¦æ”¶è—ï¼ˆéœ€è¦ç™»å½•ï¼‰
          example: true
        tags:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                description: æ ‡ç­¾ID
              name:
                type: string
                description: æ ‡ç­¾åç§°
              displayName:
                type: string
                description: æ ‡ç­¾æ˜¾ç¤ºåç§°
              color:
                type: string
                description: æ ‡ç­¾é¢œè‰²
          description: å…³è”çš„æ ‡ç­¾åˆ—è¡¨

    CreateResourceRequest:
      type: object
      required:
        - title
        - resource_type_id
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: èµ„æºæ ‡é¢˜ï¼ˆ1-200ä¸ªå­—ç¬¦ï¼‰
          example: "Vue 3 å®Œæ•´æ•™ç¨‹"
        slug:
          type: string
          maxLength: 200
          pattern: '^[a-z0-9-]+$'
          description: èµ„æºåˆ«åï¼ˆå¯é€‰ï¼Œä¸å¡«åˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰
          example: "vue3-complete-tutorial"
        description:
          type: string
          maxLength: 1000
          description: èµ„æºæè¿°ï¼ˆæœ€å¤†1000ä¸ªå­—ç¬¦ï¼‰
          example: "æœ€å…¨é¢çš„Vue 3æ•™ç¨‹ï¼Œä»åŸºç¡€åˆ°é«˜çº§"
        content:
          type: string
          description: èµ„æºå†…å®¹ï¼ˆè¯¦ç»†ä»‹ç»ï¼Œæ”¯æŒMarkdownï¼‰
          example: "# Vue 3 å®Œæ•´æ•™ç¨‹\n\næœ¬æ•™ç¨‹å°†å¸¦æ‚¨å…¨é¢å­¦ä¹ Vue 3çš„æ‰€æœ‰ç‰¹æ€§..."
        summary:
          type: string
          maxLength: 500
          description: èµ„æºæ‘˜è¦ï¼ˆæœ€å¤š500ä¸ªå­—ç¬¦ï¼‰
          example: "ä»åŸºç¡€åˆ°é«˜çº§çš„Vue 3å­¦ä¹ æŒ‡å—"
        categoryId:
          type: integer
          minimum: 1
          description: åˆ†ç±»ID
          example: 1
        resourceTypeId:
          type: integer
          minimum: 1
          description: èµ„æºç±»å‹IDï¼ˆå¿…å¡«ï¼‰
          example: 1
        coverImageUrl:
          type: string
          maxLength: 500
          format: uri
          description: å°é¢å›¾ç‰‡URL
          example: "https://example.com/covers/vue3.jpg"
        fileUrl:
          type: string
          maxLength: 500
          format: uri
          description: æ–‡ä»¶URL
          example: "https://example.com/files/vue3-tutorial.zip"
        fileSize:
          type: integer
          minimum: 0
          description: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
          example: 10485760
        fileMimeType:
          type: string
          maxLength: 100
          description: æ–‡ä»¶MIMEç±»å‹
          example: "application/zip"
        duration:
          type: integer
          minimum: 0
          description: æ—¶é•¿ï¼ˆç§’ï¼Œä»…é€‚ç”¨äºéŸ³è§†é¢‘ï¼‰
          example: 3600
        externalUrl:
          type: string
          maxLength: 500
          format: uri
          description: å¤–éƒ¨é“¾æ¥
          example: "https://example.com/external-resource"
        downloadUrl:
          type: string
          maxLength: 500
          format: uri
          description: ä¸‹è½½é“¾æ¥
          example: "https://example.com/download/vue3-tutorial"
        isPublic:
          type: boolean
          default: true
          description: æ˜¯å¦å…¬å¼€
          example: true
        isFree:
          type: boolean
          default: true
          description: æ˜¯å¦å…è´¹
          example: false
        requiredVipLevel:
          type: string
          enum: [vip1, vip2, vip3]
          description: éœ€è¦çš„VIPç­‰çº§
          example: "vip1"
        requiredPoints:
          type: integer
          minimum: 0
          default: 0
          description: éœ€è¦çš„ç§¯åˆ†
          example: 100
        downloadLimit:
          type: integer
          minimum: 0
          description: ä¸‹è½½æ¬¡æ•°é™åˆ¶ï¼ˆ0è¡¨ç¤ºæ— é™åˆ¶ï¼‰
          example: 1000
        tags:
          type: array
          items:
            type: string
          maxItems: 10
          description: æ ‡ç­¾åˆ—è¡¨ï¼ˆæœ€å¤š10ä¸ªï¼‰
          example: ["vue3", "frontend", "tutorial"]

    UpdateResourceRequest:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
          description: èµ„æºæ ‡é¢˜
          example: "Vue 3 é«˜çº§æ•™ç¨‹ï¼ˆæ›´æ–°ç‰ˆï¼‰"
        slug:
          type: string
          maxLength: 200
          pattern: '^[a-z0-9-]+$'
          description: èµ„æºåˆ«å
          example: "vue3-advanced-tutorial"
        description:
          type: string
          maxLength: 1000
          description: èµ„æºæè¿°
          example: "æœ€å…¨é¢çš„Vue 3é«˜çº§æ•™ç¨‹ï¼ŒåŒ…å«æœ€æ–°ç‰¹æ€§"
        content:
          type: string
          description: èµ„æºå†…å®¹
          example: "# Vue 3 é«˜çº§æ•™ç¨‹\n\næœ¬æ•™ç¨‹æ›´æ–°äº†..."
        summary:
          type: string
          maxLength: 500
          description: èµ„æºæ‘˜è¦
          example: "åŒ…å«æœ€æ–°Vue 3ç‰¹æ€§çš„é«˜çº§æ•™ç¨‹"
        categoryId:
          type: integer
          minimum: 1
          description: åˆ†ç±»ID
          example: 2
        resourceTypeId:
          type: integer
          minimum: 1
          description: èµ„æºç±»å‹ID
          example: 1
        coverImageUrl:
          type: string
          maxLength: 500
          format: uri
          description: å°é¢å›¾ç‰‡URL
          example: "https://example.com/covers/vue3-advanced.jpg"
        fileUrl:
          type: string
          maxLength: 500
          format: uri
          description: æ–‡ä»¶URL
          example: "https://example.com/files/vue3-advanced.zip"
        fileSize:
          type: integer
          minimum: 0
          description: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
          example: 15728640
        fileMimeType:
          type: string
          maxLength: 100
          description: æ–‡ä»¶MIMEç±»å‹
          example: "application/zip"
        duration:
          type: integer
          minimum: 0
          description: æ—¶é•¿ï¼ˆç§’ï¼‰
          example: 4500
        externalUrl:
          type: string
          maxLength: 500
          format: uri
          description: å¤–éƒ¨é“¾æ¥
        downloadUrl:
          type: string
          maxLength: 500
          format: uri
          description: ä¸‹è½½é“¾æ¥
        isPublic:
          type: boolean
          description: æ˜¯å¦å…¬å¼€
          example: true
        isFree:
          type: boolean
          description: æ˜¯å¦å…è´¹
          example: false
        requiredVipLevel:
          type: string
          enum: [vip1, vip2, vip3]
          description: éœ€è¦çš„VIPç­‰çº§
          example: "vip2"
        requiredPoints:
          type: integer
          minimum: 0
          description: éœ€è¦çš„ç§¯åˆ†
          example: 150
        downloadLimit:
          type: integer
          minimum: 0
          description: ä¸‹è½½æ¬¡æ•°é™åˆ¶
          example: 500
        status:
          type: string
          enum: [draft, reviewing, published, archived]
          description: èµ„æºçŠ¶æ€
          example: "published"
        tags:
          type: array
          items:
            type: string
          maxItems: 10
          description: æ ‡ç­¾åˆ—è¡¨
          example: ["vue3", "advanced", "frontend"]

    ResourceDetailResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Resource'
              description: èµ„æºè¯¦æƒ…

    ResourceListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                resources:
                  type: array
                  items:
                    $ref: '#/components/schemas/Resource'
                  description: èµ„æºåˆ—è¡¨
                pagination:
                  type: object
                  properties:
                    page:
                      type: integer
                      description: å½“å‰é¡µç 
                      example: 1
                    limit:
                      type: integer
                      description: æ¯é¡µæ•°é‡
                      example: 20
                    total:
                      type: integer
                      description: æ€»æ•°é‡
                      example: 156
                    totalPages:
                      type: integer
                      description: æ€»é¡µæ•°
                      example: 8
                    hasNextPage:
                      type: boolean
                      description: æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
                      example: true
                    hasPreviousPage:
                      type: boolean
                      description: æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
                      example: false
                  description: åˆ†é¡µä¿¡æ¯

    ResourceStatsResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                total_resources:
                  type: integer
                  description: èµ„æºæ€»æ•°
                  example: 1250
                published_resources:
                  type: integer
                  description: å·²å‘å¸ƒèµ„æºæ•°
                  example: 980
                totalViews:
                  type: integer
                  description: æ€»æŸ¥çœ‹æ•°
                  example: 45620
                total_downloads:
                  type: integer
                  description: æ€»ä¸‹è½½æ•°
                  example: 12890
                free_resources:
                  type: integer
                  description: å…è´¹èµ„æºæ•°
                  example: 756
                paid_resources:
                  type: integer
                  description: ä»˜è´¹èµ„æºæ•°
                  example: 224
                categories_count:
                  type: integer
                  description: åˆ†ç±»æ•°é‡
                  example: 15
                authors_count:
                  type: integer
                  description: ä½œè€…æ•°é‡
                  example: 45

    # ä¸‹è½½èµ„æºç›¸å…³æ¨¡å‹
    DownloadResourceRequest:
      type: object
      required:
        - encrypted_url
      properties:
        encrypted_url:
          type: string
          minLength: 1
          description: åŠ å¯†çš„ä¸‹è½½URLï¼Œç”±ç³»ç»Ÿç”Ÿæˆçš„ç­¾åé“¾æ¥
          example: "eyJhbGciOiJIUzI1NiJ9.eyJyZXNvdXJjZUlkIjoxLCJ1cmwiOiJodHRwczovL2V4YW1wbGUuY29tL2ZpbGUuemlwIiwiZXhwIjoxNjQwOTk1MjAwfQ.signature"
      example:
        encrypted_url: "eyJhbGciOiJIUzI1NiJ9.eyJyZXNvdXJjZUlkIjoxLCJ1cmwiOiJodHRwczovL2V4YW1wbGUuY29tL2ZpbGUuemlwIiwiZXhwIjoxNjQwOTk1MjAwfQ.signature"

    DownloadResourceResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                download_url:
                  type: string
                  description: çœŸå®ä¸‹è½½é“¾æ¥
                  example: "https://cdn.example.com/files/vue3-tutorial.zip"
                file_name:
                  type: string
                  description: æ–‡ä»¶åç§°
                  example: "Vue 3 å®Œæ•´æ•™ç¨‹"
                file_size:
                  type: integer
                  nullable: true
                  description: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
                  example: 10485760
                mime_type:
                  type: string
                  nullable: true
                  description: æ–‡ä»¶MIMEç±»å‹
                  example: "application/zip"
                is_external:
                  type: boolean
                  description: æ˜¯å¦ä¸ºå¤–éƒ¨é“¾æ¥
                  example: false
              required:
                - download_url
                - file_name
                - is_external
          example:
            success: true
            message: "è·å–ä¸‹è½½é“¾æ¥æˆåŠŸ"
            data:
              download_url: "https://cdn.example.com/files/vue3-tutorial.zip"
              file_name: "Vue 3 å®Œæ•´æ•™ç¨‹"
              file_size: 10485760
              mime_type: "application/zip"
              is_external: false
            timestamp: "2024-01-15T10:30:00.000Z"

    # èµ„æºæ”¶è—ç³»ç»Ÿç›¸å…³æ¨¡å‹
    FavoriteResource:
      type: object
      properties:
        favoriteId:
          type: integer
          description: æ”¶è—è®°å½•ID
          example: 1
        favoritedAt:
          type: string
          format: date-time
          description: æ”¶è—æ—¶é—´
        # èµ„æºä¿¡æ¯
        id:
          type: integer
          description: èµ„æºID
          example: 1
        title:
          type: string
          description: èµ„æºæ ‡é¢˜
          example: "Vue 3 å®Œæ•´æ•™ç¨‹"
        slug:
          type: string
          description: èµ„æºåˆ«å
          example: "vue3-complete-tutorial"
        description:
          type: string
          description: èµ„æºæè¿°
          example: "æœ€å…¨é¢çš„Vue 3æ•™ç¨‹"
        summary:
          type: string
          description: èµ„æºæ‘˜è¦
          example: "ä»åŸºç¡€åˆ°è¿›é˜¶çš„Vue 3å­¦ä¹ æŒ‡å—"
        coverImageUrl:
          type: string
          nullable: true
          description: å°é¢å›¾ç‰‡URL
          example: "https://example.com/covers/vue3.jpg"
        fileSize:
          type: integer
          nullable: true
          description: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
          example: 10485760
        duration:
          type: integer
          nullable: true
          description: æ—¶é•¿ï¼ˆç§’ï¼Œä»…é€‚ç”¨äºéŸ³è§†é¢‘ï¼‰
          example: 3600
        isFree:
          type: boolean
          description: æ˜¯å¦å…è´¹
          example: false
        requiredVipLevel:
          type: string
          nullable: true
          description: éœ€è¦çš„VIPç­‰çº§
          example: "vip1"
        requiredPoints:
          type: integer
          nullable: true
          description: éœ€è¦çš„ç§¯åˆ†
          example: 100
        status:
          type: string
          description: èµ„æºçŠ¶æ€
          example: "published"
        viewCount:
          type: integer
          description: æŸ¥çœ‹æ•°
          example: 1250
        downloadCount:
          type: integer
          description: ä¸‹è½½æ•°
          example: 485
        likeCount:
          type: integer
          description: ç‚¹èµæ•°
          example: 89
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        # å…³è”æ•°æ®
        categoryName:
          type: string
          nullable: true
          description: åˆ†ç±»åç§°
          example: "å‰ç«¯å¼€å‘"
        resourceTypeName:
          type: string
          nullable: true
          description: èµ„æºç±»å‹åç§°
          example: "è§†é¢‘æ•™ç¨‹"
        authorUsername:
          type: string
          nullable: true
          description: ä½œè€…ç”¨æˆ·å
          example: "developer"
        authorNickname:
          type: string
          nullable: true
          description: ä½œè€…æ˜µç§°
          example: "å‰ç«¯å¼€å‘è€…"

    FavoriteListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            data:
              type: object
              properties:
                resources:
                  type: array
                  items:
                    $ref: '#/components/schemas/FavoriteResource'
                  description: æ”¶è—çš„èµ„æºåˆ—è¡¨
                pagination:
                  type: object
                  properties:
                    page:
                      type: integer
                      description: å½“å‰é¡µç 
                      example: 1
                    limit:
                      type: integer
                      description: æ¯é¡µæ•°é‡
                      example: 20
                    total:
                      type: integer
                      description: æ€»æ•°é‡
                      example: 45
                    totalPages:
                      type: integer
                      description: æ€»é¡µæ•°
                      example: 3
                    hasNextPage:
                      type: boolean
                      description: æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
                      example: true
                    hasPreviousPage:
                      type: boolean
                      description: æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
                      example: false
                  description: åˆ†é¡µä¿¡æ¯

    # VIPç³»ç»Ÿç›¸å…³æ¨¡å‹
    VIPLevel:
      type: object
      properties:
        level:
          type: integer
          description: VIPç­‰çº§
          example: 1
        name:
          type: string
          description: VIPç­‰çº§åç§°
          example: "vip1"
        displayName:
          type: string
          description: VIPç­‰çº§æ˜¾ç¤ºåç§°
          example: "é»„é‡‘VIP"
        description:
          type: string
          description: VIPç­‰çº§æè¿°
          example: "äº«å—åŸºç¡€VIPç‰¹æƒ"
        benefits:
          type: object
          description: VIPç‰¹æƒé…ç½®
          example:
            download_speed_boost: 2
            daily_points_bonus: 50
        price:
          type: number
          format: float
          description: VIPä»·æ ¼
          example: 29.99
        durationDays:
          type: integer
          description: VIPæœ‰æ•ˆå¤©æ•°
          example: 30
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    CreateVIPLevelRequest:
      type: object
      required:
        - level
        - name
        - displayName
      properties:
        level:
          type: integer
          description: VIPç­‰çº§ï¼ˆå¿…é¡»å”¯ä¸€ï¼‰
          example: 2
        name:
          type: string
          description: VIPç­‰çº§åç§°
          example: "vip2"
        displayName:
          type: string
          description: VIPç­‰çº§æ˜¾ç¤ºåç§°
          example: "é“‚é‡‘VIP"
        description:
          type: string
          description: VIPç­‰çº§æè¿°
          example: "äº«å—é«˜çº§VIPç‰¹æƒ"
        benefits:
          type: object
          description: VIPç‰¹æƒé…ç½®
          example:
            download_speed_boost: 3
            daily_points_bonus: 100
        price:
          type: number
          format: float
          description: VIPä»·æ ¼
          example: 59.99
        durationDays:
          type: integer
          description: VIPæœ‰æ•ˆå¤©æ•°
          example: 30

    UserVIPInfo:
      type: object
      properties:
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "testuser"
        isVip:
          type: boolean
          description: æ˜¯å¦æ˜¯VIPç”¨æˆ·
          example: true
        vipLevel:
          type: integer
          nullable: true
          description: VIPç­‰çº§
          example: 1
        vipExpireAt:
          type: string
          format: date-time
          nullable: true
          description: VIPè¿‡æœŸæ—¶é—´ï¼ˆnullè¡¨ç¤ºæ°¸ä¹…VIPï¼‰
        vipLevelInfo:
          $ref: '#/components/schemas/VIPLevel'
        isExpired:
          type: boolean
          description: VIPæ˜¯å¦å·²è¿‡æœŸ
          example: false
        isPermanent:
          type: boolean
          description: æ˜¯å¦ä¸ºæ°¸ä¹…VIP
          example: false

    VIPOrder:
      type: object
      properties:
        id:
          type: integer
          description: è®¢å•ID
          example: 1
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        type:
          type: string
          enum: [purchase, upgrade, extend, admin_set, card_redeem]
          description: è®¢å•ç±»å‹
          example: "purchase"
        vipLevel:
          type: integer
          description: VIPç­‰çº§
          example: 1
        days:
          type: integer
          description: VIPå¤©æ•°
          example: 30
        amount:
          type: number
          format: float
          description: è®¢å•é‡‘é¢
          example: 29.99
        status:
          type: string
          enum: [pending, completed, failed, cancelled]
          description: è®¢å•çŠ¶æ€
          example: "completed"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    SetUserVIPRequest:
      type: object
      required:
        - vip_level
      properties:
        vipLevel:
          type: integer
          description: VIPç­‰çº§
          example: 1
        days:
          type: integer
          description: VIPå¤©æ•°ï¼ˆ0è¡¨ç¤ºæ°¸ä¹…VIPï¼‰
          example: 30
          default: 30

    ExtendUserVIPRequest:
      type: object
      required:
        - days
      properties:
        days:
          type: integer
          description: å»¶é•¿å¤©æ•°ï¼ˆ0è¡¨ç¤ºè®¾ä¸ºæ°¸ä¹…VIPï¼‰
          example: 30

    # å¡å¯†ç³»ç»Ÿç›¸å…³æ¨¡å‹
    CardKey:
      type: object
      properties:
        id:
          type: integer
          description: å¡å¯†ID
          example: 1
        code:
          type: string
          description: å¡å¯†ä»£ç 
          example: "ALCMS-1A2B-3C4D-5E6F"
        type:
          type: string
          enum: [vip, points]
          description: å¡å¯†ç±»å‹
          example: "vip"
        vipLevel:
          type: integer
          nullable: true
          description: VIPç­‰çº§ï¼ˆVIPç±»å‹å¡å¯†ï¼‰
          example: 1
        vipDays:
          type: integer
          nullable: true
          description: VIPå¤©æ•°ï¼ˆVIPç±»å‹å¡å¯†ï¼‰
          example: 30
        points:
          type: integer
          nullable: true
          description: ç§¯åˆ†æ•°é‡ï¼ˆç§¯åˆ†ç±»å‹å¡å¯†ï¼‰
          example: 1000
        status:
          type: string
          enum: [unused, used, expired, disabled]
          description: å¡å¯†çŠ¶æ€
          example: "unused"
        batchId:
          type: string
          description: æ‰¹æ¬¡ID
          example: "batch_20240101_001"
        createdBy:
          type: integer
          description: åˆ›å»ºè€…ç”¨æˆ·ID
          example: 1
        createdByUsername:
          type: string
          description: åˆ›å»ºè€…ç”¨æˆ·å
          example: "admin"
        usedBy:
          type: integer
          nullable: true
          description: ä½¿ç”¨è€…ç”¨æˆ·ID
        usedByUsername:
          type: string
          nullable: true
          description: ä½¿ç”¨è€…ç”¨æˆ·å
        usedAt:
          type: string
          format: date-time
          nullable: true
          description: ä½¿ç”¨æ—¶é—´
        expireAt:
          type: string
          format: date-time
          nullable: true
          description: è¿‡æœŸæ—¶é—´
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    GenerateCardKeyRequest:
      type: object
      properties:
        type:
          type: string
          enum: [vip, points]
          description: å¡å¯†ç±»å‹
          example: "vip"
          default: "vip"
        vipLevel:
          type: integer
          description: VIPç­‰çº§ï¼ˆVIPç±»å‹æ—¶å¿…å¡«ï¼‰
          example: 1
          default: 1
        vipDays:
          type: integer
          description: VIPå¤©æ•°ï¼ˆVIPç±»å‹æ—¶ä½¿ç”¨ï¼‰
          example: 30
          default: 30
        points:
          type: integer
          description: ç§¯åˆ†æ•°é‡ï¼ˆç§¯åˆ†ç±»å‹æ—¶å¿…å¡«ï¼‰
          example: 1000
          default: 0
        expireAt:
          type: string
          format: date-time
          description: å¡å¯†è¿‡æœŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰

    BatchGenerateCardKeyRequest:
      allOf:
        - $ref: '#/components/schemas/GenerateCardKeyRequest'
        - type: object
          required:
            - count
          properties:
            count:
              type: integer
              description: ç”Ÿæˆæ•°é‡ï¼ˆ1-1000ï¼‰
              example: 10
              minimum: 1
              maximum: 1000

    RedeemCardKeyRequest:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          description: å¡å¯†ä»£ç 
          example: "ALCMS-1A2B-3C4D-5E6F"

    CardKeyStatistics:
      type: object
      properties:
        total:
          type: integer
          description: æ€»æ•°é‡
          example: 100
        unused:
          type: integer
          description: æœªä½¿ç”¨æ•°é‡
          example: 80
        used:
          type: integer
          description: å·²ä½¿ç”¨æ•°é‡
          example: 15
        expired:
          type: integer
          description: å·²è¿‡æœŸæ•°é‡
          example: 3
        disabled:
          type: integer
          description: å·²ç¦ç”¨æ•°é‡
          example: 2
        by_type:
          type: object
          properties:
            vip:
              type: integer
              example: 70
            points:
              type: integer
              example: 30

    CardKeyBatch:
      type: object
      properties:
        batchId:
          type: string
          description: æ‰¹æ¬¡ID
          example: "batch_20240101_001"
        type:
          type: string
          description: å¡å¯†ç±»å‹
          example: "vip"
        count:
          type: integer
          description: ç”Ÿæˆæ•°é‡
          example: 50
        createdByUsername:
          type: string
          description: åˆ›å»ºè€…ç”¨æˆ·å
          example: "admin"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    # ç§¯åˆ†ç³»ç»Ÿç›¸å…³æ¨¡å‹
    UserPoints:
      type: object
      properties:
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "testuser"
        currentPoints:
          type: integer
          description: å½“å‰ç§¯åˆ†
          example: 1500
        totalEarned:
          type: integer
          description: ç´¯è®¡è·å¾—ç§¯åˆ†
          example: 5000
        totalSpent:
          type: integer
          description: ç´¯è®¡æ¶ˆè´¹ç§¯åˆ†
          example: 3500
        last_activity_at:
          type: string
          format: date-time
          nullable: true
          description: æœ€åæ´»åŠ¨æ—¶é—´
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    PointsRecord:
      type: object
      properties:
        id:
          type: integer
          description: è®°å½•ID
          example: 1
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        type:
          type: string
          enum: [earn, spend, transfer_in, transfer_out, admin_adjust]
          description: ç§¯åˆ†å˜åŠ¨ç±»å‹
          example: "earn"
        amount:
          type: integer
          description: ç§¯åˆ†æ•°é‡ï¼ˆæ­£æ•°ä¸ºå¢åŠ ï¼Œè´Ÿæ•°ä¸ºå‡å°‘ï¼‰
          example: 100
        balance_before:
          type: integer
          description: å˜åŠ¨å‰ä½™é¢
          example: 1400
        balance_after:
          type: integer
          description: å˜åŠ¨åä½™é¢
          example: 1500
        source:
          type: string
          description: ç§¯åˆ†æ¥æº
          example: "daily_checkin"
        description:
          type: string
          description: å˜åŠ¨æè¿°
          example: "æ¯æ—¥ç­¾åˆ°å¥–åŠ±"
        related_user_id:
          type: integer
          nullable: true
          description: å…³è”ç”¨æˆ·IDï¼ˆè½¬è´¦æ—¶ä½¿ç”¨ï¼‰
        admin_id:
          type: integer
          nullable: true
          description: ç®¡ç†å‘˜IDï¼ˆç®¡ç†å‘˜è°ƒæ•´æ—¶ä½¿ç”¨ï¼‰
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    AdjustPointsRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: integer
          description: è°ƒæ•´ç§¯åˆ†æ•°é‡ï¼ˆæ­£æ•°å¢åŠ ï¼Œè´Ÿæ•°å‡å°‘ï¼‰
          example: 100
        description:
          type: string
          description: è°ƒæ•´åŸå› æè¿°
          example: "æ´»åŠ¨å¥–åŠ±"

    TransferPointsRequest:
      type: object
      required:
        - to_user_id
        - amount
      properties:
        to_user_id:
          type: integer
          description: æ¥æ”¶ç”¨æˆ·ID
          example: 2
        amount:
          type: integer
          description: è½¬è´¦ç§¯åˆ†æ•°é‡
          example: 100
          minimum: 1
          maximum: 10000
        description:
          type: string
          description: è½¬è´¦å¤‡æ³¨
          example: "æ„Ÿè°¢å¸®åŠ©"

    BatchGrantPointsRequest:
      type: object
      required:
        - user_ids
        - amount
      properties:
        user_ids:
          type: array
          items:
            type: integer
          description: ç”¨æˆ·IDåˆ—è¡¨
          example: [1, 2, 3, 4, 5]
          maxItems: 1000
        amount:
          type: integer
          description: å‘æ”¾ç§¯åˆ†æ•°é‡
          example: 100
          minimum: 1
        description:
          type: string
          description: å‘æ”¾åŸå› æè¿°
          example: "æ–°å¹´æ´»åŠ¨å¥–åŠ±"

    PointsLeaderboard:
      type: object
      properties:
        rank:
          type: integer
          description: æ’å
          example: 1
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "topuser"
        nickname:
          type: string
          description: ç”¨æˆ·æ˜µç§°
          example: "ç§¯åˆ†è¾¾äºº"
        points:
          type: integer
          description: ç§¯åˆ†æ•°é‡
          example: 5000
        rank_change:
          type: integer
          description: æ’åå˜åŒ–ï¼ˆä¸ä¸Šæ¬¡ç›¸æ¯”ï¼‰
          example: 2

    PointsStatistics:
      type: object
      properties:
        total_users:
          type: integer
          description: æ€»ç”¨æˆ·æ•°
          example: 1000
        active_users:
          type: integer
          description: æ´»è·ƒç”¨æˆ·æ•°
          example: 800
        total_points_issued:
          type: integer
          description: ç´¯è®¡å‘æ”¾ç§¯åˆ†
          example: 1000000
        total_points_spent:
          type: integer
          description: ç´¯è®¡æ¶ˆè´¹ç§¯åˆ†
          example: 600000
        avg_points_per_user:
          type: number
          format: float
          description: äººå‡ç§¯åˆ†
          example: 750.5
        top_earners:
          type: array
          items:
            $ref: '#/components/schemas/PointsLeaderboard'
          description: ç§¯åˆ†æ¦œå‰10å

    # ç­¾åˆ°ç³»ç»Ÿç›¸å…³æ¨¡å‹
    CheckinRecord:
      type: object
      properties:
        id:
          type: integer
          description: ç­¾åˆ°è®°å½•ID
          example: 1
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        checkinDate:
          type: string
          format: date
          description: ç­¾åˆ°æ—¥æœŸ
          example: "2024-01-01"
        consecutive_days:
          type: integer
          description: è¿ç»­ç­¾åˆ°å¤©æ•°
          example: 7
        points_earned:
          type: integer
          description: è·å¾—ç§¯åˆ†
          example: 20
        bonus_points:
          type: integer
          description: å¥–åŠ±ç§¯åˆ†
          example: 30
        total_points:
          type: integer
          description: æ€»è®¡ç§¯åˆ†
          example: 50
        is_makeup:
          type: boolean
          description: æ˜¯å¦ä¸ºè¡¥ç­¾
          example: false
        makeup_by:
          type: integer
          nullable: true
          description: è¡¥ç­¾æ“ä½œè€…ID
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CheckinStatus:
      type: object
      properties:
        checked_in_today:
          type: boolean
          description: ä»Šæ—¥æ˜¯å¦å·²ç­¾åˆ°
          example: true
        today_checkin:
          $ref: '#/components/schemas/CheckinRecord'
        stats:
          $ref: '#/components/schemas/CheckinStats'
        config:
          type: object
          properties:
            daily_points:
              type: integer
              description: æ¯æ—¥åŸºç¡€ç§¯åˆ†
              example: 10
            consecutive_bonus:
              type: object
              description: è¿ç»­ç­¾åˆ°å¥–åŠ±é…ç½®
              example:
                "7": 50
                "30": 200

    CheckinStats:
      type: object
      properties:
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        totalCheckins:
          type: integer
          description: æ€»ç­¾åˆ°æ¬¡æ•°
          example: 150
        consecutive_days:
          type: integer
          description: å½“å‰è¿ç»­ç­¾åˆ°å¤©æ•°
          example: 7
        max_consecutive_days:
          type: integer
          description: æœ€é•¿è¿ç»­ç­¾åˆ°å¤©æ•°
          example: 30
        current_month_checkins:
          type: integer
          description: æœ¬æœˆç­¾åˆ°æ¬¡æ•°
          example: 15
        total_points_earned:
          type: integer
          description: ç­¾åˆ°ç´¯è®¡è·å¾—ç§¯åˆ†
          example: 3500
        last_checkin_date:
          type: string
          format: date
          nullable: true
          description: æœ€åç­¾åˆ°æ—¥æœŸ
          example: "2024-01-01"
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    CheckinConfig:
      type: object
      properties:
        id:
          type: integer
          description: é…ç½®ID
          example: 1
        name:
          type: string
          description: é…ç½®åç§°
          example: "é»˜è®¤ç­¾åˆ°é…ç½®"
        description:
          type: string
          description: é…ç½®æè¿°
          example: "æ¯æ—¥ç­¾åˆ°åŸºç¡€ç§¯åˆ†10ï¼Œè¿ç»­ç­¾åˆ°æœ‰é¢å¤–å¥–åŠ±"
        daily_points:
          type: integer
          description: æ¯æ—¥åŸºç¡€ç§¯åˆ†
          example: 10
        consecutive_bonus:
          type: object
          description: è¿ç»­ç­¾åˆ°å¥–åŠ±é…ç½®
          example:
            "7": 50
            "30": 200
            "100": 1000
        monthly_reset:
          type: boolean
          description: æ˜¯å¦æœˆåº¦é‡ç½®è¿ç»­å¤©æ•°
          example: true
        isActive:
          type: boolean
          description: æ˜¯å¦æ¿€æ´»
          example: true
        createdBy:
          type: integer
          description: åˆ›å»ºè€…ID
          example: 1
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    CreateCheckinConfigRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: é…ç½®åç§°
          example: "æ–°å¹´ç­¾åˆ°æ´»åŠ¨"
        description:
          type: string
          description: é…ç½®æè¿°
          example: "æ–°å¹´æœŸé—´ç­¾åˆ°è·å¾—åŒå€ç§¯åˆ†"
        daily_points:
          type: integer
          description: æ¯æ—¥åŸºç¡€ç§¯åˆ†
          example: 20
          default: 10
        consecutive_bonus:
          type: object
          description: è¿ç»­ç­¾åˆ°å¥–åŠ±é…ç½®
          example:
            "7": 100
            "30": 500
          default: {}
        monthly_reset:
          type: boolean
          description: æ˜¯å¦æœˆåº¦é‡ç½®è¿ç»­å¤©æ•°
          example: false
          default: true

    MakeupCheckinRequest:
      type: object
      required:
        - date
      properties:
        date:
          type: string
          format: date
          description: è¡¥ç­¾æ—¥æœŸï¼ˆYYYY-MM-DDæ ¼å¼ï¼‰
          example: "2024-01-01"

    CheckinLeaderboard:
      type: object
      properties:
        rank:
          type: integer
          description: æ’å
          example: 1
        userId:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "checkin_master"
        nickname:
          type: string
          description: ç”¨æˆ·æ˜µç§°
          example: "ç­¾åˆ°è¾¾äºº"
        value:
          type: integer
          description: æ’è¡Œæ•°å€¼ï¼ˆæ ¹æ®ç±»å‹ä¸åŒï¼‰
          example: 365
        rank_change:
          type: integer
          description: æ’åå˜åŒ–
          example: 1

    CheckinStatistics:
      type: object
      properties:
        total_users:
          type: integer
          description: æ€»ç”¨æˆ·æ•°
          example: 1000
        today_checkins:
          type: integer
          description: ä»Šæ—¥ç­¾åˆ°ç”¨æˆ·æ•°
          example: 650
        avg_consecutive_days:
          type: number
          format: float
          description: å¹³å‡è¿ç»­ç­¾åˆ°å¤©æ•°
          example: 8.5
        total_points_distributed:
          type: integer
          description: ç´¯è®¡å‘æ”¾ç§¯åˆ†
          example: 500000
        monthly_stats:
          type: array
          items:
            type: object
            properties:
              month:
                type: string
                example: "2024-01"
              checkin_count:
                type: integer
                example: 15000
              unique_users:
                type: integer
                example: 800

  responses:
    UnauthorizedError:
      description: æœªæˆæƒè®¿é—®
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "è®¿é—®ä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ"
            timestamp: "2024-01-01T00:00:00.000Z"

    ForbiddenError:
      description: æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "æƒé™ä¸è¶³ï¼Œæ— æ³•æ‰§è¡Œæ­¤æ“ä½œ"
            timestamp: "2024-01-01T00:00:00.000Z"

    NotFoundError:
      description: èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨"
            timestamp: "2024-01-01T00:00:00.000Z"

    BadRequestError:
      description: è¯·æ±‚å‚æ•°é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥"
            timestamp: "2024-01-01T00:00:00.000Z"

    InternalServerError:
      description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"
            timestamp: "2024-01-01T00:00:00.000Z"

paths:
  # è®¤è¯ç›¸å…³æ¥å£
  /auth/login:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å½•
      description: ä½¿ç”¨é‚®ç®±å’Œå¯†ç ç™»å½•ç³»ç»Ÿ
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          description: ç™»å½•å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "é‚®ç®±æˆ–å¯†ç é”™è¯¯"
                timestamp: "2024-01-01T00:00:00.000Z"

  /auth/register:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·æ³¨å†Œ
      description: æ³¨å†Œæ–°ç”¨æˆ·è´¦æˆ·
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: æ³¨å†ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '409':
          description: ç”¨æˆ·å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "é‚®ç®±æˆ–ç”¨æˆ·åå·²è¢«ä½¿ç”¨"
                timestamp: "2024-01-01T00:00:00.000Z"

  /auth/profile:
    get:
      tags:
        - Authentication
      summary: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
      description: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€è§’è‰²å’Œæƒé™
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å‡º
      description: ç™»å‡ºå½“å‰ç”¨æˆ·å¹¶ä½¿ä»¤ç‰Œå¤±æ•ˆ
      security:
        - BearerAuth: []
      responses:
        '200':
          description: ç™»å‡ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /auth/refresh:
    post:
      tags:
        - Authentication
      summary: åˆ·æ–°è®¿é—®ä»¤ç‰Œ
      description: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: ä»¤ç‰Œåˆ·æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RefreshTokenResponse'
        '400':
          description: ç¼ºå°‘åˆ·æ–°ä»¤ç‰Œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æ— æ•ˆçš„åˆ·æ–°ä»¤ç‰Œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
  /users:
    get:
      tags: [Users]
      summary: è·å–ç”¨æˆ·åˆ—è¡¨
      description: è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€æœç´¢å’ŒçŠ¶æ€è¿‡æ»¤ï¼ˆéœ€è¦user:listæƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          description: é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡ï¼ˆ1-100ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 20
        - name: search
          in: query
          description: æœç´¢å…³é”®è¯ï¼ˆå¯æœç´¢ç”¨æˆ·åã€é‚®ç®±ã€æ˜µç§°ï¼‰
          required: false
          schema:
            type: string
            maxLength: 100
            example: "admin"
        - name: status
          in: query
          description: æŒ‰ç”¨æˆ·çŠ¶æ€è¿‡æ»¤
          required: false
          schema:
            type: string
            enum: [normal, banned, frozen]
            example: "normal"
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags: [Users]
      summary: åˆ›å»ºç”¨æˆ·ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜åˆ›å»ºæ–°ç”¨æˆ·ï¼Œå¯æŒ‡å®šåˆå§‹è§’è‰²å’ŒçŠ¶æ€
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        '201':
          description: ç”¨æˆ·åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
                          roles:
                            type: array
                            items:
                              $ref: '#/components/schemas/Role'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥æˆ–å¯†ç å¼ºåº¦ä¸è¶³
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '409':
          description: ç”¨æˆ·åæˆ–é‚®ç®±å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /users/stats:
    get:
      tags: [Users]
      summary: è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
      description: è·å–ç”¨æˆ·æ€»æ•°ã€çŠ¶æ€åˆ†å¸ƒã€è§’è‰²ç»Ÿè®¡ç­‰ä¿¡æ¯ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserStatsResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /users/profile:
    put:
      tags: [Users]
      summary: æ›´æ–°ç”¨æˆ·èµ„æ–™
      description: æ›´æ–°å½“å‰ç”¨æˆ·çš„ä¸ªäººèµ„æ–™ï¼ˆæ˜µç§°ã€å¤´åƒã€ä¸ªäººç®€ä»‹ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /users/{userId}:
    get:
      tags: [Users]
      summary: è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯
      description: è·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼ˆç”¨æˆ·æœ¬äººæˆ–ç®¡ç†å‘˜å¯è®¿é—®ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          description: ç”¨æˆ·ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 123
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfileResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: æ— æƒè®¿é—®è¯¥ç”¨æˆ·ä¿¡æ¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags: [Users]
      summary: åˆ é™¤ç”¨æˆ·ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜åˆ é™¤æŒ‡å®šç”¨æˆ·ï¼ˆä¸èƒ½åˆ é™¤è‡ªå·±ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          description: è¦åˆ é™¤çš„ç”¨æˆ·ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 123
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          deletedUser:
                            type: object
                            properties:
                              id:
                                type: integer
                              username:
                                type: string
                              email:
                                type: string
                              nickname:
                                type: string
        '400':
          description: ä¸èƒ½åˆ é™¤è‡ªå·±çš„è´¦æˆ·
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /users/{userId}/status:
    put:
      tags: [Users]
      summary: æ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜æ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆå°ç¦/å†»ç»“/è§£é™¤ï¼‰ï¼Œéœ€è¦user:banæƒé™
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          description: ç”¨æˆ·ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 123
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserStatusRequest'
      responses:
        '200':
          description: çŠ¶æ€æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥æˆ–ä¸èƒ½ä¿®æ”¹è‡ªå·±çš„çŠ¶æ€
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /users/{userId}/freeze:
    patch:
      tags: [Users]
      summary: å†»ç»“/è§£å†»ç”¨æˆ·ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜å†»ç»“æˆ–è§£å†»ç”¨æˆ·è´¦æˆ·ï¼ˆä¸èƒ½æ“ä½œè‡ªå·±ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          description: ç”¨æˆ·ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 123
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FreezeUserRequest'
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
                          action:
                            type: string
                            description: æ“ä½œç±»å‹
                            enum: [å†»ç»“, è§£å†»]
                          reason:
                            type: string
                            nullable: true
                            description: æ“ä½œåŸå› 
        '400':
          description: ä¸èƒ½å†»ç»“è‡ªå·±çš„è´¦æˆ·
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /users/{userId}/roles:
    post:
      tags: [Users]
      summary: åˆ†é…ç”¨æˆ·è§’è‰²ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜ä¸ºæŒ‡å®šç”¨æˆ·åˆ†é…è§’è‰²ï¼Œéœ€è¦role:assignæƒé™
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          description: ç”¨æˆ·ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 123
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignRoleRequest'
      responses:
        '200':
          description: è§’è‰²åˆ†é…æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            type: object
                            properties:
                              id:
                                type: integer
                              username:
                                type: string
                              email:
                                type: string
                          roles:
                            type: array
                            items:
                              $ref: '#/components/schemas/Role'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: ç”¨æˆ·æˆ–è§’è‰²ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags: [Users]
      summary: ç§»é™¤ç”¨æˆ·è§’è‰²ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜ç§»é™¤æŒ‡å®šç”¨æˆ·çš„è§’è‰²ï¼Œéœ€è¦role:assignæƒé™
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          description: ç”¨æˆ·ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 123
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignRoleRequest'
      responses:
        '200':
          description: è§’è‰²ç§»é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          user:
                            type: object
                            properties:
                              id:
                                type: integer
                              username:
                                type: string
                              email:
                                type: string
                          roles:
                            type: array
                            items:
                              $ref: '#/components/schemas/Role'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'



  # èµ„æºç®¡ç†ç³»ç»Ÿ
  /resources:
    get:
      tags: [Resources]
      summary: è·å–èµ„æºåˆ—è¡¨
      description: è·å–èµ„æºåˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€æœç´¢ã€åˆ†ç±»è¿‡æ»¤ç­‰ï¼ˆéœ€è¦ç™»å½•ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          description: é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡ï¼ˆ1-50ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
            example: 20
        - name: search
          in: query
          description: æœç´¢å…³é”®è¯ï¼ˆæœç´¢æ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾ï¼‰
          required: false
          schema:
            type: string
            maxLength: 100
            example: "å‰ç«¯å¼€å‘"
        - name: category_id
          in: query
          description: åˆ†ç±»IDè¿‡æ»¤
          required: false
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: status
          in: query
          description: èµ„æºçŠ¶æ€è¿‡æ»¤ï¼ˆä»…ç®¡ç†å‘˜å¯ç”¨ï¼‰
          required: false
          schema:
            type: string
            enum: [draft, reviewing, published, archived]
            example: "published"
        - name: author_id
          in: query
          description: ä½œè€…IDè¿‡æ»¤
          required: false
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: sort
          in: query
          description: æ’åºæ–¹å¼
          required: false
          schema:
            type: string
            enum: [created_desc, created_asc, updated_desc, view_count_desc, download_count_desc]
            default: created_desc
            example: "view_count_desc"
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags: [Resources]
      summary: åˆ›å»ºèµ„æº
      description: åˆ›å»ºæ–°çš„èµ„æºï¼Œéœ€è¦resource:createæƒé™
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateResourceRequest'
      responses:
        '201':
          description: èµ„æºåˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceDetailResponse'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /resources/search/query:
    get:
      tags: [Resources]
      summary: æœç´¢èµ„æº
      description: å…¨æ–‡æœç´¢èµ„æºï¼Œæ”¯æŒæ ‡é¢˜ã€æè¿°ã€å†…å®¹ã€æ ‡ç­¾æœç´¢
      parameters:
        - name: q
          in: query
          description: æœç´¢å…³é”®è¯
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 100
            example: "JavaScript æ•™ç¨‹"
        - name: page
          in: query
          description: é¡µç 
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
        - name: category_id
          in: query
          description: é™å®šåˆ†ç±»èŒƒå›´
          required: false
          schema:
            type: integer
            minimum: 1
      responses:
        '200':
          description: æœç´¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /resources/stats/overview:
    get:
      tags: [Resources]
      summary: è·å–èµ„æºç»Ÿè®¡ä¿¡æ¯
      description: è·å–å…¬å¼€çš„èµ„æºç»Ÿè®¡æ•°æ®
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceStatsResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /resources/{id}:
    get:
      tags: [Resources]
      summary: è·å–èµ„æºè¯¦æƒ…
      description: è·å–æŒ‡å®šèµ„æºçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒæ—¶å¢åŠ æŸ¥çœ‹æ¬¡æ•°ï¼ˆéœ€è¦è®¤è¯ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceDetailResponse'
        '404':
          description: èµ„æºä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: æ— æƒè®¿é—®ç§æœ‰èµ„æº
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags: [Resources]
      summary: æ›´æ–°èµ„æº
      description: æ›´æ–°èµ„æºä¿¡æ¯ï¼ˆä½œè€…æˆ–ç®¡ç†å‘˜å¯æ“ä½œï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateResourceRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceDetailResponse'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: æ— æƒä¿®æ”¹æ­¤èµ„æº
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: èµ„æºä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags: [Resources]
      summary: åˆ é™¤èµ„æº
      description: åˆ é™¤èµ„æºï¼ˆä½œè€…æˆ–ç®¡ç†å‘˜å¯æ“ä½œï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: æ— æƒåˆ é™¤æ­¤èµ„æº
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: èµ„æºä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /resources/{id}/download:
    post:
      tags: [Resources]
      summary: ä¸‹è½½èµ„æº
      description: é€šè¿‡åŠ å¯†URLä¸‹è½½èµ„æºæ–‡ä»¶ï¼ŒåŒæ—¶å¢åŠ ä¸‹è½½æ¬¡æ•°ï¼ˆéœ€è¦è®¤è¯ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DownloadResourceRequest'
      responses:
        '200':
          description: ä¸‹è½½æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DownloadResourceResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: æ— æƒä¸‹è½½æ­¤èµ„æº
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: èµ„æºä¸å­˜åœ¨æˆ–æ— ä¸‹è½½æ–‡ä»¶
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    get:
      tags: [Resources]
      summary: ä¸‹è½½èµ„æºï¼ˆGETæ–¹å¼ï¼‰
      description: é€šè¿‡URLå‚æ•°ä¸‹è½½èµ„æºæ–‡ä»¶ï¼ˆéœ€è¦è®¤è¯ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: encrypted_url
          in: query
          description: åŠ å¯†çš„ä¸‹è½½URL
          required: true
          schema:
            type: string
            minLength: 1
            description: ç”±ç³»ç»Ÿç”Ÿæˆçš„åŠ å¯†ä¸‹è½½é“¾æ¥
            example: "eyJhbGciOiJIUzI1NiJ9.eyJyZXNvdXJjZUlkIjoxLCJ1cmwiOiJodHRwczovL2V4YW1wbGUuY29tL2ZpbGUuemlwIiwiZXhwIjoxNjQwOTk1MjAwfQ.signature"
      responses:
        '200':
          description: ä¸‹è½½æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DownloadResourceResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: æ— æƒä¸‹è½½æ­¤èµ„æº
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: èµ„æºä¸å­˜åœ¨æˆ–æ— ä¸‹è½½æ–‡ä»¶
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /resources/admin/all:
    get:
      tags: [Resources]
      summary: è·å–æ‰€æœ‰èµ„æºï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜è·å–æ‰€æœ‰çŠ¶æ€çš„èµ„æºï¼ŒåŒ…æ‹¬è‰ç¨¿ã€å®¡æ ¸ä¸­ã€ç§æœ‰èµ„æº
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          description: é¡µç 
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: status
          in: query
          description: çŠ¶æ€è¿‡æ»¤
          required: false
          schema:
            type: string
            enum: [draft, reviewing, published, archived]
        - name: author_id
          in: query
          description: ä½œè€…IDè¿‡æ»¤
          required: false
          schema:
            type: integer
            minimum: 1
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceListResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /resources/admin/batch-update:
    patch:
      tags: [Resources]
      summary: æ‰¹é‡æ›´æ–°èµ„æºï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜æ‰¹é‡æ›´æ–°å¤šä¸ªèµ„æºçš„çŠ¶æ€æˆ–å…¶ä»–å±æ€§
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - resourceIds
                - updateData
              properties:
                resourceIds:
                  type: array
                  items:
                    type: integer
                  minItems: 1
                  maxItems: 50
                  description: è¦æ›´æ–°çš„èµ„æºIDåˆ—è¡¨
                  example: [1, 2, 3, 4, 5]
                updateData:
                  type: object
                  properties:
                    status:
                      type: string
                      enum: [draft, reviewing, published, archived]
                      description: æ–°çŠ¶æ€
                    isPublic:
                      type: boolean
                      description: æ˜¯å¦å…¬å¼€
                    categoryId:
                      type: integer
                      nullable: true
                      description: åˆ†ç±»ID
                  description: è¦æ›´æ–°çš„æ•°æ®
      responses:
        '200':
          description: æ‰¹é‡æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          updated:
                            type: array
                            items:
                              $ref: '#/components/schemas/Resource'
                          errors:
                            type: array
                            items:
                              type: object
                              properties:
                                resourceId:
                                  type: integer
                                error:
                                  type: string
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /resources/admin/stats/detailed:
    get:
      tags: [Resources]
      summary: è·å–è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜è·å–è¯¦ç»†çš„èµ„æºç»Ÿè®¡æ•°æ®ï¼ŒåŒ…æ‹¬æ—¥ç»Ÿè®¡ã€ä½œè€…ç»Ÿè®¡ç­‰
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          dailyStats:
                            type: array
                            items:
                              type: object
                              properties:
                                date:
                                  type: string
                                  format: date
                                resources_created:
                                  type: integer
                                totalViews:
                                  type: integer
                                total_downloads:
                                  type: integer
                            description: æ—¥ç»Ÿè®¡æ•°æ®
                          authorStats:
                            type: array
                            items:
                              type: object
                              properties:
                                username:
                                  type: string
                                nickname:
                                  type: string
                                resourceCount:
                                  type: integer
                                totalViews:
                                  type: integer
                                total_downloads:
                                  type: integer
                            description: ä½œè€…ç»Ÿè®¡æ•°æ®
                          popularResources:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                title:
                                  type: string
                                viewCount:
                                  type: integer
                                downloadCount:
                                  type: integer
                                authorUsername:
                                  type: string
                                categoryName:
                                  type: string
                            description: çƒ­é—¨èµ„æº
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # èµ„æºæ”¶è—ç³»ç»Ÿç›¸å…³æ¥å£
  /favorites/resources/{resourceId}/toggle:
    post:
      tags: [Resources]
      summary: åˆ‡æ¢èµ„æºæ”¶è—çŠ¶æ€
      description: æ”¶è—æˆ–å–æ¶ˆæ”¶è—æŒ‡å®šèµ„æºï¼ˆéœ€è¦ç”¨æˆ·è®¤è¯ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: resourceId
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          isFavorited:
                            type: boolean
                            description: æ˜¯å¦å·²æ”¶è—
                            example: true
                          resourceId:
                            type: integer
                            description: èµ„æºID
                            example: 1
                          action:
                            type: string
                            enum: [favorited, unfavorited]
                            description: æ“ä½œç±»å‹
                            example: "favorited"
                          favoritedAt:
                            type: string
                            format: date-time
                            nullable: true
                            description: æ”¶è—æ—¶é—´ï¼ˆå–æ¶ˆæ”¶è—æ—¶ä¸ºnullï¼‰
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          description: èµ„æºä¸å¯æ”¶è—
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: èµ„æºä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /favorites/resources/{resourceId}/status:
    get:
      tags: [Resources]
      summary: æ£€æŸ¥èµ„æºæ”¶è—çŠ¶æ€
      description: æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ”¶è—äº†æŒ‡å®šèµ„æº
      security:
        - BearerAuth: []
      parameters:
        - name: resourceId
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: æ£€æŸ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          isFavorited:
                            type: boolean
                            description: æ˜¯å¦å·²æ”¶è—
                            example: true
                          resourceId:
                            type: integer
                            description: èµ„æºID
                            example: 1
                          favoritedAt:
                            type: string
                            format: date-time
                            nullable: true
                            description: æ”¶è—æ—¶é—´ï¼ˆæœªæ”¶è—æ—¶ä¸ºnullï¼‰
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /favorites/resources/batch-check:
    post:
      tags: [Resources]
      summary: æ‰¹é‡æ£€æŸ¥èµ„æºæ”¶è—çŠ¶æ€
      description: æ‰¹é‡æ£€æŸ¥å¤šä¸ªèµ„æºçš„æ”¶è—çŠ¶æ€ï¼ˆæœ€å¤š100ä¸ªï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - resourceIds
              properties:
                resourceIds:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  minItems: 1
                  maxItems: 100
                  description: èµ„æºIDåˆ—è¡¨
                  example: [1, 2, 3, 4, 5]
      responses:
        '200':
          description: æ£€æŸ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        additionalProperties:
                          type: boolean
                        description: èµ„æºIDä¸æ”¶è—çŠ¶æ€çš„æ˜ å°„å¯¹è±¡
                        example:
                          "1": true
                          "2": false
                          "3": true
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /favorites/my-favorites:
    get:
      tags: [Resources]
      summary: è·å–æˆ‘çš„æ”¶è—åˆ—è¡¨
      description: è·å–å½“å‰ç”¨æˆ·æ”¶è—çš„èµ„æºåˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€æœç´¢å’Œè¿‡æ»¤
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          description: é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡ï¼ˆ1-50ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
            example: 20
        - name: category
          in: query
          description: åˆ†ç±»IDè¿‡æ»¤
          required: false
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: type
          in: query
          description: èµ„æºç±»å‹IDè¿‡æ»¤
          required: false
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: search
          in: query
          description: æœç´¢å…³é”®è¯ï¼ˆæœç´¢æ ‡é¢˜å’Œæè¿°ï¼‰
          required: false
          schema:
            type: string
            maxLength: 100
            example: "Vue.js"
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FavoriteListResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /favorites/my-stats:
    get:
      tags: [Resources]
      summary: è·å–æˆ‘çš„æ”¶è—ç»Ÿè®¡
      description: è·å–å½“å‰ç”¨æˆ·çš„æ”¶è—ç»Ÿè®¡ä¿¡æ¯
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          total_favorites:
                            type: integer
                            description: æ”¶è—æ€»æ•°
                            example: 25
                          paid_favorites:
                            type: integer
                            description: ä»˜è´¹èµ„æºæ”¶è—æ•°
                            example: 8
                          vip_favorites:
                            type: integer
                            description: VIPèµ„æºæ”¶è—æ•°
                            example: 12
                          categorized_favorites:
                            type: integer
                            description: å·²åˆ†ç±»èµ„æºæ”¶è—æ•°
                            example: 20
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /favorites/resources/{resourceId}/stats:
    get:
      tags: [Resources]
      summary: è·å–èµ„æºæ”¶è—ç»Ÿè®¡
      description: è·å–æŒ‡å®šèµ„æºçš„æ”¶è—ç»Ÿè®¡ä¿¡æ¯ï¼ˆå…¬å¼€æ¥å£ï¼‰
      parameters:
        - name: resourceId
          in: path
          description: èµ„æºID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          resourceId:
                            type: integer
                            description: èµ„æºID
                            example: 1
                          resource_title:
                            type: string
                            description: èµ„æºæ ‡é¢˜
                            example: "Vue 3 å®Œæ•´æ•™ç¨‹"
                          favoriteCount:
                            type: integer
                            description: æ”¶è—æ€»æ•°
                            example: 128
                          recentFavorites:
                            type: integer
                            description: è¿‘ä¸ƒå¤©æ”¶è—æ•°
                            example: 15
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: èµ„æºä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /favorites/batch-remove:
    delete:
      tags: [Resources]
      summary: æ‰¹é‡å–æ¶ˆæ”¶è—
      description: æ‰¹é‡å–æ¶ˆæ”¶è—å¤šä¸ªèµ„æºï¼ˆæœ€å¤š50ä¸ªï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - resourceIds
              properties:
                resourceIds:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  minItems: 1
                  maxItems: 50
                  description: è¦å–æ¶ˆæ”¶è—çš„èµ„æºIDåˆ—è¡¨
                  example: [1, 2, 3]
      responses:
        '200':
          description: æ‰¹é‡æ“ä½œå®Œæˆ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          results:
                            type: array
                            items:
                              type: object
                              properties:
                                resourceId:
                                  type: integer
                                  description: èµ„æºID
                                success:
                                  type: boolean
                                  description: æ˜¯å¦æˆåŠŸ
                                action:
                                  type: string
                                  description: æ“ä½œç±»å‹
                                  example: "unfavorited"
                                message:
                                  type: string
                                  description: é”™è¯¯ä¿¡æ¯ï¼ˆå¤±è´¥æ—¶ï¼‰
                            description: æ“ä½œç»“æœåˆ—è¡¨
                          errors:
                            type: array
                            items:
                              type: object
                              properties:
                                resourceId:
                                  type: integer
                                error:
                                  type: string
                            description: é”™è¯¯åˆ—è¡¨ï¼ˆå¦‚æœæœ‰ï¼‰
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /favorites/admin/popular:
    get:
      tags: [Resources]
      summary: è·å–çƒ­é—¨æ”¶è—èµ„æºï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜è·å–æŒ‡å®šæ—¶é—´æ®µå†…çš„çƒ­é—¨æ”¶è—èµ„æºç»Ÿè®¡
      security:
        - BearerAuth: []
      parameters:
        - name: limit
          in: query
          description: è¿”å›æ•°é‡é™åˆ¶
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 20
        - name: days
          in: query
          description: ç»Ÿè®¡æ—¶é—´æ®µï¼ˆå¤©æ•°ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 365
            default: 30
            example: 30
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          period_days:
                            type: integer
                            description: ç»Ÿè®¡æ—¶é—´æ®µï¼ˆå¤©ï¼‰
                            example: 30
                          resources:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                  description: èµ„æºID
                                title:
                                  type: string
                                  description: èµ„æºæ ‡é¢˜
                                coverImageUrl:
                                  type: string
                                  description: å°é¢å›¾ç‰‡URL
                                favoriteCount:
                                  type: integer
                                  description: æ”¶è—æ•°é‡
                                viewCount:
                                  type: integer
                                  description: æŸ¥çœ‹æ•°é‡
                                downloadCount:
                                  type: integer
                                  description: ä¸‹è½½æ•°é‡
                                authorUsername:
                                  type: string
                                  description: ä½œè€…ç”¨æˆ·å
                                categoryName:
                                  type: string
                                  description: åˆ†ç±»åç§°
                            description: çƒ­é—¨æ”¶è—èµ„æºåˆ—è¡¨
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # VIPç³»ç»Ÿç›¸å…³æ¥å£
  /vip/levels:
    get:
      tags: [VIP System]
      summary: è·å–æ‰€æœ‰VIPç­‰çº§é…ç½®
      responses: { '200': { description: è·å–æˆåŠŸ } }
    post:
      tags: [VIP System]
      summary: åˆ›å»ºVIPç­‰çº§é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/CreateVIPLevelRequest' }
      responses: { '201': { description: åˆ›å»ºæˆåŠŸ } }
  /vip/levels/{level}:
    get:
      tags: [VIP System]
      summary: è·å–æŒ‡å®šVIPç­‰çº§é…ç½®
      parameters: [{ name: level, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
    put:
      tags: [VIP System]
      summary: æ›´æ–°VIPç­‰çº§é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: level, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: æ›´æ–°æˆåŠŸ } }
    delete:
      tags: [VIP System]
      summary: åˆ é™¤VIPç­‰çº§é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: level, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: åˆ é™¤æˆåŠŸ } }
  /vip/my-info:
    get:
      tags: [VIP System]
      summary: è·å–å½“å‰ç”¨æˆ·VIPä¿¡æ¯
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /vip/my-orders:
    get:
      tags: [VIP System]
      summary: è·å–å½“å‰ç”¨æˆ·è®¢å•å†å²
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /vip/orders/{orderId}:
    get:
      tags: [VIP System]
      summary: è·å–è®¢å•è¯¦æƒ…
      security: [{ BearerAuth: [] }]
      parameters: [{ name: orderId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /vip/users/{userId}/info:
    get:
      tags: [VIP System]
      summary: è·å–ç”¨æˆ·VIPä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /vip/users/{userId}/set:
    post:
      tags: [VIP System]
      summary: è®¾ç½®ç”¨æˆ·VIPï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/SetUserVIPRequest' }
      responses: { '200': { description: è®¾ç½®æˆåŠŸ } }
  /vip/users/{userId}/extend:
    post:
      tags: [VIP System]
      summary: å»¶é•¿ç”¨æˆ·VIPæ—¶é—´ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/ExtendUserVIPRequest' }
      responses: { '200': { description: å»¶é•¿æˆåŠŸ } }
  /vip/users/{userId}/cancel:
    delete:
      tags: [VIP System]
      summary: å–æ¶ˆç”¨æˆ·VIPï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: å–æ¶ˆæˆåŠŸ } }
  /vip/system/update-expired:
    post:
      tags: [VIP System]
      summary: æ›´æ–°è¿‡æœŸVIPç”¨æˆ·ï¼ˆç³»ç»Ÿä»»åŠ¡ï¼‰
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: æ›´æ–°æˆåŠŸ } }

  # å¡å¯†ç³»ç»Ÿç›¸å…³æ¥å£
  /card-keys/redeem:
    post:
      tags: [Card Key System]
      summary: å…‘æ¢å¡å¯†
      security: [{ BearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/RedeemCardKeyRequest' }
      responses: { '200': { description: å…‘æ¢æˆåŠŸ } }
  /card-keys/info/{code}:
    get:
      tags: [Card Key System]
      summary: æŸ¥è¯¢å¡å¯†ä¿¡æ¯
      security: [{ BearerAuth: [] }]
      parameters: [{ name: code, in: path, required: true, schema: { type: string } }]
      responses: { '200': { description: æŸ¥è¯¢æˆåŠŸ } }
  /card-keys/generate/single:
    post:
      tags: [Card Key System]
      summary: ç”Ÿæˆå•ä¸ªå¡å¯†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/GenerateCardKeyRequest' }
      responses: { '201': { description: ç”ŸæˆæˆåŠŸ } }
  /card-keys/generate/batch:
    post:
      tags: [Card Key System]
      summary: æ‰¹é‡ç”Ÿæˆå¡å¯†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/BatchGenerateCardKeyRequest' }
      responses: { '201': { description: æ‰¹é‡ç”ŸæˆæˆåŠŸ } }
  /card-keys/list:
    get:
      tags: [Card Key System]
      summary: è·å–å¡å¯†åˆ—è¡¨ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /card-keys/statistics:
    get:
      tags: [Card Key System]
      summary: è·å–å¡å¯†ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /card-keys/batches:
    get:
      tags: [Card Key System]
      summary: è·å–æ‰¹æ¬¡åˆ—è¡¨ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /card-keys/batches/{batchId}:
    get:
      tags: [Card Key System]
      summary: è·å–æ‰¹æ¬¡è¯¦æƒ…ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: batchId, in: path, required: true, schema: { type: string } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
    delete:
      tags: [Card Key System]
      summary: åˆ é™¤æ•´ä¸ªæ‰¹æ¬¡ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: batchId, in: path, required: true, schema: { type: string } }]
      responses: { '200': { description: åˆ é™¤æˆåŠŸ } }
  /card-keys/{cardId}/status:
    put:
      tags: [Card Key System]
      summary: æ›´æ–°å¡å¯†çŠ¶æ€ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: cardId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: æ›´æ–°æˆåŠŸ } }
  /card-keys/{cardId}:
    delete:
      tags: [Card Key System]
      summary: åˆ é™¤å¡å¯†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: cardId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: åˆ é™¤æˆåŠŸ } }

  # ç§¯åˆ†ç³»ç»Ÿç›¸å…³æ¥å£
  /points/my-info:
    get:
      tags: [Points System]
      summary: è·å–å½“å‰ç”¨æˆ·ç§¯åˆ†ä¿¡æ¯
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /points/my-records:
    get:
      tags: [Points System]
      summary: è·å–å½“å‰ç”¨æˆ·ç§¯åˆ†è®°å½•
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /points/my-rank:
    get:
      tags: [Points System]
      summary: è·å–å½“å‰ç”¨æˆ·ç§¯åˆ†æ’å
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /points/transfer:
    post:
      tags: [Points System]
      summary: ç§¯åˆ†è½¬è´¦
      security: [{ BearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/TransferPointsRequest' }
      responses: { '200': { description: è½¬è´¦æˆåŠŸ } }
  /points/leaderboard:
    get:
      tags: [Points System]
      summary: è·å–ç§¯åˆ†æ’è¡Œæ¦œ
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /points/users/{userId}/info:
    get:
      tags: [Points System]
      summary: è·å–ç”¨æˆ·ç§¯åˆ†ä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /points/users/{userId}/records:
    get:
      tags: [Points System]
      summary: è·å–ç”¨æˆ·ç§¯åˆ†è®°å½•ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /points/users/{userId}/adjust:
    post:
      tags: [Points System]
      summary: è°ƒæ•´ç”¨æˆ·ç§¯åˆ†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/AdjustPointsRequest' }
      responses: { '200': { description: è°ƒæ•´æˆåŠŸ } }
  /points/batch/grant:
    post:
      tags: [Points System]
      summary: æ‰¹é‡å‘æ”¾ç§¯åˆ†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/BatchGrantPointsRequest' }
      responses: { '200': { description: æ‰¹é‡å‘æ”¾å®Œæˆ } }
  /points/statistics:
    get:
      tags: [Points System]
      summary: è·å–ç§¯åˆ†ç»Ÿè®¡ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }

  # ç­¾åˆ°ç³»ç»Ÿç›¸å…³æ¥å£
  /checkin/check:
    post:
      tags: [Checkin System]
      summary: æ‰§è¡Œç­¾åˆ°
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: ç­¾åˆ°æˆåŠŸ } }
  /checkin/my-status:
    get:
      tags: [Checkin System]
      summary: è·å–å½“å‰ç”¨æˆ·ç­¾åˆ°çŠ¶æ€
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /checkin/my-history:
    get:
      tags: [Checkin System]
      summary: è·å–å½“å‰ç”¨æˆ·ç­¾åˆ°å†å²
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /checkin/leaderboard:
    get:
      tags: [Checkin System]
      summary: è·å–ç­¾åˆ°æ’è¡Œæ¦œ
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /checkin/configs:
    get:
      tags: [Checkin System]
      summary: è·å–æ‰€æœ‰ç­¾åˆ°é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
    post:
      tags: [Checkin System]
      summary: åˆ›å»ºç­¾åˆ°é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/CreateCheckinConfigRequest' }
      responses: { '201': { description: åˆ›å»ºæˆåŠŸ } }
  /checkin/configs/{configId}:
    put:
      tags: [Checkin System]
      summary: æ›´æ–°ç­¾åˆ°é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: configId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: æ›´æ–°æˆåŠŸ } }
  /checkin/users/{userId}/info:
    get:
      tags: [Checkin System]
      summary: è·å–ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /checkin/users/{userId}/history:
    get:
      tags: [Checkin System]
      summary: è·å–ç”¨æˆ·ç­¾åˆ°å†å²ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: è·å–æˆåŠŸ } }
  /checkin/users/{userId}/makeup:
    post:
      tags: [Checkin System]
      summary: è¡¥ç­¾åŠŸèƒ½ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/MakeupCheckinRequest' }
      responses: { '200': { description: è¡¥ç­¾æˆåŠŸ } }
  /checkin/users/{userId}/reset:
    delete:
      tags: [Checkin System]
      summary: é‡ç½®ç”¨æˆ·ç­¾åˆ°æ•°æ®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      parameters: [{ name: userId, in: path, required: true, schema: { type: integer } }]
      responses: { '200': { description: é‡ç½®æˆåŠŸ } }
  /checkin/statistics:
    get:
      tags: [Checkin System]
      summary: è·å–ç­¾åˆ°ç»Ÿè®¡ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security: [{ BearerAuth: [] }]
      responses: { '200': { description: è·å–æˆåŠŸ } }

  # åˆ†ç±»ç®¡ç†ç³»ç»Ÿ
  /categories:
    get:
      tags: [Categories]
      summary: è·å–åˆ†ç±»åˆ—è¡¨
      description: è·å–æ‰€æœ‰æ¿€æ´»çš„åˆ†ç±»åˆ—è¡¨ï¼Œæ”¯æŒå±‚çº§ç»“æ„æ˜¾ç¤ºå’Œå¤šç§æŸ¥è¯¢é€‰é¡¹
      parameters:
        - name: page
          in: query
          description: é¡µç ï¼ˆä»1å¼€å§‹ï¼Œä»…åœ¨tree=falseæ—¶æœ‰æ•ˆï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡ï¼ˆ1-100ï¼Œä»…åœ¨tree=falseæ—¶æœ‰æ•ˆï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 20
        - name: tree
          in: query
          description: æ˜¯å¦è¿”å›æ ‘å½¢ç»“æ„
          required: false
          schema:
            type: boolean
            default: true
            example: true
        - name: include_inactive
          in: query
          description: æ˜¯å¦åŒ…å«éæ¿€æ´»åˆ†ç±»ï¼ˆä»…ç®¡ç†å‘˜å¯ç”¨ï¼‰
          required: false
          schema:
            type: boolean
            default: false
            example: false
        - name: parent_id
          in: query
          description: çˆ¶åˆ†ç±»IDï¼ˆè·å–æŒ‡å®šçˆ¶åˆ†ç±»ä¸‹çš„å­åˆ†ç±»ï¼Œnullè·å–æ ¹åˆ†ç±»ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            example: 1
        - name: search
          in: query
          description: æœç´¢å…³é”®è¯ï¼ˆæœç´¢åˆ†ç±»åç§°å’Œæ˜¾ç¤ºåç§°ï¼‰
          required: false
          schema:
            type: string
            maxLength: 100
            example: "å‰ç«¯"
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryListResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags: [Categories]
      summary: åˆ›å»ºåˆ†ç±»
      description: åˆ›å»ºæ–°çš„åˆ†ç±»ï¼Œéœ€è¦category:createæƒé™
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCategoryRequest'
      responses:
        '201':
          description: åˆ†ç±»åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Category'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥æˆ–åˆ†ç±»åç§°å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /categories/popular/list:
    get:
      tags: [Categories]
      summary: è·å–çƒ­é—¨åˆ†ç±»
      description: æ ¹æ®èµ„æºæ•°é‡å’ŒæŸ¥çœ‹æ¬¡æ•°è·å–çƒ­é—¨åˆ†ç±»ï¼ŒæŒ‰å—æ¬¢è¿ç¨‹åº¦æ’åº
      parameters:
        - name: limit
          in: query
          description: è¿”å›æ•°é‡é™åˆ¶
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 10
            example: 10
        - name: time_range
          in: query
          description: ç»Ÿè®¡æ—¶é—´èŒƒå›´ï¼ˆå¤©æ•°ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 365
            default: 30
            example: 30
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoryListResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /categories/{id}:
    get:
      tags: [Categories]
      summary: è·å–åˆ†ç±»è¯¦æƒ…
      description: è·å–æŒ‡å®šåˆ†ç±»çš„è¯¦ç»†ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®
      parameters:
        - name: id
          in: path
          description: åˆ†ç±»ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Category'
        '404':
          description: åˆ†ç±»ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags: [Categories]
      summary: æ›´æ–°åˆ†ç±»
      description: æ›´æ–°åˆ†ç±»ä¿¡æ¯ï¼Œéœ€è¦category:updateæƒé™
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: åˆ†ç±»ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCategoryRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Category'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: åˆ†ç±»ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags: [Categories]
      summary: åˆ é™¤åˆ†ç±»
      description: åˆ é™¤åˆ†ç±»ï¼Œéœ€è¦category:deleteæƒé™ï¼ˆä¸èƒ½åˆ é™¤æœ‰å­åˆ†ç±»æˆ–å…³è”èµ„æºçš„åˆ†ç±»ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: åˆ†ç±»ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '400':
          description: åˆ†ç±»æœ‰å­åˆ†ç±»æˆ–å…³è”èµ„æºï¼Œæ— æ³•åˆ é™¤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: åˆ†ç±»ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /categories/admin/batch-create:
    post:
      tags: [Categories]
      summary: æ‰¹é‡åˆ›å»ºåˆ†ç±»ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜æ‰¹é‡åˆ›å»ºå¤šä¸ªåˆ†ç±»
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - categories
              properties:
                categories:
                  type: array
                  items:
                    $ref: '#/components/schemas/CreateCategoryRequest'
                  minItems: 1
                  maxItems: 20
                  description: è¦åˆ›å»ºçš„åˆ†ç±»åˆ—è¡¨
      responses:
        '201':
          description: æ‰¹é‡åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          created:
                            type: array
                            items:
                              $ref: '#/components/schemas/Category'
                          errors:
                            type: array
                            items:
                              type: object
                              properties:
                                index:
                                  type: integer
                                error:
                                  type: string
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /categories/admin/batch-sort:
    patch:
      tags: [Categories]
      summary: æ‰¹é‡æ›´æ–°åˆ†ç±»æ’åºï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜æ‰¹é‡æ›´æ–°åˆ†ç±»çš„æ’åºé¡ºåº
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - categories
              properties:
                categories:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - sort_order
                    properties:
                      id:
                        type: integer
                        description: åˆ†ç±»ID
                      sortOrder:
                        type: integer
                        description: æ–°çš„æ’åºé¡ºåº
                  minItems: 1
                  maxItems: 50
                  description: è¦æ›´æ–°æ’åºçš„åˆ†ç±»åˆ—è¡¨
      responses:
        '200':
          description: æ’åºæ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Category'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /categories/admin/stats:
    get:
      tags: [Categories]
      summary: è·å–åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜è·å–è¯¦ç»†çš„åˆ†ç±»ç»Ÿè®¡æ•°æ®
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          overview:
                            type: object
                            properties:
                              total_categories:
                                type: integer
                                description: åˆ†ç±»æ€»æ•°
                              root_categories:
                                type: integer
                                description: æ ¹åˆ†ç±»æ•°
                              sub_categories:
                                type: integer
                                description: å­åˆ†ç±»æ•°
                              active_categories:
                                type: integer
                                description: æ¿€æ´»åˆ†ç±»æ•°
                          usage:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                                displayName:
                                  type: string
                                resourceCount:
                                  type: integer
                                totalViews:
                                  type: integer
                            description: åˆ†ç±»ä½¿ç”¨æƒ…å†µ
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # æ ‡ç­¾ç®¡ç†ç³»ç»Ÿ
  /tags:
    get:
      tags: [Tags]
      summary: è·å–æ ‡ç­¾åˆ—è¡¨
      description: è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µå’Œæœç´¢
      parameters:
        - name: page
          in: query
          description: é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡ï¼ˆ1-100ï¼‰
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 20
        - name: search
          in: query
          description: æœç´¢å…³é”®è¯ï¼ˆæœç´¢æ ‡ç­¾åç§°ï¼‰
          required: false
          schema:
            type: string
            maxLength: 50
            example: "Java"
        - name: sort
          in: query
          description: æ’åºæ–¹å¼
          required: false
          schema:
            type: string
            enum: [name_asc, name_desc, usage_desc, created_desc]
            default: usage_desc
            example: "usage_desc"
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'
    post:
      tags: [Tags]
      summary: åˆ›å»ºæ ‡ç­¾
      description: åˆ›å»ºæ–°çš„æ ‡ç­¾ï¼Œéœ€è¦tag:createæƒé™
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTagRequest'
      responses:
        '201':
          description: æ ‡ç­¾åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagDetailResponse'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥æˆ–æ ‡ç­¾åç§°å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /tags/search/query:
    get:
      tags: [Tags]
      summary: æœç´¢æ ‡ç­¾
      description: æ ¹æ®å…³é”®è¯æœç´¢æ ‡ç­¾
      parameters:
        - name: q
          in: query
          description: æœç´¢å…³é”®è¯
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 50
            example: "React"
        - name: limit
          in: query
          description: è¿”å›æ•°é‡é™åˆ¶
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
            example: 10
      responses:
        '200':
          description: æœç´¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /tags/popular/list:
    get:
      tags: [Tags]
      summary: è·å–çƒ­é—¨æ ‡ç­¾
      description: æ ¹æ®ä½¿ç”¨æ¬¡æ•°è·å–çƒ­é—¨æ ‡ç­¾
      parameters:
        - name: limit
          in: query
          description: è¿”å›æ•°é‡é™åˆ¶
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 50
            default: 20
            example: 15
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagListResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /tags/batch-create:
    post:
      tags: [Tags]
      summary: æ‰¹é‡åˆ›å»ºæ ‡ç­¾
      description: ä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªæ ‡ç­¾ï¼Œéœ€è¦tag:createæƒé™
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BatchCreateTagsRequest'
      responses:
        '201':
          description: æ‰¹é‡åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          created:
                            type: array
                            items:
                              $ref: '#/components/schemas/Tag'
                            description: æˆåŠŸåˆ›å»ºçš„æ ‡ç­¾
                          skipped:
                            type: array
                            items:
                              type: string
                            description: å·²å­˜åœ¨è€Œè¢«è·³è¿‡çš„æ ‡ç­¾åç§°
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /tags/{id}:
    get:
      tags: [Tags]
      summary: è·å–æ ‡ç­¾è¯¦æƒ…
      description: è·å–æŒ‡å®šæ ‡ç­¾çš„è¯¦ç»†ä¿¡æ¯å’Œä½¿ç”¨ç»Ÿè®¡
      parameters:
        - name: id
          in: path
          description: æ ‡ç­¾ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagDetailResponse'
        '404':
          description: æ ‡ç­¾ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    put:
      tags: [Tags]
      summary: æ›´æ–°æ ‡ç­¾
      description: æ›´æ–°æ ‡ç­¾ä¿¡æ¯ï¼Œéœ€è¦tag:updateæƒé™
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: æ ‡ç­¾ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTagRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagDetailResponse'
        '400':
          description: è¾“å…¥éªŒè¯å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: æ ‡ç­¾ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'
    delete:
      tags: [Tags]
      summary: åˆ é™¤æ ‡ç­¾
      description: åˆ é™¤æ ‡ç­¾ï¼Œéœ€è¦tag:deleteæƒé™ï¼ˆä¸èƒ½åˆ é™¤æ­£åœ¨ä½¿ç”¨çš„æ ‡ç­¾ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: æ ‡ç­¾ID
          required: true
          schema:
            type: integer
            minimum: 1
            example: 1
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '400':
          description: æ ‡ç­¾æ­£åœ¨ä½¿ç”¨ï¼Œæ— æ³•åˆ é™¤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          description: æ ‡ç­¾ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /tags/admin/stats:
    get:
      tags: [Tags]
      summary: è·å–æ ‡ç­¾ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜è·å–è¯¦ç»†çš„æ ‡ç­¾ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…æ‹¬ä½¿ç”¨æƒ…å†µå’Œåˆ†å¸ƒç»Ÿè®¡
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagStatsResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /tags/admin/cleanup:
    delete:
      tags: [Tags]
      summary: æ¸…ç†æœªä½¿ç”¨çš„æ ‡ç­¾ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜åˆ é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„æ ‡ç­¾ï¼Œéœ€è¦tag:deleteæƒé™
      security:
        - BearerAuth: []
      responses:
        '200':
          description: æ¸…ç†æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          deletedCount:
                            type: integer
                            description: å·²åˆ é™¤çš„æ ‡ç­¾æ•°é‡
                          deletedTags:
                            type: array
                            items:
                              $ref: '#/components/schemas/Tag'
                            description: è¢«åˆ é™¤çš„æ ‡ç­¾åˆ—è¡¨
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /tags/admin/recalculate-usage:
    post:
      tags: [Tags]
      summary: é‡æ–°è®¡ç®—æ ‡ç­¾ä½¿ç”¨æ¬¡æ•°ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      description: ç®¡ç†å‘˜é‡æ–°è®¡ç®—æ‰€æœ‰æ ‡ç­¾çš„ä½¿ç”¨æ¬¡æ•°ï¼Œéœ€è¦tag:updateæƒé™
      security:
        - BearerAuth: []
      responses:
        '200':
          description: é‡æ–°è®¡ç®—æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          total_tags:
                            type: integer
                            description: æ€»æ ‡ç­¾æ•°
                          total_usage:
                            type: integer
                            description: æ€»ä½¿ç”¨æ¬¡æ•°
                          avg_usage:
                            type: number
                            format: float
                            description: å¹³å‡ä½¿ç”¨æ¬¡æ•°
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ç¤¾åŒºæ¿å—ç®¡ç†
  /community/boards:
    get:
      tags:
        - Community Boards
      summary: è·å–æ¿å—åˆ—è¡¨
      description: è·å–ç¤¾åŒºæ¿å—åˆ—è¡¨ï¼Œæ”¯æŒç»Ÿè®¡ä¿¡æ¯å’ŒçŠ¶æ€ç­›é€‰
      parameters:
        - name: includeStats
          in: query
          schema:
            type: boolean
            default: false
          description: æ˜¯å¦åŒ…å«ç»Ÿè®¡ä¿¡æ¯
        - name: activeOnly
          in: query
          schema:
            type: boolean
            default: true
          description: ä»…æ˜¾ç¤ºæ¿€æ´»çš„æ¿å—
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardListResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - Community Boards
      summary: åˆ›å»ºæ¿å—
      description: åˆ›å»ºæ–°çš„ç¤¾åŒºæ¿å—ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBoardRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityBoard'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /community/boards/{id}:
    get:
      tags:
        - Community Boards
      summary: è·å–æ¿å—è¯¦æƒ…
      description: æ ¹æ®IDè·å–æ¿å—è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityBoard'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Community Boards
      summary: æ›´æ–°æ¿å—
      description: æ›´æ–°æ¿å—ä¿¡æ¯ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBoardRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityBoard'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Community Boards
      summary: åˆ é™¤æ¿å—
      description: åˆ é™¤æ¿å—ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/boards/search/query:
    get:
      tags:
        - Community Boards
      summary: æœç´¢æ¿å—
      description: æ ¹æ®å…³é”®è¯æœç´¢æ¿å—
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: æœç´¢å…³é”®è¯
          example: "æŠ€æœ¯"
      responses:
        '200':
          description: æœç´¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BoardListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'

  /community/boards/{id}/stats:
    get:
      tags:
        - Community Boards
      summary: è·å–æ¿å—ç»Ÿè®¡
      description: è·å–æŒ‡å®šæ¿å—çš„ç»Ÿè®¡ä¿¡æ¯
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: æ¿å—ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          name:
                            type: string
                          displayName:
                            type: string
                          totalPosts:
                            type: string
                          totalComments:
                            type: string
                          unique_authors:
                            type: string
                          latest_post_time:
                            type: string
                            format: date-time
                          avg_view_count:
                            type: string
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ç¤¾åŒºå¸–å­ç®¡ç†
  /community/posts:
    get:
      tags:
        - Community Posts
      summary: è·å–å¸–å­åˆ—è¡¨
      description: è·å–ç¤¾åŒºå¸–å­åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åº
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: é¡µç 
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
          description: æ¯é¡µæ•°é‡
        - name: board_id
          in: query
          schema:
            type: integer
          description: æ¿å—IDç­›é€‰
        - name: author_id
          in: query
          schema:
            type: integer
          description: ä½œè€…IDç­›é€‰
        - name: status
          in: query
          schema:
            type: string
            default: "published"
          description: çŠ¶æ€ç­›é€‰
        - name: is_pinned
          in: query
          schema:
            type: boolean
          description: æ˜¯å¦ç½®é¡¶ç­›é€‰
        - name: is_featured
          in: query
          schema:
            type: boolean
          description: æ˜¯å¦ç²¾åç­›é€‰
        - name: sort_by
          in: query
          schema:
            type: string
            default: "last_reply_time"
          description: æ’åºå­—æ®µ
        - name: sort_order
          in: query
          schema:
            type: string
            enum: [ASC, DESC]
            default: "DESC"
          description: æ’åºæ–¹å‘
        - name: search
          in: query
          schema:
            type: string
          description: æœç´¢å…³é”®è¯
        - name: tags
          in: query
          schema:
            type: string
          description: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”ï¼‰
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'

    post:
      tags:
        - Community Posts
      summary: åˆ›å»ºå¸–å­
      description: åˆ›å»ºæ–°å¸–å­ï¼ˆéœ€è¦ç™»å½•ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/posts/{id}:
    get:
      tags:
        - Community Posts
      summary: è·å–å¸–å­è¯¦æƒ…
      description: è·å–å¸–å­è¯¦æƒ…ï¼Œä¼šè‡ªåŠ¨å¢åŠ æµè§ˆæ•°
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Community Posts
      summary: æ›´æ–°å¸–å­
      description: æ›´æ–°å¸–å­å†…å®¹ï¼ˆä»…ä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePostRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Community Posts
      summary: åˆ é™¤å¸–å­
      description: åˆ é™¤å¸–å­ï¼ˆä»…ä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/posts/search/query:
    get:
      tags:
        - Community Posts
      summary: æœç´¢å¸–å­
      description: å…¨æ–‡æœç´¢å¸–å­å†…å®¹
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
          description: æœç´¢å…³é”®è¯
          example: "vue typescript"
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: é¡µç 
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
          description: æ¯é¡µæ•°é‡
        - name: board_id
          in: query
          schema:
            type: integer
          description: é™åˆ¶åœ¨ç‰¹å®šæ¿å—æœç´¢
      responses:
        '200':
          description: æœç´¢æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostListResponse'
        '400':
          $ref: '#/components/responses/BadRequestError'

  /community/posts/hot/list:
    get:
      tags:
        - Community Posts
      summary: è·å–çƒ­é—¨å¸–å­
      description: è·å–çƒ­é—¨å¸–å­åˆ—è¡¨
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: è¿”å›æ•°é‡
        - name: board_id
          in: query
          schema:
            type: integer
          description: æ¿å—IDï¼ˆå¯é€‰ï¼‰
        - name: days
          in: query
          schema:
            type: integer
            default: 7
          description: ç»Ÿè®¡å¤©æ•°
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CommunityPost'

  /community/posts/{id}/pin:
    patch:
      tags:
        - Community Posts
      summary: ç½®é¡¶å¸–å­
      description: ç½®é¡¶/å–æ¶ˆç½®é¡¶å¸–å­ï¼ˆéœ€è¦ç‰ˆä¸»æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isPinned:
                  type: boolean
                  default: true
                  description: æ˜¯å¦ç½®é¡¶
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/posts/{id}/feature:
    patch:
      tags:
        - Community Posts
      summary: è®¾ç½®ç²¾åå¸–
      description: è®¾ç½®/å–æ¶ˆç²¾åå¸–ï¼ˆéœ€è¦ç‰ˆä¸»æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isFeatured:
                  type: boolean
                  default: true
                  description: æ˜¯å¦ç²¾å
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/posts/{id}/lock:
    patch:
      tags:
        - Community Posts
      summary: é”å®šå¸–å­
      description: é”å®š/è§£é”å¸–å­ï¼ˆéœ€è¦ç‰ˆä¸»æƒé™ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                isLocked:
                  type: boolean
                  default: true
                  description: æ˜¯å¦é”å®š
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityPost'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ç¤¾åŒºè¯„è®ºç®¡ç†
  /community/posts/{post_id}/comments:
    get:
      tags:
        - Community Comments
      summary: è·å–å¸–å­è¯„è®º
      description: è·å–å¸–å­çš„è¯„è®ºåˆ—è¡¨
      parameters:
        - name: post_id
          in: path
          required: true
          schema:
            type: integer
          description: å¸–å­ID
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: é¡µç 
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
          description: æ¯é¡µæ•°é‡
        - name: sort_by
          in: query
          schema:
            type: string
            default: "created_at"
          description: æ’åºå­—æ®µ
        - name: sort_order
          in: query
          schema:
            type: string
            enum: [ASC, DESC]
            default: "ASC"
          description: æ’åºæ–¹å‘
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentListResponse'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/comments:
    post:
      tags:
        - Community Comments
      summary: åˆ›å»ºè¯„è®º
      description: åˆ›å»ºæ–°è¯„è®ºï¼ˆä¸»è¯„è®ºæˆ–å›å¤ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCommentRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityComment'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/comments/{id}:
    get:
      tags:
        - Community Comments
      summary: è·å–è¯„è®ºè¯¦æƒ…
      description: è·å–å•ä¸ªè¯„è®ºçš„è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: è¯„è®ºID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityComment'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Community Comments
      summary: æ›´æ–°è¯„è®º
      description: æ›´æ–°è¯„è®ºå†…å®¹ï¼ˆä»…ä½œè€…ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: è¯„è®ºID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  type: string
                  description: è¯„è®ºå†…å®¹
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CommunityComment'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Community Comments
      summary: åˆ é™¤è¯„è®º
      description: åˆ é™¤è¯„è®ºï¼ˆä»…ä½œè€…æˆ–ç®¡ç†å‘˜ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: è¯„è®ºID
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: åˆ é™¤åŸå› 
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ç¤¾åŒºäº’åŠ¨åŠŸèƒ½
  /community/interactions/like:
    post:
      tags:
        - Community Interactions
      summary: ç‚¹èµ/å–æ¶ˆç‚¹èµ
      description: å¯¹å¸–å­æˆ–è¯„è®ºè¿›è¡Œç‚¹èµæˆ–å–æ¶ˆç‚¹èµ
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LikeRequest'
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          is_liked:
                            type: boolean
                            description: æ˜¯å¦å·²ç‚¹èµ
                          likeCount:
                            type: integer
                            description: ç‚¹èµæ€»æ•°
                          action:
                            type: string
                            enum: [liked, unliked]
                            description: æ“ä½œç±»å‹
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/interactions/favorite:
    post:
      tags:
        - Community Interactions
      summary: æ”¶è—/å–æ¶ˆæ”¶è—
      description: æ”¶è—æˆ–å–æ¶ˆæ”¶è—å¸–å­
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FavoriteRequest'
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          isFavorited:
                            type: boolean
                            description: æ˜¯å¦å·²æ”¶è—
                          favoriteCount:
                            type: integer
                            description: æ”¶è—æ€»æ•°
                          action:
                            type: string
                            enum: [favorited, unfavorited]
                            description: æ“ä½œç±»å‹
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/interactions/share:
    post:
      tags:
        - Community Interactions
      summary: åˆ†äº«å¸–å­
      description: åˆ†äº«å¸–å­åˆ°æŒ‡å®šå¹³å°
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShareRequest'
      responses:
        '200':
          description: åˆ†äº«æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          shareCount:
                            type: integer
                            description: åˆ†äº«æ€»æ•°
                          share_url:
                            type: string
                            description: åˆ†äº«é“¾æ¥
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /community/interactions/report:
    post:
      tags:
        - Community Interactions
      summary: ä¸¾æŠ¥å†…å®¹
      description: ä¸¾æŠ¥å¸–å­ã€è¯„è®ºæˆ–ç”¨æˆ·
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportRequest'
      responses:
        '201':
          description: ä¸¾æŠ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          report_id:
                            type: integer
                            description: ä¸¾æŠ¥ID
                          status:
                            type: string
                            description: ä¸¾æŠ¥çŠ¶æ€
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/interactions/like/check:
    get:
      tags:
        - Community Interactions
      summary: æ£€æŸ¥ç‚¹èµçŠ¶æ€
      description: æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦ç‚¹èµäº†æŒ‡å®šå†…å®¹
      security:
        - BearerAuth: []
      parameters:
        - name: target_type
          in: query
          required: true
          schema:
            type: string
            enum: [post, comment]
          description: ç›®æ ‡ç±»å‹
        - name: target_id
          in: query
          required: true
          schema:
            type: integer
          description: ç›®æ ‡ID
      responses:
        '200':
          description: æ£€æŸ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          is_liked:
                            type: boolean
                            description: æ˜¯å¦å·²ç‚¹èµ
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /community/interactions/favorite/check:
    get:
      tags:
        - Community Interactions
      summary: æ£€æŸ¥æ”¶è—çŠ¶æ€
      description: æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ”¶è—äº†æŒ‡å®šå¸–å­
      security:
        - BearerAuth: []
      parameters:
        - name: post_id
          in: query
          required: true
          schema:
            type: integer
          description: å¸–å­ID
      responses:
        '200':
          description: æ£€æŸ¥æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          isFavorited:
                            type: boolean
                            description: æ˜¯å¦å·²æ”¶è—
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  # VIPç³»ç»Ÿæ¥å£
  /vip/levels:
    get:
      tags:
        - VIP System
      summary: è·å–VIPç­‰çº§é…ç½®
      description: è·å–æ‰€æœ‰å¯ç”¨çš„VIPç­‰çº§é…ç½®ä¿¡æ¯
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/VIPLevel'
    post:
      tags:
        - VIP System
      summary: åˆ›å»ºVIPç­‰çº§é…ç½®
      description: åˆ›å»ºæ–°çš„VIPç­‰çº§é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVIPLevelRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/VIPLevel'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /vip/my-info:
    get:
      tags:
        - VIP System
      summary: è·å–æˆ‘çš„VIPä¿¡æ¯
      description: è·å–å½“å‰ç”¨æˆ·çš„VIPçŠ¶æ€å’Œè¯¦ç»†ä¿¡æ¯
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserVIPInfo'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  # å¡å¯†ç³»ç»Ÿæ¥å£
  /card-keys/redeem:
    post:
      tags:
        - Card Key System
      summary: å…‘æ¢å¡å¯†
      description: ä½¿ç”¨å¡å¯†ä»£ç å…‘æ¢VIPæˆ–ç§¯åˆ†å¥–åŠ±
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RedeemCardKeyRequest'
      responses:
        '200':
          description: å…‘æ¢æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CardKeyRedeemResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /card-keys/generate/batch:
    post:
      tags:
        - Card Key System
      summary: æ‰¹é‡ç”Ÿæˆå¡å¯†
      description: æ‰¹é‡ç”Ÿæˆå¤šä¸ªå¡å¯†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateBatchCardKeyRequest'
      responses:
        '201':
          description: ç”ŸæˆæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BatchCardKeyResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  # ç§¯åˆ†ç³»ç»Ÿæ¥å£
  /points/my-info:
    get:
      tags:
        - Points System
      summary: è·å–æˆ‘çš„ç§¯åˆ†ä¿¡æ¯
      description: è·å–å½“å‰ç”¨æˆ·çš„ç§¯åˆ†ä½™é¢å’Œç»Ÿè®¡ä¿¡æ¯
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserPointsInfo'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /points/transfer:
    post:
      tags:
        - Points System
      summary: ç§¯åˆ†è½¬è´¦
      description: å‘å…¶ä»–ç”¨æˆ·è½¬è´¦ç§¯åˆ†
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PointsTransferRequest'
      responses:
        '200':
          description: è½¬è´¦æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PointsTransferResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /points/leaderboard:
    get:
      tags:
        - Points System
      summary: è·å–ç§¯åˆ†æ’è¡Œæ¦œ
      description: è·å–ç§¯åˆ†æ’è¡Œæ¦œï¼ˆå…¬å¼€æ¥å£ï¼‰
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [current, total]
            default: current
          description: æ’è¡Œæ¦œç±»å‹ï¼ˆcurrent=å½“å‰ç§¯åˆ†ï¼Œtotal=å†å²æ€»ç§¯åˆ†ï¼‰
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
            maximum: 100
          description: è¿”å›æ•°é‡é™åˆ¶
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PointsLeaderboard'

  /points/users/{userId}/adjust:
    post:
      tags:
        - Points System
      summary: è°ƒæ•´ç”¨æˆ·ç§¯åˆ†
      description: ç®¡ç†å‘˜è°ƒæ•´æŒ‡å®šç”¨æˆ·çš„ç§¯åˆ†ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ç”¨æˆ·ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdjustPointsRequest'
      responses:
        '200':
          description: è°ƒæ•´æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PointsAdjustResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  # ç­¾åˆ°ç³»ç»Ÿæ¥å£
  /checkin/check:
    post:
      tags:
        - Checkin System
      summary: æ‰§è¡Œç­¾åˆ°
      description: ç”¨æˆ·æ‰§è¡Œæ¯æ—¥ç­¾åˆ°æ“ä½œ
      security:
        - BearerAuth: []
      responses:
        '200':
          description: ç­¾åˆ°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CheckinResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /checkin/my-status:
    get:
      tags:
        - Checkin System
      summary: è·å–æˆ‘çš„ç­¾åˆ°çŠ¶æ€
      description: è·å–å½“å‰ç”¨æˆ·çš„ç­¾åˆ°çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CheckinStatus'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /checkin/leaderboard:
    get:
      tags:
        - Checkin System
      summary: è·å–ç­¾åˆ°æ’è¡Œæ¦œ
      description: è·å–ç­¾åˆ°æ’è¡Œæ¦œï¼ˆå…¬å¼€æ¥å£ï¼‰
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [consecutive, total, monthly]
            default: consecutive
          description: æ’è¡Œæ¦œç±»å‹ï¼ˆconsecutive=è¿ç»­ç­¾åˆ°ï¼Œtotal=æ€»ç­¾åˆ°æ¬¡æ•°ï¼Œmonthly=æœˆåº¦ç­¾åˆ°ï¼‰
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
            maximum: 100
          description: è¿”å›æ•°é‡é™åˆ¶
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CheckinLeaderboard'

  /checkin/configs:
    get:
      tags:
        - Checkin System
      summary: è·å–ç­¾åˆ°é…ç½®
      description: è·å–æ‰€æœ‰ç­¾åˆ°é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security:
        - BearerAuth: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CheckinConfig'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
    post:
      tags:
        - Checkin System
      summary: åˆ›å»ºç­¾åˆ°é…ç½®
      description: åˆ›å»ºæ–°çš„ç­¾åˆ°é…ç½®ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCheckinConfigRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CheckinConfig'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # åŸºç¡€å“åº”ç»“æ„
    BaseResponse:
      type: object
      properties:
        success:
          type: boolean
          description: è¯·æ±‚æ˜¯å¦æˆåŠŸ
        message:
          type: string
          description: å“åº”æ¶ˆæ¯
        timestamp:
          type: string
          format: date-time
          description: å“åº”æ—¶é—´æˆ³

    # VIPç³»ç»Ÿç›¸å…³Schema
    VIPLevel:
      type: object
      properties:
        id:
          type: integer
          description: ç­‰çº§ID
        level:
          type: integer
          description: VIPç­‰çº§æ•°å­—
        name:
          type: string
          description: ç­‰çº§åç§°
        displayName:
          type: string
          description: æ˜¾ç¤ºåç§°
        description:
          type: string
          description: ç­‰çº§æè¿°
        benefits:
          type: object
          description: VIPæƒç›ŠJSONå¯¹è±¡
        price:
          type: number
          format: decimal
          description: ä»·æ ¼
        durationDays:
          type: integer
          description: æŒç»­å¤©æ•°ï¼ˆ0è¡¨ç¤ºæ— é™æœŸï¼‰
        isActive:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    CreateVIPLevelRequest:
      type: object
      required:
        - level
        - name
        - displayName
      properties:
        level:
          type: integer
          minimum: 0
          description: VIPç­‰çº§æ•°å­—
        name:
          type: string
          maxLength: 50
          description: ç­‰çº§åç§°
        displayName:
          type: string
          maxLength: 100
          description: æ˜¾ç¤ºåç§°
        description:
          type: string
          description: ç­‰çº§æè¿°
        benefits:
          type: object
          description: VIPæƒç›ŠJSONå¯¹è±¡
        price:
          type: number
          format: decimal
          minimum: 0
          description: ä»·æ ¼
        durationDays:
          type: integer
          minimum: 0
          default: 30
          description: æŒç»­å¤©æ•°ï¼ˆ0è¡¨ç¤ºæ— é™æœŸï¼‰

    UpdateVIPLevelRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 50
          description: ç­‰çº§åç§°
        displayName:
          type: string
          maxLength: 100
          description: æ˜¾ç¤ºåç§°
        description:
          type: string
          description: ç­‰çº§æè¿°
        benefits:
          type: object
          description: VIPæƒç›ŠJSONå¯¹è±¡
        price:
          type: number
          format: decimal
          minimum: 0
          description: ä»·æ ¼
        durationDays:
          type: integer
          minimum: 0
          description: æŒç»­å¤©æ•°ï¼ˆ0è¡¨ç¤ºæ— é™æœŸï¼‰
        isActive:
          type: boolean
          description: æ˜¯å¦å¯ç”¨

    UserVIPInfo:
      type: object
      properties:
        id:
          type: integer
          description: ç”¨æˆ·ID
        username:
          type: string
          description: ç”¨æˆ·å
        isVip:
          type: boolean
          description: æ˜¯å¦ä¸ºVIP
        vipLevel:
          type: integer
          description: VIPç­‰çº§
        vipExpireAt:
          type: string
          format: date-time
          nullable: true
          description: VIPè¿‡æœŸæ—¶é—´ï¼ˆnullè¡¨ç¤ºæ— é™æœŸï¼‰
        vip_activated_at:
          type: string
          format: date-time
          nullable: true
          description: VIPæ¿€æ´»æ—¶é—´
        vip_name:
          type: string
          description: VIPç­‰çº§åç§°
        vip_display_name:
          type: string
          description: VIPç­‰çº§æ˜¾ç¤ºåç§°
        vip_benefits:
          type: object
          description: VIPæƒç›Š
        isExpired:
          type: boolean
          description: æ˜¯å¦å·²è¿‡æœŸ
        isPermanent:
          type: boolean
          description: æ˜¯å¦ä¸ºæ°¸ä¹…VIP

    SetUserVIPRequest:
      type: object
      required:
        - vip_level
      properties:
        vipLevel:
          type: integer
          minimum: 1
          description: VIPç­‰çº§
        days:
          type: integer
          minimum: 0
          default: 30
          description: VIPå¤©æ•°ï¼ˆ0è¡¨ç¤ºæ— é™æœŸï¼‰

    # å¡å¯†ç³»ç»Ÿç›¸å…³Schema
    CardKey:
      type: object
      properties:
        id:
          type: integer
          description: å¡å¯†ID
        code:
          type: string
          description: å¡å¯†ä»£ç 
        type:
          type: string
          enum: [vip, points, days]
          description: å¡å¯†ç±»å‹
        vipLevel:
          type: integer
          description: VIPç­‰çº§
        vipDays:
          type: integer
          description: VIPå¤©æ•°ï¼ˆ0è¡¨ç¤ºæ— é™æœŸï¼‰
        points:
          type: integer
          description: ç§¯åˆ†æ•°é‡
        status:
          type: string
          enum: [unused, used, expired, disabled]
          description: å¡å¯†çŠ¶æ€
        usedBy:
          type: integer
          nullable: true
          description: ä½¿ç”¨è€…ç”¨æˆ·ID
        usedAt:
          type: string
          format: date-time
          nullable: true
          description: ä½¿ç”¨æ—¶é—´
        expireAt:
          type: string
          format: date-time
          nullable: true
          description: è¿‡æœŸæ—¶é—´
        batchId:
          type: string
          nullable: true
          description: æ‰¹æ¬¡ID
        createdBy:
          type: integer
          nullable: true
          description: åˆ›å»ºè€…ç”¨æˆ·ID
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    CardKeyInfo:
      type: object
      properties:
        code:
          type: string
          description: å¡å¯†ä»£ç 
        type:
          type: string
          enum: [vip, points, days]
          description: å¡å¯†ç±»å‹
        status:
          type: string
          enum: [unused, used, expired, disabled]
          description: å¡å¯†çŠ¶æ€
        expireAt:
          type: string
          format: date-time
          nullable: true
          description: è¿‡æœŸæ—¶é—´
        isExpired:
          type: boolean
          description: æ˜¯å¦å·²è¿‡æœŸ

    RedeemCardKeyRequest:
      type: object
      required:
        - code
      properties:
        code:
          type: string
          description: å¡å¯†ä»£ç 

    CardKeyRedeemResult:
      type: object
      properties:
        card_type:
          type: string
          enum: [vip, points, days]
          description: å¡å¯†ç±»å‹
        vipLevel:
          type: integer
          description: VIPç­‰çº§
        vipDays:
          type: integer
          description: VIPå¤©æ•°
        points:
          type: integer
          description: ç§¯åˆ†æ•°é‡

    GenerateCardKeyRequest:
      type: object
      properties:
        type:
          type: string
          enum: [vip, points, days]
          default: vip
          description: å¡å¯†ç±»å‹
        vipLevel:
          type: integer
          minimum: 1
          default: 1
          description: VIPç­‰çº§
        vipDays:
          type: integer
          minimum: 0
          default: 30
          description: VIPå¤©æ•°ï¼ˆ0è¡¨ç¤ºæ— é™æœŸï¼‰
        points:
          type: integer
          minimum: 0
          default: 0
          description: ç§¯åˆ†æ•°é‡
        expireAt:
          type: string
          format: date-time
          nullable: true
          description: å¡å¯†è¿‡æœŸæ—¶é—´

    GenerateBatchCardKeyRequest:
      type: object
      required:
        - count
      properties:
        type:
          type: string
          enum: [vip, points, days]
          default: vip
          description: å¡å¯†ç±»å‹
        vipLevel:
          type: integer
          minimum: 1
          default: 1
          description: VIPç­‰çº§
        vipDays:
          type: integer
          minimum: 0
          default: 30
          description: VIPå¤©æ•°ï¼ˆ0è¡¨ç¤ºæ— é™æœŸï¼‰
        points:
          type: integer
          minimum: 0
          default: 0
          description: ç§¯åˆ†æ•°é‡
        count:
          type: integer
          minimum: 1
          maximum: 1000
          description: ç”Ÿæˆæ•°é‡
        expireAt:
          type: string
          format: date-time
          nullable: true
          description: å¡å¯†è¿‡æœŸæ—¶é—´

    BatchCardKeyResult:
      type: object
      properties:
        batchId:
          type: string
          description: æ‰¹æ¬¡ID
        count:
          type: integer
          description: ç”Ÿæˆæ•°é‡
        sample_codes:
          type: array
          items:
            type: string
          description: ç¤ºä¾‹å¡å¯†ä»£ç 

    # ç§¯åˆ†ç³»ç»Ÿç›¸å…³Schema
    UserPointsInfo:
      type: object
      properties:
        id:
          type: integer
          description: ç”¨æˆ·ID
        username:
          type: string
          description: ç”¨æˆ·å
        points:
          type: integer
          description: å½“å‰ç§¯åˆ†ä½™é¢
        total_points:
          type: integer
          description: å†å²æ€»ç§¯åˆ†
        createdAt:
          type: string
          format: date-time
          description: ç”¨æˆ·æ³¨å†Œæ—¶é—´

    PointsTransferRequest:
      type: object
      required:
        - to_user_id
        - amount
      properties:
        to_user_id:
          type: integer
          description: ç›®æ ‡ç”¨æˆ·ID
        amount:
          type: integer
          minimum: 1
          maximum: 10000
          description: è½¬è´¦é‡‘é¢
        description:
          type: string
          maxLength: 200
          description: è½¬è´¦å¤‡æ³¨

    PointsTransferResult:
      type: object
      properties:
        from:
          type: integer
          description: è½¬å‡ºç”¨æˆ·ID
        to:
          type: integer
          description: è½¬å…¥ç”¨æˆ·ID
        amount:
          type: integer
          description: è½¬è´¦é‡‘é¢
        result:
          type: object
          description: è½¬è´¦ç»“æœè¯¦æƒ…

    PointsLeaderboard:
      type: object
      properties:
        type:
          type: string
          enum: [current, total]
          description: æ’è¡Œæ¦œç±»å‹
        list:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                description: ç”¨æˆ·ID
              username:
                type: string
                description: ç”¨æˆ·å
              nickname:
                type: string
                description: ç”¨æˆ·æ˜µç§°
              points:
                type: integer
                description: å½“å‰ç§¯åˆ†
              total_points:
                type: integer
                description: å†å²æ€»ç§¯åˆ†
              rank:
                type: integer
                description: æ’å

    AdjustPointsRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: integer
          description: è°ƒæ•´æ•°é‡ï¼ˆæ­£æ•°ä¸ºå¢åŠ ï¼Œè´Ÿæ•°ä¸ºæ‰£é™¤ï¼‰
        description:
          type: string
          maxLength: 200
          description: è°ƒæ•´åŸå› 

    PointsAdjustResult:
      type: object
      properties:
        user:
          type: object
          description: è°ƒæ•´åçš„ç”¨æˆ·ç§¯åˆ†ä¿¡æ¯
        record:
          type: object
          description: ç§¯åˆ†å˜æ›´è®°å½•

    # ç­¾åˆ°ç³»ç»Ÿç›¸å…³Schema
    CheckinResult:
      type: object
      properties:
        checkin:
          type: object
          description: ç­¾åˆ°è®°å½•
        points:
          type: object
          description: ç§¯åˆ†å¥–åŠ±è¯¦æƒ…
        total_points:
          type: integer
          description: æœ¬æ¬¡è·å¾—çš„æ€»ç§¯åˆ†
        is_bonus:
          type: boolean
          description: æ˜¯å¦è·å¾—è¿ç»­ç­¾åˆ°å¥–åŠ±
        consecutive_days:
          type: integer
          description: è¿ç»­ç­¾åˆ°å¤©æ•°

    CheckinStatus:
      type: object
      properties:
        checked_in_today:
          type: boolean
          description: ä»Šæ—¥æ˜¯å¦å·²ç­¾åˆ°
        today_checkin:
          type: object
          nullable: true
          description: ä»Šæ—¥ç­¾åˆ°è®°å½•
        stats:
          type: object
          description: ç­¾åˆ°ç»Ÿè®¡ä¿¡æ¯
        config:
          type: object
          nullable: true
          description: å½“å‰ç­¾åˆ°é…ç½®

    CheckinLeaderboard:
      type: object
      properties:
        type:
          type: string
          enum: [consecutive, total, monthly]
          description: æ’è¡Œæ¦œç±»å‹
        list:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                description: ç”¨æˆ·ID
              username:
                type: string
                description: ç”¨æˆ·å
              nickname:
                type: string
                description: ç”¨æˆ·æ˜µç§°
              consecutive_days:
                type: integer
                description: è¿ç»­ç­¾åˆ°å¤©æ•°
              totalCheckins:
                type: integer
                description: æ€»ç­¾åˆ°æ¬¡æ•°
              monthly_checkins:
                type: integer
                description: æœˆåº¦ç­¾åˆ°æ¬¡æ•°

    CheckinConfig:
      type: object
      properties:
        id:
          type: integer
          description: é…ç½®ID
        name:
          type: string
          description: é…ç½®åç§°
        description:
          type: string
          description: é…ç½®æè¿°
        daily_points:
          type: integer
          description: æ¯æ—¥ç­¾åˆ°è·å¾—ç§¯åˆ†
        consecutive_bonus:
          type: object
          description: è¿ç»­ç­¾åˆ°å¥–åŠ±é…ç½®
        monthly_reset:
          type: boolean
          description: æ˜¯å¦æ¯æœˆé‡ç½®è¿ç»­å¤©æ•°
        isActive:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
        createdBy:
          type: integer
          description: åˆ›å»ºè€…ID
        createdAt:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updatedAt:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´

    CreateCheckinConfigRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 100
          description: é…ç½®åç§°
        description:
          type: string
          description: é…ç½®æè¿°
        daily_points:
          type: integer
          minimum: 0
          default: 10
          description: æ¯æ—¥ç­¾åˆ°è·å¾—ç§¯åˆ†
        consecutive_bonus:
          type: object
          default: {}
          description: è¿ç»­ç­¾åˆ°å¥–åŠ±é…ç½®ï¼ˆJSONæ ¼å¼ï¼‰
        monthly_reset:
          type: boolean
          default: true
          description: æ˜¯å¦æ¯æœˆé‡ç½®è¿ç»­å¤©æ•°

  responses:
    BadRequestError:
      description: è¯·æ±‚å‚æ•°é”™è¯¯
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  success:
                    example: false
                  message:
                    example: è¯·æ±‚å‚æ•°é”™è¯¯

    UnauthorizedError:
      description: æœªæˆæƒè®¿é—®
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  success:
                    example: false
                  message:
                    example: æœªæˆæƒè®¿é—®

    ForbiddenError:
      description: æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  success:
                    example: false
                  message:
                    example: æƒé™ä¸è¶³

    NotFoundError:
      description: èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/BaseResponse'
              - type: object
                properties:
                  success:
                    example: false
                  message:
                    example: èµ„æºä¸å­˜åœ¨

paths:
  # èµ„æºç®¡ç†ç›¸å…³è·¯å¾„
