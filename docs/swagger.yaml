openapi: 3.0.3
info:
  title: Alcms Backend API
  description: |
    Alcms CMS èµ„æºç®¡ç†ç³»ç»Ÿåç«¯ API
    
    åŸºäº Node.js + Express.js + PostgreSQL æ„å»ºçš„ç°ä»£åŒ–å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œ
    é›†æˆäº†å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†å’Œå¤šåª’ä½“èµ„æºç®¡ç†åŠŸèƒ½ã€‚
    
    ## æ ¸å¿ƒç‰¹æ€§
    - ğŸ” JWT åŒä»¤ç‰Œè®¤è¯æœºåˆ¶
    - ğŸ›¡ï¸ RBAC æƒé™æ§åˆ¶æ¨¡å‹
    - ğŸ“„ CMS èµ„æºç®¡ç†ç³»ç»Ÿ
    - ğŸ’¬ å¾®ç¤¾åŒºç³»ç»Ÿ
    - ğŸ” å…¨æ–‡æœç´¢åŠŸèƒ½
    - ğŸ“Š æ•°æ®ç»Ÿè®¡åˆ†æ
    
  version: 1.0.0
  contact:
    name: Alcms Team
    email: admin@alcms.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3000/api
    description: å¼€å‘ç¯å¢ƒ
  - url: https://api.alcms.com/api
    description: ç”Ÿäº§ç¯å¢ƒ

tags:
  - name: Authentication
    description: ç”¨æˆ·è®¤è¯ç›¸å…³æ¥å£
  - name: Users
    description: ç”¨æˆ·ç®¡ç†ç›¸å…³æ¥å£
  - name: Resources
    description: èµ„æºç®¡ç†ç›¸å…³æ¥å£
  - name: Categories
    description: åˆ†ç±»ç®¡ç†ç›¸å…³æ¥å£
  - name: Tags
    description: æ ‡ç­¾ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Boards
    description: ç¤¾åŒºæ¿å—ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Posts
    description: ç¤¾åŒºå¸–å­ç®¡ç†ç›¸å…³æ¥å£
  - name: Community Comments
    description: ç¤¾åŒºè¯„è®ºç®¡ç†ç›¸å…³æ¥å£
  - name: Community Interactions
    description: ç¤¾åŒºäº’åŠ¨åŠŸèƒ½ç›¸å…³æ¥å£

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT è®¿é—®ä»¤ç‰Œ

  schemas:
    # åŸºç¡€å“åº”æ ¼å¼
    BaseResponse:
      type: object
      properties:
        success:
          type: boolean
          description: è¯·æ±‚æ˜¯å¦æˆåŠŸ
        message:
          type: string
          description: å“åº”æ¶ˆæ¯
      required:
        - success
        - message

    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: false
            errors:
              type: array
              items:
                type: object
              description: è¯¦ç»†é”™è¯¯ä¿¡æ¯

    # ç”¨æˆ·ç›¸å…³æ¨¡å‹
    User:
      type: object
      properties:
        id:
          type: integer
          description: ç”¨æˆ·ID
          example: 1
        username:
          type: string
          description: ç”¨æˆ·å
          example: "admin"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "admin@alcms.com"
        nickname:
          type: string
          description: æ˜µç§°
          example: "ç®¡ç†å‘˜"
        avatar_url:
          type: string
          format: uri
          nullable: true
          description: å¤´åƒURL
          example: "https://example.com/avatar.jpg"
        bio:
          type: string
          nullable: true
          description: ä¸ªäººç®€ä»‹
          example: "ç³»ç»Ÿç®¡ç†å‘˜"
        status:
          type: string
          enum: [normal, banned, frozen]
          description: ç”¨æˆ·çŠ¶æ€
          example: "normal"
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
      required:
        - id
        - username
        - email
        - nickname
        - status

    Role:
      type: object
      properties:
        name:
          type: string
          description: è§’è‰²åç§°
          example: "admin"
        display_name:
          type: string
          description: è§’è‰²æ˜¾ç¤ºåç§°
          example: "ç®¡ç†å‘˜"
        description:
          type: string
          description: è§’è‰²æè¿°
          example: "ç³»ç»Ÿç®¡ç†å‘˜è§’è‰²"

    Permission:
      type: object
      properties:
        name:
          type: string
          description: æƒé™åç§°
          example: "user:list"
        resource:
          type: string
          description: èµ„æºåç§°
          example: "user"
        action:
          type: string
          description: æ“ä½œåç§°
          example: "list"
        display_name:
          type: string
          description: æƒé™æ˜¾ç¤ºåç§°
          example: "æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨"

    # è®¤è¯ç›¸å…³æ¨¡å‹
    LoginRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: ç™»å½•é‚®ç®±
          example: "admin@alcms.com"
        password:
          type: string
          description: ç™»å½•å¯†ç 
          example: "admin123"
      required:
        - email
        - password

    RegisterRequest:
      type: object
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
          pattern: "^[a-zA-Z0-9_]+$"
          description: ç”¨æˆ·åï¼ˆåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼‰
          example: "newuser"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "newuser@example.com"
        password:
          type: string
          minLength: 8
          maxLength: 128
          description: å¯†ç ï¼ˆè‡³å°‘8ä½ï¼‰
          example: "password123"
        nickname:
          type: string
          maxLength: 100
          description: æ˜µç§°
          example: "æ–°ç”¨æˆ·"
      required:
        - username
        - email
        - password

    TokenPair:
      type: object
      properties:
        accessToken:
          type: string
          description: è®¿é—®ä»¤ç‰Œ
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        refreshToken:
          type: string
          description: åˆ·æ–°ä»¤ç‰Œ
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        tokenType:
          type: string
          description: ä»¤ç‰Œç±»å‹
          example: "Bearer"
        expiresIn:
          type: string
          description: è¿‡æœŸæ—¶é—´
          example: "1h"

    AuthResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              type: object
              properties:
                user:
                  allOf:
                    - $ref: '#/components/schemas/User'
                    - type: object
                      properties:
                        roles:
                          type: array
                          items:
                            $ref: '#/components/schemas/Role'
                tokens:
                  $ref: '#/components/schemas/TokenPair'

    # ç”¨æˆ·ç®¡ç†ç›¸å…³æ¨¡å‹
    CreateUserRequest:
      type: object
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
          pattern: "^[a-zA-Z0-9_]+$"
          description: ç”¨æˆ·å
          example: "newuser"
        email:
          type: string
          format: email
          description: é‚®ç®±
          example: "newuser@example.com"
        password:
          type: string
          minLength: 8
          maxLength: 128
          description: å¯†ç 
          example: "password123"
        nickname:
          type: string
          maxLength: 100
          description: æ˜µç§°
          example: "æ–°ç”¨æˆ·"
        roleName:
          type: string
          enum: [user, vip, moderator, admin]
          description: åˆå§‹è§’è‰²
          example: "user"
        status:
          type: string
          enum: [normal, banned, frozen]
          description: ç”¨æˆ·çŠ¶æ€
          example: "normal"
      required:
        - username
        - email
        - password

    UpdateUserStatusRequest:
      type: object
      properties:
        status:
          type: string
          enum: [normal, banned, frozen]
          description: ç”¨æˆ·çŠ¶æ€
          example: "banned"
        reason:
          type: string
          maxLength: 500
          description: æ“ä½œåŸå› 
          example: "è¿è§„è¡Œä¸º"
      required:
        - status

    FreezeUserRequest:
      type: object
      properties:
        reason:
          type: string
          maxLength: 500
          description: å†»ç»“/è§£å†»åŸå› 
          example: "è´¦æˆ·å¼‚å¸¸æ´»åŠ¨"

    AssignRoleRequest:
      type: object
      properties:
        roleName:
          type: string
          enum: [user, vip, moderator, admin]
          description: è§’è‰²åç§°
          example: "vip"
      required:
        - roleName

    UpdateProfileRequest:
      type: object
      properties:
        nickname:
          type: string
          minLength: 1
          maxLength: 100
          description: æ˜µç§°
          example: "æ–°æ˜µç§°"
        avatar_url:
          type: string
          format: uri
          maxLength: 500
          description: å¤´åƒURL
          example: "https://example.com/new-avatar.jpg"
        bio:
          type: string
          maxLength: 500
          description: ä¸ªäººç®€ä»‹
          example: "è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹"

    UserListResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              type: object
              properties:
                users:
                  type: array
                  items:
                    $ref: '#/components/schemas/User'
                pagination:
                  type: object
                  properties:
                    page:
                      type: integer
                      description: å½“å‰é¡µç 
                      example: 1
                    limit:
                      type: integer
                      description: æ¯é¡µæ•°é‡
                      example: 20
                    total:
                      type: integer
                      description: æ€»æ•°é‡
                      example: 100
                    totalPages:
                      type: integer
                      description: æ€»é¡µæ•°
                      example: 5

    UserStatsResponse:
      allOf:
        - $ref: '#/components/schemas/BaseResponse'
        - type: object
          properties:
            success:
              type: boolean
              example: true
            data:
              type: object
              properties:
                totalUsers:
                  type: integer
                  description: æ€»ç”¨æˆ·æ•°
                  example: 1000
                activeUsers:
                  type: integer
                  description: æ­£å¸¸ç”¨æˆ·æ•°
                  example: 950
                bannedUsers:
                  type: integer
                  description: å°ç¦ç”¨æˆ·æ•°
                  example: 30
                frozenUsers:
                  type: integer
                  description: å†»ç»“ç”¨æˆ·æ•°
                  example: 20
                recentRegistrations:
                  type: integer
                  description: è¿‘7å¤©æ³¨å†Œæ•°
                  example: 50
                roleStats:
                  type: array
                  items:
                    type: object
                    properties:
                      display_name:
                        type: string
                        example: "æ™®é€šç”¨æˆ·"
                      user_count:
                        type: integer
                        example: 800

    # èµ„æºç›¸å…³æ¨¡å‹
    Resource:
      type: object
      properties:
        id:
          type: integer
          description: èµ„æºID
          example: 1
        title:
          type: string
          description: èµ„æºæ ‡é¢˜
          example: "Vue3å¼€å‘æ•™ç¨‹"
        description:
          type: string
          description: èµ„æºæè¿°
          example: "è¯¦ç»†çš„Vue3å¼€å‘æŒ‡å—"
        content:
          type: string
          nullable: true
          description: èµ„æºå†…å®¹
        file_url:
          type: string
          format: uri
          nullable: true
          description: æ–‡ä»¶URL
        thumbnail_url:
          type: string
          format: uri
          nullable: true
          description: ç¼©ç•¥å›¾URL
        file_size:
          type: integer
          nullable: true
          description: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
        duration:
          type: integer
          nullable: true
          description: æ—¶é•¿ï¼ˆç§’ï¼‰
        is_free:
          type: boolean
          description: æ˜¯å¦å…è´¹
          example: false
        required_vip_level:
          type: string
          enum: [none, vip, premium]
          nullable: true
          description: æ‰€éœ€VIPç­‰çº§
        required_points:
          type: integer
          description: æ‰€éœ€ç§¯åˆ†
          example: 100
        download_count:
          type: integer
          description: ä¸‹è½½æ¬¡æ•°
          example: 150
        view_count:
          type: integer
          description: æŸ¥çœ‹æ¬¡æ•°
          example: 1000
        like_count:
          type: integer
          description: ç‚¹èµæ¬¡æ•°
          example: 50
        status:
          type: string
          enum: [draft, reviewing, published, archived]
          description: èµ„æºçŠ¶æ€
          example: "published"
        is_public:
          type: boolean
          description: æ˜¯å¦å…¬å¼€
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    # åˆ†é¡µå‚æ•°
    PaginationQuery:
      type: object
      properties:
        page:
          type: integer
          minimum: 1
          description: é¡µç 
          example: 1
        limit:
          type: integer
          minimum: 1
          maximum: 100
          description: æ¯é¡µæ•°é‡
          example: 20

    # æœç´¢å‚æ•°
    SearchQuery:
      type: object
      properties:
        search:
          type: string
          description: æœç´¢å…³é”®è¯
          example: "vue"
        status:
          type: string
          description: çŠ¶æ€ç­›é€‰
        category:
          type: integer
          description: åˆ†ç±»IDç­›é€‰
        tags:
          type: string
          description: æ ‡ç­¾ç­›é€‰ï¼ˆé€—å·åˆ†éš”ï¼‰
          example: "frontend,tutorial"
        sortBy:
          type: string
          enum: [created_at, updated_at, view_count, download_count, like_count]
          description: æ’åºå­—æ®µ
          example: "created_at"
        sortOrder:
          type: string
          enum: [ASC, DESC]
          description: æ’åºæ–¹å‘
          example: "DESC"

  responses:
    UnauthorizedError:
      description: æœªæˆæƒ - JWTä»¤ç‰Œæ— æ•ˆæˆ–å·²è¿‡æœŸ
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "æ— æ•ˆçš„è®¿é—®ä»¤ç‰Œ"

    ForbiddenError:
      description: ç¦æ­¢è®¿é—® - æƒé™ä¸è¶³
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "æƒé™ä¸è¶³"

    NotFoundError:
      description: èµ„æºä¸å­˜åœ¨
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "èµ„æºä¸å­˜åœ¨"

    ValidationError:
      description: è¾“å…¥éªŒè¯é”™è¯¯
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            success: false
            message: "è¾“å…¥éªŒè¯å¤±è´¥"
            errors:
              - msg: "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-50ä¸ªå­—ç¬¦ä¹‹é—´"
                param: "username"
                location: "body"

security:
  - BearerAuth: []

paths:
  # è®¤è¯ç›¸å…³æ¥å£
  /auth/register:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·æ³¨å†Œ
      description: æ³¨å†Œæ–°ç”¨æˆ·è´¦æˆ·
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: æ³¨å†ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '409':
          description: ç”¨æˆ·åæˆ–é‚®ç®±å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å½•
      description: ä½¿ç”¨é‚®ç®±å’Œå¯†ç ç™»å½•
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          description: é‚®ç®±æˆ–å¯†ç é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "é‚®ç®±æˆ–å¯†ç é”™è¯¯"
        '403':
          description: è´¦æˆ·è¢«å°ç¦æˆ–å†»ç»“
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/refresh:
    post:
      tags:
        - Authentication
      summary: åˆ·æ–°è®¿é—®ä»¤ç‰Œ
      description: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œ
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refreshToken:
                  type: string
                  description: åˆ·æ–°ä»¤ç‰Œ
              required:
                - refreshToken
      responses:
        '200':
          description: ä»¤ç‰Œåˆ·æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        properties:
                          tokens:
                            $ref: '#/components/schemas/TokenPair'
        '400':
          description: ç¼ºå°‘åˆ·æ–°ä»¤ç‰Œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æ— æ•ˆçš„åˆ·æ–°ä»¤ç‰Œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å‡º
      description: æ’¤é”€åˆ·æ–°ä»¤ç‰Œï¼Œç”¨æˆ·ç™»å‡º
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refreshToken:
                  type: string
                  description: åˆ·æ–°ä»¤ç‰Œ
              required:
                - refreshToken
      responses:
        '200':
          description: ç™»å‡ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BaseResponse'
              example:
                success: true
                message: "ç™»å‡ºæˆåŠŸ"
        '400':
          description: ç¼ºå°‘åˆ·æ–°ä»¤ç‰Œ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /auth/profile:
    get:
      tags:
        - Authentication
      summary: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
      description: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        properties:
                          user:
                            allOf:
                              - $ref: '#/components/schemas/User'
                              - type: object
                                properties:
                                  roles:
                                    type: array
                                    items:
                                      $ref: '#/components/schemas/Role'
                                  permissions:
                                    type: array
                                    items:
                                      $ref: '#/components/schemas/Permission'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          description: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ç”¨æˆ·ç®¡ç†ç›¸å…³æ¥å£
  /users/profile:
    put:
      tags:
        - Users
      summary: æ›´æ–°ç”¨æˆ·èµ„æ–™
      description: æ›´æ–°å½“å‰ç”¨æˆ·çš„ä¸ªäººèµ„æ–™
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /users:
    get:
      tags:
        - Users
      summary: è·å–ç”¨æˆ·åˆ—è¡¨
      description: è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: é¡µç 
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: æ¯é¡µæ•°é‡
        - name: status
          in: query
          schema:
            type: string
            enum: [normal, banned, frozen]
          description: çŠ¶æ€ç­›é€‰
        - name: search
          in: query
          schema:
            type: string
          description: æœç´¢å…³é”®è¯ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€æ˜µç§°ï¼‰
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserListResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    post:
      tags:
        - Users
      summary: åˆ›å»ºç”¨æˆ·
      description: ç®¡ç†å‘˜åˆ›å»ºæ–°ç”¨æˆ·
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
                          roles:
                            type: array
                            items:
                              $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '409':
          description: ç”¨æˆ·åæˆ–é‚®ç®±å·²å­˜åœ¨

  /users/stats:
    get:
      tags:
        - Users
      summary: è·å–ç”¨æˆ·ç»Ÿè®¡
      description: è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserStatsResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /users/{userId}:
    get:
      tags:
        - Users
      summary: è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯
      description: è·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ç”¨æˆ·ID
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        properties:
                          user:
                            $ref: '#/components/schemas/User'
                          roles:
                            type: array
                            items:
                              $ref: '#/components/schemas/Role'
                          permissions:
                            type: array
                            items:
                              $ref: '#/components/schemas/Permission'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Users
      summary: åˆ é™¤ç”¨æˆ·
      description: ç®¡ç†å‘˜åˆ é™¤æŒ‡å®šç”¨æˆ·
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ç”¨æˆ·ID
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/BaseResponse'
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        properties:
                          deletedUser:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 123
                              username:
                                type: string
                                example: "deleteduser"
                              email:
                                type: string
                                example: "user@example.com"
                              nickname:
                                type: string
                                example: "å·²åˆ é™¤ç”¨æˆ·"
        '400':
          description: ä¸èƒ½åˆ é™¤è‡ªå·±çš„è´¦æˆ·
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{userId}/status:
    put:
      tags:
        - Users
      summary: æ›´æ–°ç”¨æˆ·çŠ¶æ€
      description: ç®¡ç†å‘˜æ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆå°ç¦/å†»ç»“/è§£é™¤ï¼‰
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ç”¨æˆ·ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserStatusRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
        '400':
          description: ä¸èƒ½ä¿®æ”¹è‡ªå·±çš„çŠ¶æ€æˆ–æ— æ•ˆå‚æ•°
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{userId}/freeze:
    patch:
      tags:
        - Users
      summary: å†»ç»“/è§£å†»ç”¨æˆ·
      description: ç®¡ç†å‘˜å†»ç»“æˆ–è§£å†»æŒ‡å®šç”¨æˆ·
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ç”¨æˆ·ID
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FreezeUserRequest'
      responses:
        '200':
          description: æ“ä½œæˆåŠŸ
        '400':
          description: ä¸èƒ½å†»ç»“è‡ªå·±çš„è´¦æˆ·
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{userId}/roles:
    post:
      tags:
        - Users
      summary: åˆ†é…ç”¨æˆ·è§’è‰²
      description: ç®¡ç†å‘˜ä¸ºç”¨æˆ·åˆ†é…è§’è‰²
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ç”¨æˆ·ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignRoleRequest'
      responses:
        '200':
          description: åˆ†é…æˆåŠŸ
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Users
      summary: ç§»é™¤ç”¨æˆ·è§’è‰²
      description: ç®¡ç†å‘˜ç§»é™¤ç”¨æˆ·çš„æŒ‡å®šè§’è‰²
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
          description: ç”¨æˆ·ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssignRoleRequest'
      responses:
        '200':
          description: ç§»é™¤æˆåŠŸ
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # CMS èµ„æºç®¡ç†æ¥å£ï¼ˆç®€åŒ–ç‰ˆï¼‰
  /resources:
    get:
      tags:
        - Resources
      summary: è·å–èµ„æºåˆ—è¡¨
      responses:
        "200":
          description: è·å–æˆåŠŸ
    post:
      tags:
        - Resources
      summary: åˆ›å»ºèµ„æº
      responses:
        "201":
          description: åˆ›å»ºæˆåŠŸ

  /resources/{id}:
    get:
      tags:
        - Resources
      summary: è·å–èµ„æºè¯¦æƒ…
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: è·å–æˆåŠŸ

  # åˆ†ç±»ç®¡ç†æ¥å£
  /categories:
    get:
      tags:
        - Categories
      summary: è·å–åˆ†ç±»åˆ—è¡¨
      responses:
        "200":
          description: è·å–æˆåŠŸ

  # æ ‡ç­¾ç®¡ç†æ¥å£  
  /tags:
    get:
      tags:
        - Tags
      summary: è·å–æ ‡ç­¾åˆ—è¡¨
      responses:
        "200":
          description: è·å–æˆåŠŸ

  # ç¤¾åŒºç®¡ç†æ¥å£
  /community/boards:
    get:
      tags:
        - Community Boards
      summary: è·å–æ¿å—åˆ—è¡¨
      responses:
        "200":
          description: è·å–æˆåŠŸ

  /community/posts:
    get:
      tags:
        - Community Posts
      summary: è·å–å¸–å­åˆ—è¡¨
      responses:
        "200":
          description: è·å–æˆåŠŸ

