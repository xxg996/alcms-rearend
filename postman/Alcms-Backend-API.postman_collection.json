{
  "info": {
    "name": "Alcms åŽç«¯ç®¡ç†ç³»ç»Ÿ API",
    "description": "åŸºäºŽ Node.js + Express.js + PostgreSQL æž„å»ºçš„ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»Ÿ\n\n## åŠŸèƒ½ç‰¹æ€§\n- JWT åŒä»¤ç‰Œè®¤è¯æœºåˆ¶\n- RBAC æƒé™æŽ§åˆ¶æ¨¡åž‹\n- å››çº§è§’è‰²ä½“ç³»ï¼ˆç”¨æˆ·/VIP/ç‰ˆä¸»/ç®¡ç†å‘˜ï¼‰\n- ç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼ˆæ­£å¸¸/å°ç¦/å†»ç»“ï¼‰\n- å¯†ç å®‰å…¨ï¼ˆbcrypt åŠ å¯†ï¼‰\n- è¯·æ±‚é¢‘çŽ‡é™åˆ¶\n- è¾“å…¥éªŒè¯ä¸Žå®‰å…¨é˜²æŠ¤\n\n## ä½¿ç”¨è¯´æ˜Ž\n1. å…ˆè®¾ç½®çŽ¯å¢ƒå˜é‡ä¸­çš„ baseUrl\n2. æ‰§è¡Œç”¨æˆ·æ³¨å†Œ/ç™»å½•èŽ·å–è®¿é—®ä»¤ç‰Œ\n3. ä»¤ç‰Œä¼šè‡ªåŠ¨ä¿å­˜åˆ°çŽ¯å¢ƒå˜é‡ä¸­\n4. åŽç»­è¯·æ±‚ä¼šè‡ªåŠ¨ä½¿ç”¨ä¿å­˜çš„ä»¤ç‰Œ\n\n## çŽ¯å¢ƒå˜é‡\n- `baseUrl`: API åŸºç¡€åœ°å€ (http://localhost:3000)\n- `accessToken`: è®¿é—®ä»¤ç‰Œï¼ˆç™»å½•åŽè‡ªåŠ¨è®¾ç½®ï¼‰\n- `refreshToken`: åˆ·æ–°ä»¤ç‰Œï¼ˆç™»å½•åŽè‡ªåŠ¨è®¾ç½®ï¼‰\n- `userId`: å½“å‰ç”¨æˆ·IDï¼ˆç™»å½•åŽè‡ªåŠ¨è®¾ç½®ï¼‰",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "alcms-api",
    "_collection_link": ""
  },
  "item": [
    {
      "name": "ðŸ” è®¤è¯ç®¡ç†",
      "description": "ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä»¤ç‰Œç®¡ç†ç­‰è®¤è¯ç›¸å…³æŽ¥å£",
      "item": [
        {
          "name": "ç”¨æˆ·æ³¨å†Œ",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"testuser\",\n  \"email\": \"test@example.com\",\n  \"password\": \"TestPass123!\",\n  \"nickname\": \"æµ‹è¯•ç”¨æˆ·\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "æ³¨å†Œæ–°ç”¨æˆ·è´¦å·\n\n### è¯·æ±‚å‚æ•°\n- `username`: ç”¨æˆ·åï¼ˆ3-50å­—ç¬¦ï¼Œå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰\n- `email`: é‚®ç®±åœ°å€\n- `password`: å¯†ç ï¼ˆè‡³å°‘6å­—ç¬¦ï¼Œå»ºè®®åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—ï¼‰\n- `nickname`: æ˜µç§°ï¼ˆå¯é€‰ï¼Œ1-100å­—ç¬¦ï¼‰\n\n### å“åº”æ•°æ®\n- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\n- JWT è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ\n- é»˜è®¤åˆ†é…æ™®é€šç”¨æˆ·è§’è‰²"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•å“åº”çŠ¶æ€",
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "// æµ‹è¯•å“åº”ç»“æž„",
                  "pm.test(\"Response has required fields\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('success', true);",
                  "    pm.expect(responseJson).to.have.property('data');",
                  "    pm.expect(responseJson.data).to.have.property('user');",
                  "    pm.expect(responseJson.data).to.have.property('tokens');",
                  "});",
                  "",
                  "// ä¿å­˜ä»¤ç‰Œåˆ°çŽ¯å¢ƒå˜é‡",
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('accessToken', responseJson.data.tokens.accessToken);",
                  "    pm.environment.set('refreshToken', responseJson.data.tokens.refreshToken);",
                  "    pm.environment.set('userId', responseJson.data.user.id);",
                  "    console.log('Tokens saved to environment variables');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "ç”¨æˆ·ç™»å½•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"TestPass123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "ç”¨æˆ·ç™»å½•éªŒè¯\n\n### è¯·æ±‚å‚æ•°\n- `email`: æ³¨å†Œæ—¶ä½¿ç”¨çš„é‚®ç®±åœ°å€\n- `password`: ç”¨æˆ·å¯†ç \n\n### å“åº”æ•°æ®\n- ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«è§’è‰²åˆ—è¡¨ï¼‰\n- JWT è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ\n- ä»¤ç‰Œç±»åž‹å’Œè¿‡æœŸæ—¶é—´"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•å“åº”çŠ¶æ€",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// æµ‹è¯•ç™»å½•æˆåŠŸ",
                  "pm.test(\"Login successful\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.equal('ç™»å½•æˆåŠŸ');",
                  "});",
                  "",
                  "// ä¿å­˜ä»¤ç‰Œå’Œç”¨æˆ·ä¿¡æ¯",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('accessToken', responseJson.data.tokens.accessToken);",
                  "    pm.environment.set('refreshToken', responseJson.data.tokens.refreshToken);",
                  "    pm.environment.set('userId', responseJson.data.user.id);",
                  "    pm.environment.set('userEmail', responseJson.data.user.email);",
                  "    console.log('Login successful, tokens updated');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "åˆ·æ–°è®¿é—®ä»¤ç‰Œ",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "refresh"]
            },
            "description": "ä½¿ç”¨åˆ·æ–°ä»¤ç‰ŒèŽ·å–æ–°çš„è®¿é—®ä»¤ç‰Œ\n\n### è¯·æ±‚å‚æ•°\n- `refreshToken`: æœ‰æ•ˆçš„åˆ·æ–°ä»¤ç‰Œ\n\n### å“åº”æ•°æ®\n- æ–°çš„è®¿é—®ä»¤ç‰Œå’Œåˆ·æ–°ä»¤ç‰Œ\n- æ—§çš„åˆ·æ–°ä»¤ç‰Œä¼šè¢«æ’¤é”€"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•å“åº”çŠ¶æ€",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// æ›´æ–°ä»¤ç‰Œ",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('accessToken', responseJson.data.tokens.accessToken);",
                  "    pm.environment.set('refreshToken', responseJson.data.tokens.refreshToken);",
                  "    console.log('Tokens refreshed successfully');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "èŽ·å–å½“å‰ç”¨æˆ·ä¿¡æ¯",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "èŽ·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯\n\n### è®¤è¯è¦æ±‚\néœ€è¦æœ‰æ•ˆçš„è®¿é—®ä»¤ç‰Œ\n\n### å“åº”æ•°æ®\n- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\n- ç”¨æˆ·è§’è‰²åˆ—è¡¨\n- ç”¨æˆ·æƒé™åˆ—è¡¨"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•å“åº”çŠ¶æ€",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// æµ‹è¯•å“åº”ç»“æž„",
                  "pm.test(\"Profile data structure\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.data).to.have.property('user');",
                  "    pm.expect(responseJson.data).to.have.property('roles');",
                  "    pm.expect(responseJson.data).to.have.property('permissions');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ç”¨æˆ·ç™»å‡º",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            },
            "description": "ç”¨æˆ·ç™»å‡ºï¼Œæ’¤é”€åˆ·æ–°ä»¤ç‰Œ\n\n### è¯·æ±‚å‚æ•°\n- `refreshToken`: è¦æ’¤é”€çš„åˆ·æ–°ä»¤ç‰Œï¼ˆå¯é€‰ï¼‰\n\n### å“åº”æ•°æ®\n- ç™»å‡ºæˆåŠŸç¡®è®¤æ¶ˆæ¯"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•å“åº”çŠ¶æ€",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// æ¸…é™¤çŽ¯å¢ƒå˜é‡ä¸­çš„ä»¤ç‰Œ",
                  "if (pm.response.code === 200) {",
                  "    pm.environment.unset('accessToken');",
                  "    pm.environment.unset('refreshToken');",
                  "    console.log('Logged out, tokens cleared');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸ‘¤ ç”¨æˆ·ç®¡ç†",
      "description": "ç”¨æˆ·èµ„æ–™ç®¡ç†ã€ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢ç­‰åŠŸèƒ½",
      "item": [
        {
          "name": "æ›´æ–°ç”¨æˆ·èµ„æ–™",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nickname\": \"æ–°æ˜µç§°\",\n  \"avatar_url\": \"https://example.com/avatar.jpg\",\n  \"bio\": \"è¿™æ˜¯æˆ‘çš„ä¸ªäººç®€ä»‹\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "profile"]
            },
            "description": "æ›´æ–°å½“å‰ç”¨æˆ·çš„ä¸ªäººèµ„æ–™\n\n### è®¤è¯è¦æ±‚\néœ€è¦æœ‰æ•ˆçš„è®¿é—®ä»¤ç‰Œ\n\n### è¯·æ±‚å‚æ•°\n- `nickname`: æ˜µç§°ï¼ˆ1-100å­—ç¬¦ï¼‰\n- `avatar_url`: å¤´åƒURLï¼ˆå¯é€‰ï¼Œæœ€é•¿500å­—ç¬¦ï¼‰\n- `bio`: ä¸ªäººç®€ä»‹ï¼ˆå¯é€‰ï¼Œæœ€é•¿500å­—ç¬¦ï¼‰\n\n### å“åº”æ•°æ®\n- æ›´æ–°åŽçš„ç”¨æˆ·ä¿¡æ¯"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Profile updated successfully\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.equal('ç”¨æˆ·èµ„æ–™æ›´æ–°æˆåŠŸ');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "èŽ·å–ç”¨æˆ·åˆ—è¡¨ (ç®¡ç†å‘˜)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users?page=1&limit=20&status=normal&search=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "é¡µç ï¼ˆä»Ž1å¼€å§‹ï¼‰"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "æ¯é¡µæ•°é‡"
                },
                {
                  "key": "status",
                  "value": "normal",
                  "description": "ç”¨æˆ·çŠ¶æ€è¿‡æ»¤ï¼ˆnormal/banned/frozenï¼‰"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "æœç´¢å…³é”®è¯ï¼ˆç”¨æˆ·åã€é‚®ç®±ã€æ˜µç§°ï¼‰"
                }
              ]
            },
            "description": "èŽ·å–ç³»ç»Ÿç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰\n\n### è®¤è¯è¦æ±‚\néœ€è¦ `user:list` æƒé™ï¼ˆç®¡ç†å‘˜è§’è‰²ï¼‰\n\n### æŸ¥è¯¢å‚æ•°\n- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰\n- `limit`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼‰\n- `status`: çŠ¶æ€è¿‡æ»¤ï¼ˆå¯é€‰ï¼‰\n- `search`: æœç´¢å…³é”®è¯ï¼ˆå¯é€‰ï¼‰\n\n### å“åº”æ•°æ®\n- ç”¨æˆ·åˆ—è¡¨\n- åˆ†é¡µä¿¡æ¯"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Users list structure\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.data).to.have.property('users');",
                  "    pm.expect(responseJson.data).to.have.property('pagination');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "èŽ·å–ç”¨æˆ·ç»Ÿè®¡ (ç®¡ç†å‘˜)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "stats"]
            },
            "description": "èŽ·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰\n\n### è®¤è¯è¦æ±‚\néœ€è¦ç®¡ç†å‘˜è§’è‰²\n\n### å“åº”æ•°æ®\n- æ€»ç”¨æˆ·æ•°\n- æ´»è·ƒç”¨æˆ·æ•°\n- å°ç¦ç”¨æˆ·æ•°\n- å†»ç»“ç”¨æˆ·æ•°\n- æœ€è¿‘æ³¨å†Œæ•°é‡\n- æŒ‰è§’è‰²ç»Ÿè®¡"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Stats data structure\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.data).to.have.property('totalUsers');",
                  "    pm.expect(responseJson.data).to.have.property('activeUsers');",
                  "    pm.expect(responseJson.data).to.have.property('roleStats');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "èŽ·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "{{userId}}"]
            },
            "description": "èŽ·å–æŒ‡å®šç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯\n\n### è®¤è¯è¦æ±‚\nç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ä¿¡æ¯ï¼Œç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹ä»»ä½•ç”¨æˆ·\n\n### å“åº”æ•°æ®\n- ç”¨æˆ·è¯¦ç»†ä¿¡æ¯\n- ç”¨æˆ·è§’è‰²åˆ—è¡¨\n- ç”¨æˆ·æƒé™åˆ—è¡¨"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"User data structure\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.data).to.have.property('user');",
                  "    pm.expect(responseJson.data).to.have.property('roles');",
                  "    pm.expect(responseJson.data).to.have.property('permissions');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "æ›´æ–°ç”¨æˆ·çŠ¶æ€ (ç®¡ç†å‘˜)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"banned\",\n  \"reason\": \"è¿åç¤¾åŒºè§„åˆ™\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "{{userId}}", "status"]
            },
            "description": "æ›´æ–°ç”¨æˆ·çŠ¶æ€ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰\n\n### è®¤è¯è¦æ±‚\néœ€è¦ `user:ban` æƒé™ï¼ˆç®¡ç†å‘˜è§’è‰²ï¼‰\n\n### è¯·æ±‚å‚æ•°\n- `status`: æ–°çŠ¶æ€ï¼ˆnormal/banned/frozenï¼‰\n- `reason`: æ“ä½œåŽŸå› ï¼ˆå¯é€‰ï¼‰\n\n### å“åº”æ•°æ®\n- æ›´æ–°åŽçš„ç”¨æˆ·çŠ¶æ€ä¿¡æ¯"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Status updated successfully\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('ç”¨æˆ·çŠ¶æ€å·²æ›´æ–°');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "åˆ†é…ç”¨æˆ·è§’è‰² (ç®¡ç†å‘˜)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"roleName\": \"vip\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "{{userId}}", "roles"]
            },
            "description": "ä¸ºç”¨æˆ·åˆ†é…è§’è‰²ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰\n\n### è®¤è¯è¦æ±‚\néœ€è¦ `role:assign` æƒé™ï¼ˆç®¡ç†å‘˜è§’è‰²ï¼‰\n\n### è¯·æ±‚å‚æ•°\n- `roleName`: è§’è‰²åç§°ï¼ˆuser/vip/moderator/adminï¼‰\n\n### å“åº”æ•°æ®\n- ç”¨æˆ·ä¿¡æ¯\n- æ›´æ–°åŽçš„è§’è‰²åˆ—è¡¨"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Role assigned successfully\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.equal('è§’è‰²åˆ†é…æˆåŠŸ');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ç§»é™¤ç”¨æˆ·è§’è‰² (ç®¡ç†å‘˜)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"roleName\": \"vip\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/{{userId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "{{userId}}", "roles"]
            },
            "description": "ç§»é™¤ç”¨æˆ·è§’è‰²ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰\n\n### è®¤è¯è¦æ±‚\néœ€è¦ `role:assign` æƒé™ï¼ˆç®¡ç†å‘˜è§’è‰²ï¼‰\n\n### è¯·æ±‚å‚æ•°\n- `roleName`: è¦ç§»é™¤çš„è§’è‰²åç§°\n\n### å“åº”æ•°æ®\n- ç”¨æˆ·ä¿¡æ¯\n- æ›´æ–°åŽçš„è§’è‰²åˆ—è¡¨"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Role removed successfully\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.equal('è§’è‰²ç§»é™¤æˆåŠŸ');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸ” ç³»ç»Ÿä¿¡æ¯",
      "description": "ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å’ŒAPIä¿¡æ¯",
      "item": [
        {
          "name": "å¥åº·æ£€æŸ¥",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "æ£€æŸ¥æœåŠ¡å™¨å¥åº·çŠ¶æ€\n\n### å“åº”æ•°æ®\n- æœåŠ¡çŠ¶æ€\n- æ—¶é—´æˆ³\n- ç‰ˆæœ¬ä¿¡æ¯"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Service is healthy\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.message).to.include('è¿è¡Œæ­£å¸¸');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "API æ–‡æ¡£",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api",
              "host": ["{{baseUrl}}"],
              "path": ["api"]
            },
            "description": "èŽ·å–APIæ–‡æ¡£å’Œç«¯ç‚¹åˆ—è¡¨\n\n### å“åº”æ•°æ®\n- API ç‰ˆæœ¬ä¿¡æ¯\n- å¯ç”¨ç«¯ç‚¹åˆ—è¡¨\n- åŠŸèƒ½ç‰¹æ€§è¯´æ˜Ž"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"API documentation structure\", function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('version');",
                  "    pm.expect(responseJson).to.have.property('endpoints');",
                  "    pm.expect(responseJson).to.have.property('features');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ðŸ§ª æµ‹è¯•åœºæ™¯",
      "description": "å®Œæ•´çš„APIæµ‹è¯•åœºæ™¯å’Œå·¥ä½œæµ",
      "item": [
        {
          "name": "å®Œæ•´ç”¨æˆ·æ³¨å†Œç™»å½•æµç¨‹",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"flowtest_{{$randomInt}}\",\n  \"email\": \"flowtest{{$randomInt}}@example.com\",\n  \"password\": \"FlowTest123!\",\n  \"nickname\": \"æµç¨‹æµ‹è¯•ç”¨æˆ·\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œæµç¨‹\n\n### æµ‹è¯•å†…å®¹\n1. ä½¿ç”¨éšæœºç”¨æˆ·åå’Œé‚®ç®±æ³¨å†Œ\n2. éªŒè¯æ³¨å†ŒæˆåŠŸ\n3. è‡ªåŠ¨ä¿å­˜ä»¤ç‰Œ\n4. éªŒè¯ç”¨æˆ·é»˜è®¤è§’è‰²"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•æ³¨å†ŒæˆåŠŸ",
                  "pm.test(\"Registration successful\", function () {",
                  "    pm.response.to.have.status(201);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "});",
                  "",
                  "// ä¿å­˜ç”¨æˆ·ä¿¡æ¯è¿›è¡ŒåŽç»­æµ‹è¯•",
                  "if (pm.response.code === 201) {",
                  "    const responseJson = pm.response.json();",
                  "    pm.environment.set('testUserId', responseJson.data.user.id);",
                  "    pm.environment.set('testUserEmail', responseJson.data.user.email);",
                  "    pm.environment.set('testAccessToken', responseJson.data.tokens.accessToken);",
                  "    ",
                  "    // ç«‹å³æµ‹è¯•èŽ·å–ç”¨æˆ·ä¿¡æ¯",
                  "    pm.sendRequest({",
                  "        url: pm.environment.get('baseUrl') + '/api/auth/profile',",
                  "        method: 'GET',",
                  "        header: {",
                  "            'Authorization': 'Bearer ' + responseJson.data.tokens.accessToken",
                  "        }",
                  "    }, function (err, response) {",
                  "        if (!err) {",
                  "            pm.test('Profile fetch after registration', function() {",
                  "                pm.expect(response.code).to.equal(200);",
                  "                const profileData = response.json();",
                  "                pm.expect(profileData.data.user.id).to.equal(responseJson.data.user.id);",
                  "            });",
                  "        }",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "æƒé™æµ‹è¯• - æ— æƒé™è®¿é—®",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{testAccessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users"]
            },
            "description": "æµ‹è¯•æ™®é€šç”¨æˆ·è®¿é—®éœ€è¦ç®¡ç†å‘˜æƒé™çš„æŽ¥å£\n\n### é¢„æœŸç»“æžœ\nåº”è¯¥è¿”å›ž403æƒé™ä¸è¶³é”™è¯¯"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•æƒé™è¢«æ‹’ç»",
                  "pm.test(\"Access denied for insufficient permissions\", function () {",
                  "    pm.response.to.have.status(403);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.false;",
                  "    pm.expect(responseJson.message).to.include('æƒé™');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "ä»¤ç‰Œåˆ·æ–°æµ‹è¯•",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "refresh"]
            },
            "description": "æµ‹è¯•ä»¤ç‰Œåˆ·æ–°æœºåˆ¶\n\n### æµ‹è¯•å†…å®¹\n1. ä½¿ç”¨æœ‰æ•ˆåˆ·æ–°ä»¤ç‰ŒèŽ·å–æ–°ä»¤ç‰Œ\n2. éªŒè¯æ—§ä»¤ç‰Œè¢«æ’¤é”€\n3. éªŒè¯æ–°ä»¤ç‰Œå¯æ­£å¸¸ä½¿ç”¨"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// æµ‹è¯•ä»¤ç‰Œåˆ·æ–°æˆåŠŸ",
                  "pm.test(\"Token refresh successful\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.success).to.be.true;",
                  "    pm.expect(responseJson.data.tokens).to.have.property('accessToken');",
                  "    pm.expect(responseJson.data.tokens).to.have.property('refreshToken');",
                  "});",
                  "",
                  "// æµ‹è¯•æ–°ä»¤ç‰Œæœ‰æ•ˆæ€§",
                  "if (pm.response.code === 200) {",
                  "    const responseJson = pm.response.json();",
                  "    const newAccessToken = responseJson.data.tokens.accessToken;",
                  "    ",
                  "    pm.sendRequest({",
                  "        url: pm.environment.get('baseUrl') + '/api/auth/profile',",
                  "        method: 'GET',",
                  "        header: {",
                  "            'Authorization': 'Bearer ' + newAccessToken",
                  "        }",
                  "    }, function (err, response) {",
                  "        if (!err) {",
                  "            pm.test('New token is valid', function() {",
                  "                pm.expect(response.code).to.equal(200);",
                  "            });",
                  "        }",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// å…¨å±€é¢„è¯·æ±‚è„šæœ¬",
          "// æ£€æŸ¥çŽ¯å¢ƒå˜é‡",
          "if (!pm.environment.get('baseUrl')) {",
          "    pm.environment.set('baseUrl', 'http://localhost:3000');",
          "}",
          "",
          "// è®°å½•è¯·æ±‚ä¿¡æ¯",
          "console.log('ðŸš€ è¯·æ±‚:', pm.request.method, pm.request.url.toString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// å…¨å±€æµ‹è¯•è„šæœ¬",
          "// è®°å½•å“åº”æ—¶é—´",
          "const responseTime = pm.response.responseTime;",
          "console.log('â±ï¸ å“åº”æ—¶é—´:', responseTime + 'ms');",
          "",
          "// åŸºç¡€å“åº”æ ¼å¼éªŒè¯",
          "if (pm.response.code >= 200 && pm.response.code < 300) {",
          "    pm.test('Response has JSON content-type', function () {",
          "        pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "    });",
          "}",
          "",
          "// é”™è¯¯å“åº”æ ¼å¼éªŒè¯",
          "if (pm.response.code >= 400) {",
          "    pm.test('Error response format', function () {",
          "        const responseJson = pm.response.json();",
          "        pm.expect(responseJson).to.have.property('success', false);",
          "        pm.expect(responseJson).to.have.property('message');",
          "    });",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    }
  ]
}
