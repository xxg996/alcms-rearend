# Alcms CMS èµ„æºç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Node.js + Express.js + PostgreSQL æ„å»ºçš„ç°ä»£åŒ–å†…å®¹ç®¡ç†ç³»ç»Ÿï¼Œé›†æˆäº†å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†å’Œå¤šåª’ä½“èµ„æºç®¡ç†åŠŸèƒ½ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” å®‰å…¨è®¤è¯
- **JWT åŒä»¤ç‰Œæœºåˆ¶**ï¼šè®¿é—®ä»¤ç‰Œ + åˆ·æ–°ä»¤ç‰Œ
- **å¯†ç å®‰å…¨**ï¼šbcrypt åŠ ç›å“ˆå¸Œï¼Œå¯é…ç½®å¼ºåº¦
- **è¯·æ±‚é¢‘ç‡é™åˆ¶**ï¼šé˜²æ­¢æš´åŠ›æ”»å‡»å’Œæ¶æ„è¯·æ±‚
- **è¾“å…¥éªŒè¯**ï¼šSQL æ³¨å…¥é˜²æŠ¤ã€XSS é˜²æŠ¤
- **å®‰å…¨å¤´è®¾ç½®**ï¼šHelmet ä¸­é—´ä»¶æä¾›å¤šé‡å®‰å…¨é˜²æŠ¤

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- **ç”¨æˆ·æ³¨å†Œ**ï¼šé‚®ç®± + ç”¨æˆ·åéªŒè¯
- **ç”¨æˆ·ç™»å½•**ï¼šé‚®ç®±å¯†ç è®¤è¯
- **èµ„æ–™ç®¡ç†**ï¼šå¤´åƒã€æ˜µç§°ã€ç®€ä»‹ä¿®æ”¹
- **çŠ¶æ€æ§åˆ¶**ï¼šæ­£å¸¸ / å°ç¦ / å†»ç»“çŠ¶æ€ç®¡ç†

### ğŸ›¡ï¸ æƒé™æ§åˆ¶
- **RBAC æ¨¡å‹**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **å››çº§è§’è‰²ä½“ç³»**ï¼š
  - æ™®é€šç”¨æˆ·ï¼šåŸºç¡€åŠŸèƒ½æƒé™
  - VIP ç”¨æˆ·ï¼šé«˜çº§åŠŸèƒ½æƒé™
  - ç‰ˆä¸»ï¼šå†…å®¹ç®¡ç†æƒé™
  - ç®¡ç†å‘˜ï¼šç³»ç»Ÿç®¡ç†æƒé™
- **ç»†ç²’åº¦æƒé™**ï¼šèµ„æº + åŠ¨ä½œçš„æƒé™æ§åˆ¶
- **åŠ¨æ€æƒé™æ£€æŸ¥**ï¼šä¸­é—´ä»¶çº§åˆ«çš„æƒé™éªŒè¯

### ğŸ’ VIPä¼šå‘˜ç³»ç»Ÿ
- **å¤šçº§VIPç­‰çº§**ï¼šæ”¯æŒ1-3çº§VIPï¼Œæƒé™é€’å¢
- **çµæ´»æœ‰æ•ˆæœŸ**ï¼šæ”¯æŒå¤©æ•°VIPå’Œæ°¸ä¹…VIP
- **å¡å¯†å…‘æ¢ç³»ç»Ÿ**ï¼šç”Ÿæˆå’Œç®¡ç†VIPå¡å¯†
- **è‡ªåŠ¨è¿‡æœŸå¤„ç†**ï¼šå®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ›´æ–°è¿‡æœŸç”¨æˆ·çŠ¶æ€
- **è®¢å•è®°å½•**ï¼šå®Œæ•´çš„VIPè´­ä¹°å’Œä½¿ç”¨è®°å½•

### ğŸ« å¡å¯†ç³»ç»Ÿ
- **åŒç±»å‹æ”¯æŒ**ï¼šVIPå¡å¯†å’Œç§¯åˆ†å¡å¯†
- **æ‰¹é‡ç”Ÿæˆ**ï¼šæ”¯æŒä¸€æ¬¡ç”Ÿæˆ1-1000ä¸ªå¡å¯†
- **çŠ¶æ€ç®¡ç†**ï¼šæœªä½¿ç”¨/å·²ä½¿ç”¨/å·²è¿‡æœŸ/å·²ç¦ç”¨
- **ä½¿ç”¨è®°å½•**ï¼šè¯¦ç»†çš„å…‘æ¢å†å²å’Œç»Ÿè®¡
- **è¿‡æœŸæ§åˆ¶**ï¼šå¯è®¾ç½®å¡å¯†æœ‰æ•ˆæœŸ

### ğŸ¯ ç§¯åˆ†ç³»ç»Ÿ
- **ç§¯åˆ†è·å–**ï¼šç­¾åˆ°ã€ä»»åŠ¡ã€ç®¡ç†å‘˜å‘æ”¾ç­‰å¤šç§æ–¹å¼
- **ç§¯åˆ†æ¶ˆè´¹**ï¼šèµ„æºä¸‹è½½ã€åŠŸèƒ½è§£é”ç­‰
- **è½¬è´¦åŠŸèƒ½**ï¼šç”¨æˆ·é—´ç§¯åˆ†è½¬ç§»ï¼ˆå•æ¬¡æœ€å¤š10000ï¼‰
- **ç§¯åˆ†è®°å½•**ï¼šå®Œæ•´çš„ç§¯åˆ†å˜åŠ¨å†å²
- **æ’è¡Œæ¦œç³»ç»Ÿ**ï¼šå®æ—¶ç§¯åˆ†æ’å

### âœ… ç­¾åˆ°ç³»ç»Ÿ
- **æ¯æ—¥ç­¾åˆ°**ï¼šç”¨æˆ·æ¯å¤©å¯ç­¾åˆ°ä¸€æ¬¡è·å¾—ç§¯åˆ†
- **è¿ç»­å¥–åŠ±**ï¼š7å¤©ã€15å¤©ã€30å¤©è¿ç»­ç­¾åˆ°é¢å¤–å¥–åŠ±
- **ç­¾åˆ°ç»Ÿè®¡**ï¼šä¸ªäººç­¾åˆ°å†å²å’Œç»Ÿè®¡æ•°æ®
- **ç®¡ç†åŠŸèƒ½**ï¼šç­¾åˆ°é…ç½®ç®¡ç†ã€ç”¨æˆ·ç­¾åˆ°æ•°æ®ç®¡ç†
- **è¡¥ç­¾åŠŸèƒ½**ï¼šç®¡ç†å‘˜å¯ä¸ºç”¨æˆ·è¡¥ç­¾å†å²æ—¥æœŸ

### â­ æ”¶è—ç³»ç»Ÿ
- **èµ„æºæ”¶è—**ï¼šç”¨æˆ·å¯æ”¶è—å–œæ¬¢çš„èµ„æº
- **æ”¶è—ç®¡ç†**ï¼šæŸ¥çœ‹ã€æœç´¢ã€æ‰¹é‡ç®¡ç†æ”¶è—
- **æ”¶è—ç»Ÿè®¡**ï¼šä¸ªäººå’Œèµ„æºçš„æ”¶è—ç»Ÿè®¡
- **çƒ­é—¨åˆ†æ**ï¼šç®¡ç†å‘˜å¯æŸ¥çœ‹çƒ­é—¨æ”¶è—èµ„æº

### ğŸ“„ CMS èµ„æºç®¡ç†
- **å¤šåª’ä½“æ”¯æŒ**ï¼šæ–‡ç« ã€è§†é¢‘ã€éŸ³é¢‘ã€å›¾ç‰‡ã€æ–‡æ¡£ã€è½¯ä»¶ã€ç”µå­ä¹¦
- **åˆ†ç±»ç®¡ç†**ï¼šæ— é™å±‚çº§çš„æ ‘å½¢åˆ†ç±»ç»“æ„
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šå¤šæ ‡ç­¾æ”¯æŒï¼Œæ™ºèƒ½æ ‡ç­¾æœç´¢å’Œç»Ÿè®¡
- **æƒé™æ§åˆ¶**ï¼šVIPæƒé™ã€ç§¯åˆ†æ¶ˆè€—ã€ä¸‹è½½æ¬¡æ•°é™åˆ¶
- **é˜²ç›—é“¾ä¿æŠ¤**ï¼šç­¾åé“¾æ¥ã€IPéªŒè¯ã€æ—¶æ•ˆæ§åˆ¶
- **å…¨æ–‡æœç´¢**ï¼šPostgreSQL GINç´¢å¼•æ”¯æŒçš„é«˜æ•ˆæœç´¢
- **ç»Ÿè®¡åˆ†æ**ï¼šèµ„æºè®¿é—®ã€ä¸‹è½½ç»Ÿè®¡ï¼Œçƒ­é—¨å†…å®¹åˆ†æ

### ğŸ” æœç´¢åŠŸèƒ½
- **å…¨æ–‡æœç´¢**ï¼šæ ‡é¢˜ã€æè¿°ã€å†…å®¹æ™ºèƒ½æœç´¢
- **é«˜çº§ç­›é€‰**ï¼šåˆ†ç±»ã€æ ‡ç­¾ã€çŠ¶æ€ã€ä»·æ ¼ç»„åˆç­›é€‰
- **ç›¸å…³åº¦æ’åº**ï¼šæŒ‰ç›¸å…³åº¦ã€æ—¶é—´ã€çƒ­åº¦ç­‰å¤šç»´åº¦æ’åº
- **æœç´¢å»ºè®®**ï¼šæ ‡ç­¾è”æƒ³å’Œçƒ­é—¨æœç´¢æ¨è

### ğŸ’¬ å¾®ç¤¾åŒºç³»ç»Ÿ
- **æ¿å—ç®¡ç†**ï¼šæ— é™å±‚çº§æ¿å—ç»“æ„ï¼Œç‰ˆä¸»ç®¡ç†æœºåˆ¶
- **å¸–å­å‘å¸ƒ**ï¼šæ”¯æŒMarkdown/HTMLæ ¼å¼ï¼Œç½®é¡¶ç²¾ååŠŸèƒ½
- **æ¥¼ä¸­æ¥¼è¯„è®º**ï¼šæ— é™åµŒå¥—è¯„è®ºç»“æ„ï¼Œ@ç”¨æˆ·åŠŸèƒ½
- **äº’åŠ¨åŠŸèƒ½**ï¼šç‚¹èµã€æ”¶è—ã€åˆ†äº«ã€ä¸¾æŠ¥ç³»ç»Ÿ
- **ç¤¾åŒºæ²»ç†**ï¼šå†…å®¹å®¡æ ¸ã€è¿è§„å¤„ç½šã€æƒé™æ§åˆ¶
- **å…¨æ–‡æœç´¢**ï¼šPostgreSQL GINç´¢å¼•é«˜æ€§èƒ½æœç´¢
- **å®æ—¶ç»Ÿè®¡**ï¼šå¸–å­ã€è¯„è®ºã€äº’åŠ¨æ•°æ®è‡ªåŠ¨ç»Ÿè®¡

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œç¯å¢ƒ**ï¼šNode.js (>=16.0.0)
- **Web æ¡†æ¶**ï¼šExpress.js 4.x
- **æ•°æ®åº“**ï¼šPostgreSQL (>=12.0)
- **ç¼“å­˜**ï¼šRedis (>=6.0, å¯é€‰)
- **è®¤è¯**ï¼šJSON Web Token (JWT)
- **å¯†ç åŠ å¯†**ï¼šbcrypt
- **è¾“å…¥éªŒè¯**ï¼šexpress-validator
- **å®‰å…¨é˜²æŠ¤**ï¼šhelmet, cors, express-rate-limit
- **API æ–‡æ¡£**ï¼šSwagger/OpenAPI 3.0
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šWinston
- **è¿›ç¨‹ç®¡ç†**ï¼šPM2 é›†ç¾¤æ¨¡å¼
- **æ€§èƒ½ç›‘æ§**ï¼šè‡ªå®šä¹‰ä¸­é—´ä»¶

### é¡¹ç›®ç»“æ„
```
alcms-rearend/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ app.js             # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ cluster.js         # é›†ç¾¤æ¨¡å¼å¯åŠ¨æ–‡ä»¶
â”‚   â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ database.js    # æ•°æ®åº“é…ç½®
â”‚   â”‚   â””â”€â”€ swagger.js     # APIæ–‡æ¡£é…ç½®
â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ authController.js      # ğŸ” ç”¨æˆ·è®¤è¯
â”‚   â”‚   â”œâ”€â”€ userController.js      # ğŸ‘¥ ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ vipController.js       # ğŸ’ VIPä¼šå‘˜ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ cardKeyController.js   # ğŸ« å¡å¯†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ pointsController.js    # ğŸ¯ ç§¯åˆ†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ checkinController.js   # âœ… ç­¾åˆ°ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ favoriteController.js  # â­ æ”¶è—ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ resourceController.js  # ğŸ“„ èµ„æºç®¡ç†
â”‚   â”‚   â”œâ”€â”€ categoryController.js  # ğŸ“‚ åˆ†ç±»ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ tagController.js       # ğŸ·ï¸ æ ‡ç­¾ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ communityBoardController.js    # ğŸ’¬ æ¿å—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ communityPostController.js     # ğŸ“ å¸–å­ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ communityCommentController.js  # ğŸ’­ è¯„è®ºç®¡ç†
â”‚   â”‚   â””â”€â”€ communityInteractionController.js # ğŸ‘ äº’åŠ¨åŠŸèƒ½
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.js        # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ authOptimized.js # ä¼˜åŒ–è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ security.js    # å®‰å…¨ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ errorHandler.js # é”™è¯¯å¤„ç†ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ cacheMiddleware.js # ç¼“å­˜ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ httpCache.js   # HTTPç¼“å­˜ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ performance.js # æ€§èƒ½ç›‘æ§ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ validation.js  # è¾“å…¥éªŒè¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ User.js        # ğŸ‘¥ ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ VIP.js         # ğŸ’ VIPæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ CardKey.js     # ğŸ« å¡å¯†æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Points.js      # ğŸ¯ ç§¯åˆ†æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Checkin.js     # âœ… ç­¾åˆ°æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Favorite.js    # â­ æ”¶è—æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Resource.js    # ğŸ“„ èµ„æºæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Category.js    # ğŸ“‚ åˆ†ç±»æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Tag.js         # ğŸ·ï¸ æ ‡ç­¾æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ CommunityBoard.js      # ğŸ’¬ æ¿å—æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ CommunityPost.js       # ğŸ“ å¸–å­æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ CommunityComment.js    # ğŸ’­ è¯„è®ºæ¨¡å‹
â”‚   â”‚   â””â”€â”€ CommunityInteraction.js # ğŸ‘ äº’åŠ¨æ¨¡å‹
â”‚   â”œâ”€â”€ routes/            # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ auth.js        # ğŸ” è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ users.js       # ğŸ‘¥ ç”¨æˆ·è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ vip.js         # ğŸ’ VIPè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ cardKey.js     # ğŸ« å¡å¯†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ points.js      # ğŸ¯ ç§¯åˆ†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ checkin.js     # âœ… ç­¾åˆ°è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ favorites.js   # â­ æ”¶è—è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ resources.js   # ğŸ“„ èµ„æºè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ categories.js  # ğŸ“‚ åˆ†ç±»è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ tags.js        # ğŸ·ï¸ æ ‡ç­¾è·¯ç”±
â”‚   â”‚   â””â”€â”€ community.js   # ğŸ’¬ ç¤¾åŒºè·¯ç”±
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ index.js       # æœåŠ¡å±‚å…¥å£
â”‚   â”‚   â”œâ”€â”€ BaseService.js # åŸºç¡€æœåŠ¡ç±»
â”‚   â”‚   â”œâ”€â”€ AuthService.js # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ UserService.js # ç”¨æˆ·æœåŠ¡
â”‚   â”‚   â””â”€â”€ ResourceService.js # èµ„æºæœåŠ¡
â”‚   â”œâ”€â”€ docs/              # APIæ–‡æ¡£Schemaå®šä¹‰
â”‚   â”‚   â””â”€â”€ schemas/       # Swagger Schema
â”‚   â”‚       â”œâ”€â”€ common.js  # é€šç”¨Schema
â”‚   â”‚       â”œâ”€â”€ auth.js    # è®¤è¯Schema
â”‚   â”‚       â”œâ”€â”€ user.js    # ç”¨æˆ·Schema
â”‚   â”‚       â”œâ”€â”€ vip.js     # VIPSchema
â”‚   â”‚       â”œâ”€â”€ cardkey.js # å¡å¯†Schema
â”‚   â”‚       â”œâ”€â”€ points.js  # ç§¯åˆ†Schema
â”‚   â”‚       â”œâ”€â”€ checkin.js # ç­¾åˆ°Schema
â”‚   â”‚       â”œâ”€â”€ favorite.js # æ”¶è—Schema
â”‚   â”‚       â”œâ”€â”€ resource.js # èµ„æºSchema
â”‚   â”‚       â”œâ”€â”€ category.js # åˆ†ç±»Schema
â”‚   â”‚       â””â”€â”€ tag.js     # æ ‡ç­¾Schema
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ jwt.js         # JWT å·¥å…·
â”‚       â”œâ”€â”€ secureJwt.js   # å®‰å…¨JWTå·¥å…·
â”‚       â”œâ”€â”€ password.js    # å¯†ç å·¥å…·
â”‚       â”œâ”€â”€ logger.js      # æ—¥å¿—å·¥å…·
â”‚       â”œâ”€â”€ cache.js       # ç¼“å­˜å·¥å…·
â”‚       â”œâ”€â”€ downloadUtils.js # ğŸ” ä¸‹è½½å·¥å…·
â”‚       â”œâ”€â”€ downloadUtilsBatch.js # æ‰¹é‡ä¸‹è½½å·¥å…·
â”‚       â”œâ”€â”€ batchLoader.js # æ‰¹é‡åŠ è½½å™¨
â”‚       â”œâ”€â”€ queryOptimizer.js # æŸ¥è¯¢ä¼˜åŒ–å™¨
â”‚       â””â”€â”€ responseHelper.js # å“åº”åŠ©æ‰‹
â”œâ”€â”€ database/              # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ migrations/        # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ 001_create_tables.sql      # ç”¨æˆ·æƒé™è¡¨
â”‚   â”‚   â”œâ”€â”€ 002_insert_default_data.sql # é»˜è®¤ç”¨æˆ·æ•°æ®
â”‚   â”‚   â”œâ”€â”€ 003_create_cms_tables.sql   # ğŸ“„ CMS è¡¨ç»“æ„
â”‚   â”‚   â”œâ”€â”€ 004_insert_cms_default_data.sql # ğŸ“„ CMS é»˜è®¤æ•°æ®
â”‚   â”‚   â”œâ”€â”€ 005_create_community_tables.sql # ğŸ’¬ ç¤¾åŒºè¡¨ç»“æ„
â”‚   â”‚   â””â”€â”€ 006_insert_community_default_data.sql # ğŸ’¬ ç¤¾åŒºé»˜è®¤æ•°æ®
â”‚   â”œâ”€â”€ migrate.js         # æ•°æ®åº“è¿ç§»å·¥å…·
â”‚   â””â”€â”€ setup.js           # æ•°æ®åº“è®¾ç½®å·¥å…·
â”œâ”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ swagger.yaml.bak2  # Swaggerå¤‡ä»½æ–‡æ¡£
â”‚   â””â”€â”€ swagger.yaml.bak3  # Swaggerå¤‡ä»½æ–‡æ¡£
â”œâ”€â”€ scripts/               # ç®¡ç†è„šæœ¬
â”‚   â””â”€â”€ create-admin.js    # åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
â”œâ”€â”€ postman/               # ğŸ“¡ Postman APIé›†åˆ
â”‚   â”œâ”€â”€ Alcms-Backend-API.postman_collection.json  # ç”¨æˆ·ç®¡ç† API
â”‚   â”œâ”€â”€ Alcms-CMS-API.postman_collection.json      # ğŸ“„ CMS ç®¡ç† API
â”‚   â””â”€â”€ Alcms-Environment.postman_environment.json # ç¯å¢ƒé…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ test-api.js           # API è‡ªåŠ¨åŒ–æµ‹è¯•
â”œâ”€â”€ CLAUDE.md             # Claude AI å·¥ä½œæŒ‡å¯¼æ–‡æ¡£
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- PostgreSQL >= 12.0
- npm æˆ– yarn

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®
å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶å¡«å†™é…ç½®ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å‚æ•°ï¼š

#### æ•°æ®åº“é…ç½®
```env
PGHOST=localhost
PGPORT=5432
PGDATABASE=alcms
PGUSER=your_username
PGPASSWORD=your_password
```

#### JWT é…ç½®
```env
JWT_SECRET=your_super_secure_jwt_secret_key_here
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=your_super_secure_refresh_secret_key_here
JWT_REFRESH_EXPIRES_IN=7d
```

#### æœåŠ¡å™¨é…ç½®
```env
PORT=3000
NODE_ENV=development
```

#### å®‰å…¨é…ç½®
```env
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### 4. æ•°æ®åº“è®¾ç½®
ç¡®ä¿ PostgreSQL æœåŠ¡è¿è¡Œï¼Œå¹¶åˆ›å»ºæ•°æ®åº“ï¼š
```sql
CREATE DATABASE alcms;
```

**è¿ç§»è¯´æ˜**ï¼š
- `001_create_tables.sql` - ç”¨æˆ·ã€è§’è‰²ã€æƒé™è¡¨
- `002_insert_default_data.sql` - é»˜è®¤è§’è‰²å’Œæƒé™æ•°æ®
- `003_create_cms_tables.sql` - CMS æ ¸å¿ƒè¡¨ï¼ˆèµ„æºã€åˆ†ç±»ã€æ ‡ç­¾ç­‰ï¼‰
- `004_insert_cms_default_data.sql` - CMS é»˜è®¤æ•°æ®ï¼ˆèµ„æºç±»å‹ã€åˆ†ç±»ç­‰ï¼‰
- `005_create_community_tables.sql` - ç¤¾åŒºæ ¸å¿ƒè¡¨ï¼ˆæ¿å—ã€å¸–å­ã€è¯„è®ºã€äº’åŠ¨ç­‰ï¼‰
- `006_insert_community_default_data.sql` - ç¤¾åŒºé»˜è®¤æ•°æ®ï¼ˆæ¿å—ã€æƒé™åˆ†é…ç­‰ï¼‰

æœåŠ¡å¯åŠ¨åï¼Œè®¿é—®ï¼š
- **API æœåŠ¡**ï¼šhttp://localhost:3000
- **API æ–‡æ¡£**ï¼šhttp://localhost:3000/api-docs ï¼ˆSwagger UI äº¤äº’å¼æ–‡æ¡£ï¼‰
- **API æ¥å£åˆ—è¡¨**ï¼šhttp://localhost:3000/api ï¼ˆæ‰€æœ‰å¯ç”¨ç«¯ç‚¹æ¦‚è§ˆï¼‰
- **å¥åº·æ£€æŸ¥**ï¼šhttp://localhost:3000/health


## ğŸ¯ NPM è„šæœ¬å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `npm start` | å¯åŠ¨ç”Ÿäº§æœåŠ¡ | ä½¿ç”¨ Node.js ç›´æ¥è¿è¡Œ |
| `npm run dev` | å¯åŠ¨å¼€å‘æœåŠ¡ | ä½¿ç”¨ nodemon è‡ªåŠ¨é‡å¯ |
| `npm run migrate` | ç”¨æˆ·ç³»ç»Ÿè¿ç§» | åˆ›å»ºç”¨æˆ·ã€è§’è‰²ã€æƒé™è¡¨ |
| `npm run migrate-cms` | CMS ç³»ç»Ÿè¿ç§» | åˆ›å»ºèµ„æºã€åˆ†ç±»ã€æ ‡ç­¾è¡¨ |
| `npm run migrate-community` | ç¤¾åŒºç³»ç»Ÿè¿ç§» | åˆ›å»ºæ¿å—ã€å¸–å­ã€è¯„è®ºã€äº’åŠ¨è¡¨ |
| `npm run create-admin` | åˆ›å»ºç®¡ç†å‘˜ | åˆ›å»ºåˆå§‹ç®¡ç†å‘˜è´¦æˆ· |
| `npm run test-api` | API è‡ªåŠ¨åŒ–æµ‹è¯• | æµ‹è¯•æ‰€æœ‰ API ç«¯ç‚¹ |

  # å¼€å‘ç¯å¢ƒé›†ç¾¤ï¼ˆ2è¿›ç¨‹ï¼‰
  npm run pm2:dev

  # ç”Ÿäº§ç¯å¢ƒé›†ç¾¤ï¼ˆmaxè¿›ç¨‹ï¼‰
  npm run pm2:prod

  # ç®¡ç†å‘½ä»¤
  npm run pm2:status   # æŸ¥çœ‹çŠ¶æ€
  npm run pm2:logs     # æŸ¥çœ‹æ—¥å¿—  
  npm run pm2:monit    # æ€§èƒ½ç›‘æ§
  npm run pm2:restart  # é‡å¯
  npm run pm2:stop     # åœæ­¢