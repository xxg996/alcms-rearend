# Alcms åç«¯ç®¡ç†ç³»ç»Ÿ
## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” å®‰å…¨è®¤è¯
- **JWT åŒä»¤ç‰Œæœºåˆ¶**ï¼šè®¿é—®ä»¤ç‰Œ + åˆ·æ–°ä»¤ç‰Œ
- **å¯†ç å®‰å…¨**ï¼šbcrypt åŠ ç›å“ˆå¸Œï¼Œå¯é…ç½®å¼ºåº¦
- **è¯·æ±‚é¢‘ç‡é™åˆ¶**ï¼šé˜²æ­¢æš´åŠ›æ”»å‡»å’Œæ¶æ„è¯·æ±‚
- **è¾“å…¥éªŒè¯**ï¼šSQL æ³¨å…¥é˜²æŠ¤ã€XSS é˜²æŠ¤
- **å®‰å…¨å¤´è®¾ç½®**ï¼šHelmet ä¸­é—´ä»¶æä¾›å¤šé‡å®‰å…¨é˜²æŠ¤

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- **ç”¨æˆ·æ³¨å†Œ**ï¼šé‚®ç®± + ç”¨æˆ·åéªŒè¯
- **ç”¨æˆ·ç™»å½•**ï¼šé‚®ç®±å¯†ç è®¤è¯
- **èµ„æ–™ç®¡ç†**ï¼šå¤´åƒã€æ˜µç§°ã€ç®€ä»‹ä¿®æ”¹
- **çŠ¶æ€æ§åˆ¶**ï¼šæ­£å¸¸ / å°ç¦ / å†»ç»“çŠ¶æ€ç®¡ç†

### ğŸ›¡ï¸ æƒé™æ§åˆ¶
- **RBAC æ¨¡å‹**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **å››çº§è§’è‰²ä½“ç³»**ï¼š
  - æ™®é€šç”¨æˆ·ï¼šåŸºç¡€åŠŸèƒ½æƒé™
  - VIP ç”¨æˆ·ï¼šé«˜çº§åŠŸèƒ½æƒé™
  - ç‰ˆä¸»ï¼šå†…å®¹ç®¡ç†æƒé™
  - ç®¡ç†å‘˜ï¼šç³»ç»Ÿç®¡ç†æƒé™
- **ç»†ç²’åº¦æƒé™**ï¼šèµ„æº + åŠ¨ä½œçš„æƒé™æ§åˆ¶
- **åŠ¨æ€æƒé™æ£€æŸ¥**ï¼šä¸­é—´ä»¶çº§åˆ«çš„æƒé™éªŒè¯

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **è¿è¡Œç¯å¢ƒ**ï¼šNode.js (>=16.0.0)
- **Web æ¡†æ¶**ï¼šExpress.js 4.x
- **æ•°æ®åº“**ï¼šPostgreSQL
- **è®¤è¯**ï¼šJSON Web Token (JWT)
- **å¯†ç åŠ å¯†**ï¼šbcrypt
- **è¾“å…¥éªŒè¯**ï¼šexpress-validator
- **å®‰å…¨é˜²æŠ¤**ï¼šhelmet, cors, express-rate-limit

### é¡¹ç›®ç»“æ„
```
alcms-rearend/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ app.js             # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ database.js    # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â””â”€â”€ userController.js
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.js        # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ security.js    # å®‰å…¨ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ User.js        # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ routes/            # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ auth.js        # è®¤è¯è·¯ç”±
â”‚   â”‚   â””â”€â”€ users.js       # ç”¨æˆ·è·¯ç”±
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ jwt.js         # JWT å·¥å…·
â”‚       â””â”€â”€ password.js    # å¯†ç å·¥å…·
â”œâ”€â”€ database/              # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ migrations/        # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ 001_create_tables.sql
â”‚   â”‚   â””â”€â”€ 002_insert_default_data.sql
â”‚   â””â”€â”€ migrate.js         # è¿ç§»æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ .gitignore            # Git å¿½ç•¥æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- PostgreSQL >= 12.0
- npm æˆ– yarn

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®
å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶å¡«å†™é…ç½®ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å‚æ•°ï¼š

#### æ•°æ®åº“é…ç½®
```env
PGHOST=localhost
PGPORT=5432
PGDATABASE=alcms
PGUSER=your_username
PGPASSWORD=your_password
```

#### JWT é…ç½®
```env
JWT_SECRET=your_super_secure_jwt_secret_key_here
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=your_super_secure_refresh_secret_key_here
JWT_REFRESH_EXPIRES_IN=7d
```

#### æœåŠ¡å™¨é…ç½®
```env
PORT=3000
NODE_ENV=development
```

#### å®‰å…¨é…ç½®
```env
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### 4. æ•°æ®åº“è®¾ç½®
ç¡®ä¿ PostgreSQL æœåŠ¡è¿è¡Œï¼Œå¹¶åˆ›å»ºæ•°æ®åº“ï¼š
```sql
CREATE DATABASE alcms;
```

æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼š
```bash
npm run migrate
```

### 5. å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

æœåŠ¡å¯åŠ¨åï¼Œè®¿é—®ï¼š
- API æœåŠ¡ï¼šhttp://localhost:3000
- API æ–‡æ¡£ï¼šhttp://localhost:3000/api
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:3000/health
